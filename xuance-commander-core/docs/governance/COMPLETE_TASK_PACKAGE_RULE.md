# COMPLETE_TASK_PACKAGE_RULE（完整任務包規則）

## 狀態
- **SUPERSEDED（已整合到 CURSOR_TASK_PACKAGE_RULE.md，自 2026-01-10 起）**
- **請參考**：`docs/governance/CURSOR_TASK_PACKAGE_RULE.md`（本文件的獨特內容已整合到該文件）

---

## 目的（已整合）
本文件的獨特內容已整合到 `CURSOR_TASK_PACKAGE_RULE.md`。

**整合說明**：
- ✅ 任務包內容要求已整合到 `CURSOR_TASK_PACKAGE_RULE.md`
- ✅ 任務包檢查清單已整合到 `CURSOR_TASK_PACKAGE_RULE.md`
- ❌ 快照相關內容已刪除（已轉換為 Cursor 架構，不再使用快照系統）

**新架構（2026-01-10 更新）**：
- ✅ Cursor 作為總指揮和總工程師，直接讀取文件，不需要快照
- ✅ 任務包中包含所有必要的背景資料，讓任務執行者能夠僅憑任務包內容完成任務
- ✅ 純粹以任務包處理任務的工作模式

---

## 核心原則（已整合到 CURSOR_TASK_PACKAGE_RULE.md）

### 完整任務包模式（Complete Task Package Pattern）
- **一個任務包 = 完整可執行**：每個任務包必須包含執行該任務所需的所有背景資料
- **不依賴外部文件**：任務包內包含必要的背景資料（簡要版本），任務執行者能夠僅憑任務包內容完成任務
- **一次任務包解決**：任務執行者（GPT/GEM/GEMINI）應該能夠僅憑任務包內容完成任務，不需要額外查閱文件

---

## 任務包內容要求

### 副指揮官任務包（Deputy Commander Task Package）
**必須包含**：
1. **任務總覽**：任務代號、目標、任務性質、優先級、時程
2. **任務目標**：一句話目標、預期成果、成功定義
3. **項目歷史摘要**（簡要版本）：
   - 最近完成的任務（最近 3-5 個，每項 1-3 行摘要）
   - 關鍵決策點（為什麼做這個決定）
   - 項目整體狀態（當前階段、整體完成度、階段性目標、整體決策脈絡）
   - 未來規劃摘要（短期任務清單、階段性規劃、決策點）
4. **背景資料**（完整內容）：
   - 相關文件路徑和**內容摘要**（不只是路徑引用）
   - 現狀分析（當前狀態、已完成項目、待完成項目、阻塞點）
   - 相關任務（上游任務、下游任務、並行任務）
5. **任務內容**：具體步驟、交付物、驗收標準
6. **約束條件**：硬性限制、參考規範、禁區
7. **資源需求**：需要哪些顧問師、文件、工具
8. **優先級與時程**：P0/P1/P2/P3、預計時程、依賴關係
9. **必要的快照內容**（簡要版本）：
   - 最終目標（核心內容，不超過 50 行）
   - 角色定位（核心職責，不超過 50 行）
   - 基本制度規範（摘要版本，不超過 50 行）
   - 顧問師角色系統（當前任務需要的角色完整定義）

### 顧問師任務包（Advisor Task Package）
**必須包含**：
1. **任務資訊**：Phase、Blocker、Role、Facet、相關主隱喻
2. **任務目標**：清楚的目標描述
3. **Facet 定義**（完整內容）：
   - What it is（Facet 定義）
   - What it is NOT（硬性禁止）
   - Output style（輸出風格要求）
4. **參考範例**（完整內容，不是路徑引用）：
   - P0-3 的完整範例（如果是 P0-4，必須包含 P0-3 的範例內容）
   - 相關的治理規範內容摘要
5. **任務內容**：具體步驟、交付物格式要求、驗收點
6. **禁區**：必須遵守的硬性禁止項目
7. **交付物路徑**：明確的交付物路徑
8. **驗收標準**：清晰的驗收標準

---

## 任務包大小控制

### 目標大小
- **副指揮官任務包**：≤ 3000 行（包含項目歷史摘要、背景資料、快照內容）
- **顧問師任務包**：≤ 2000 行（包含 Facet 定義、參考範例、任務內容）

### 內容優先級
1. **Must Have**（必須包含）：任務目標、任務內容、禁區、驗收標準、Facet 定義、參考範例
2. **Should Have**（應該包含）：項目歷史摘要（簡要版本）、快照內容（簡要版本）、相關文件內容摘要
3. **Nice to Have**（可選包含）：詳細的歷史記錄、完整的快照內容（可以只保留路徑引用）

---

## 快照內容整合策略

### 快照內容不再獨立維護
- **副指揮官快照（DEPUTY_COMMANDER_SNAPSHOT.md）**：不再持續更新
- **快照內容直接夾在任務包內**：每次任務包都包含必要的快照內容（簡要版本）

### 任務包中的快照內容（簡要版本）
必須包含：
1. **最終目標**（核心內容）：
   - 系統最終目標（`FULL/NORTH_STAR.md` 核心內容，不超過 30 行）
   - 專案目標（核心策略，不超過 20 行）
   - 不可觸碰限制（硬性規則，不超過 20 行）

2. **角色定位**（核心職責）：
   - 副指揮官職責（不超過 30 行）
   - 總指揮職責（不超過 30 行）
   - 當前任務需要的顧問師角色完整定義（每個角色不超過 50 行）

3. **基本制度規範**（摘要版本）：
   - 文件寫入位置規則（摘要，不超過 20 行）
   - 任務包執行規則（摘要，不超過 20 行）
   - 顧問師使用規範（摘要，不超過 20 行）

---

## 任務包更新規則

### 副指揮官任務包
- **產出時機**：每次新任務開始時，總指揮產出完整任務包
- **更新時機**：任務範圍或背景資料變更時，更新任務包
- **版本控制**：任務包文件需標註版本號和生成時間

### 顧問師任務包
- **產出時機**：每次需要顧問師執行任務時，總指揮產出完整任務包
- **獨立文件**：每位顧問師的任務包應該是獨立的文件
- **命名規則**：`BRIEF_P0-X_[TASK_NAME]_R[ROLE].md`（例如：`BRIEF_P0-4_secondary_metaphor_whitelist_R2.md`）

---

## 任務包檢查清單

### 總指揮產出任務包時，必須檢查：

#### ✅ 副指揮官任務包檢查清單
- [ ] 任務總覽是否包含（任務代號、目標、任務性質、優先級、時程）？
- [ ] 任務目標是否包含（一句話目標、預期成果、成功定義）？
- [ ] 項目歷史摘要是否包含（最近完成的任務、關鍵決策點、項目整體狀態、未來規劃摘要）？
- [ ] 背景資料是否包含（相關文件內容摘要、現狀分析、相關任務）？
- [ ] 任務內容是否包含（具體步驟、交付物、驗收標準）？
- [ ] 約束條件是否包含（硬性限制、參考規範、禁區）？
- [ ] 資源需求是否包含（需要哪些顧問師、文件、工具）？
- [ ] 優先級與時程是否包含（P0/P1/P2/P3、預計時程、依賴關係）？
- [ ] 必要的快照內容是否包含（最終目標、角色定位、基本制度規範、顧問師角色系統）？

#### ✅ 顧問師任務包檢查清單
- [ ] 任務資訊是否包含（Phase、Blocker、Role、Facet、相關主隱喻）？
- [ ] 任務目標是否包含（清楚的目標描述）？
- [ ] Facet 定義是否包含（What it is、What it is NOT、Output style）？
- [ ] 參考範例是否包含（P0-3 的完整範例內容，不是路徑引用）？
- [ ] 任務內容是否包含（具體步驟、交付物格式要求、驗收點）？
- [ ] 禁區是否包含（必須遵守的硬性禁止項目）？
- [ ] 交付物路徑是否包含（明確的交付物路徑）？
- [ ] 驗收標準是否包含（清晰的驗收標準）？

---

## 任務包範例

### 副指揮官任務包範例
見：`docs/gem/briefs/TASK_PACKAGE_P0-4_FACET_PORTABILITY_APPROVED.md`

### 顧問師任務包範例
見：`docs/gem/briefs/BRIEF_P0-4_secondary_metaphor_whitelist_R2.md`  
見：`docs/gem/briefs/BRIEF_P0-4_banned_terms_L4_templates_R4.md`

---

## 狀態
- ACTIVE（自 2026-01-09 起生效）
- 必須納入副指揮官快照（最後一次更新）
- 總指揮產出任務包時必須遵守此規則
- 自 2026-01-09 起，不再持續更新 `DEPUTY_COMMANDER_SNAPSHOT.md`



