# TASK_MANAGEMENT_ENHANCEMENT（任務管理增強提案）

## 背景
用戶需求：
1. 所有任務都必須寫進某個檔案，那個檔案都會被引進 MIN
2. MIN 只需要知道：現在有什麼任務正在進行、任務有什麼重點、進行到哪裡了、是否可以收尾
3. 收尾之後變成簡單的任務完成以及簡單的任務摘要顯示在 MIN 裡面
4. 詳細的任務內容會寫在其他檔案裡面
5. MIN 裡面也會知道說詳細的內容在哪裡，如果需要進一步調取的時候 GPT 他可以知道要去哪裡調去
6. Cursor 所有需要跟總指揮 GPT 對口的內容，都直接快照到 MIN 或其他重要快照
7. 即使沒有複製給總指揮 GPT，他也可以判斷有哪一些東西可能需要他協助處理

## 已實施的改進

### 1. 創建接口規範制度
- **文件**：`docs/governance/CURSOR_COMMANDER_INTERFACE_RULE.md`
- **內容**：定義 Cursor 與總指揮 GPT 的對口規則
- **效果**：確保所有重要信息自動傳遞到 MIN 快照

### 2. 創建提醒事項文件
- **文件**：`docs/ops/CURSOR_COMMANDER_ALERTS.md`
- **內容**：記錄 Cursor 發現的需要總指揮 GPT 關注的事項
- **效果**：總指揮 GPT 可以直接在 MIN 快照中看到需要處理的事項

### 3. 完善任務記錄系統
- **任務記錄索引**：`docs/ops/TASK_RECORDS_INDEX.md`（完整記錄）
- **任務記錄摘要**：`docs/ops/TASK_RECORDS_SUMMARY.md`（MIN 快照用）
- **效果**：所有任務都有統一記錄，MIN 快照包含摘要和路徑引用

### 4. 任務摘要包含收尾判斷
- **新增欄位**：是否可以收尾、收尾條件、詳細記錄路徑
- **效果**：總指揮 GPT 可以直接判斷任務是否可以收尾

---

## 當前實施狀態

### ✅ 已完成
1. 接口規範制度已創建並納入 MIN 快照
2. 提醒事項文件已創建並納入 MIN 快照
3. 任務記錄系統已完善，包含收尾判斷
4. MIN 快照已包含所有必要的任務信息

### 📊 快照狀態
- **MIN 快照大小**：3085 行（合理範圍）
- **包含內容**：
  - 基本管理制度
  - 任務記錄摘要（包含收尾判斷）
  - 健康檢查記錄
  - Cursor 提醒事項
  - 接口規範

---

## 工作流程

### Cursor 發現需要總指揮 GPT 關注的事項時

1. **判斷優先級**（P0/P1/P2）
2. **記錄到對應文件**：
   - P0/P1 → `docs/ops/CURSOR_COMMANDER_ALERTS.md`
   - 任務相關 → `docs/ops/TASK_RECORDS_SUMMARY.md`
   - 健康檢查 → `docs/ops/HEALTH_CHECK_RECORDS.md`
3. **更新任務記錄**（如果涉及任務）：
   - 更新 `docs/ops/TASK_RECORDS_INDEX.md`（完整記錄）
   - 更新 `docs/ops/TASK_RECORDS_SUMMARY.md`（摘要）
4. **重新生成 MIN 快照**：
   - 執行 `bash tools/build_master_sync_packet_min.sh`
5. **驗證**：
   - 確認新信息出現在 MIN 快照中

### 總指揮 GPT 查看任務狀態時

1. **開啟 MIN 快照**：`memory/briefs/MASTER_MIN_SYNC_PACKET.md`
2. **搜索關鍵字**：
   - "TASK_RECORDS_SUMMARY" → 查看當前任務
   - "CURSOR_COMMANDER_ALERTS" → 查看需要處理的事項
   - "HEALTH_CHECK" → 查看健康檢查狀態
3. **查看任務摘要**：
   - 目標、主要成果、待補齊項目
   - 是否可以收尾、收尾條件
   - 詳細記錄路徑
4. **需要詳細信息時**：
   - 根據路徑引用開啟對應文件

---

## 警示與建議

### ⚠️ 警示

#### 1. MIN 快照大小控制
- **當前大小**：3085 行
- **目標大小**：≤ 3000 行（建議保持）
- **風險**：如果任務摘要過多，可能超過 token 限制
- **對策**：
  - 每個任務摘要嚴格控制在 ≤ 10 行
  - 已完成任務只保留最近 3 個月的摘要
  - 超過 3 個月的已完成任務只保留路徑引用

#### 2. 任務記錄完整性
- **風險**：如果 Cursor 忘記更新任務記錄，總指揮 GPT 無法看到最新狀態
- **對策**：
  - 接口規範已明確要求：所有任務都必須記錄
  - 定期檢查任務記錄是否與實際狀態一致
  - 健康檢查可以加入任務記錄完整性檢查

#### 3. 提醒事項清理
- **風險**：如果提醒事項累積過多，可能影響 MIN 快照大小
- **對策**：
  - RESOLVED 狀態的事項保留 7 天後移除
  - 定期清理歷史記錄

---

## 建議改進

### 建議 1：自動化檢查
**建議**：創建健康檢查腳本，自動檢查：
- 任務記錄是否完整
- 是否有未解決的 P0/P1 提醒事項
- MIN 快照大小是否超過限制

**實施**：可以在 `xc_health_check.sh` 中加入任務記錄檢查

### 建議 2：任務收尾自動化
**建議**：當任務滿足收尾條件時，自動：
- 更新任務狀態為「已完成」
- 從「進行中」移到「已完成」區塊
- 精簡摘要為 1-3 行

**實施**：可以創建任務收尾腳本，自動處理

### 建議 3：提醒事項優先級顯示
**建議**：在 MIN 快照中，提醒事項按優先級排序顯示：
- P0 事項顯示在最前面（紅色標記）
- P1 事項顯示在中間（黃色標記）
- P2 事項顯示在後面（藍色標記）

**實施**：更新 `CURSOR_COMMANDER_ALERTS.md` 格式，在 MIN 快照中按優先級排序

---

## 驗證清單

### 總指揮 GPT 應該能在 MIN 快照中看到
- ✅ 當前任務列表
- ✅ 每個任務的目標、成果、待補齊項目
- ✅ 每個任務是否可以收尾
- ✅ 每個任務的詳細記錄路徑
- ✅ Cursor 提醒事項（如果有）
- ✅ 健康檢查狀態
- ✅ 接口規範（知道如何查看詳細記錄）

---

## 狀態
- PROPOSAL（部分已實施）
- 核心功能已實施並納入 MIN 快照
- 建議改進待總指揮 GPT 審核



