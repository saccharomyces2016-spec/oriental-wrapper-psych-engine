# COMMANDER_CURSOR_COLLABORATION_GUIDE（總指揮與 Cursor 協作指南）

## 目的
幫助總指揮 GPT 在無法直接看到完整代碼庫的情況下，與 Cursor（總工程師）有效協作，避免提出不合理的指令。

---

## 總指揮的職責與限制

### 總指揮的職責
- ✅ **決策與內容**：決定任務方向、提供 brief 內容、審核顧問輸出
- ✅ **任務規劃**：定義交付物、驗收點、完成條件
- ✅ **審核與裁決**：採納/拒絕/要求重做顧問輸出

### 總指揮的限制
- ❌ **無法直接看到完整代碼庫**：只能看到 MIN 快照和提供的文件
- ❌ **無法直接檢查文件結構**：不知道哪些文件已存在、哪些路徑可用
- ❌ **無法直接執行文件操作**：需要通過 Cursor 執行

---

## Cursor 的職責與能力

### Cursor 的職責
- ✅ **文件結構管理**：創建文件、檢查路徑、驗證規範
- ✅ **執行與驗證**：執行指令、檢查結果、提供證據
- ✅ **主動檢查**：發現問題、提供建議、驗證合規性

### Cursor 的能力
- ✅ **可以看到完整代碼庫**：可以檢查任何文件、任何路徑
- ✅ **可以主動驗證**：可以檢查文件是否存在、路徑是否正確
- ✅ **可以提供建議**：發現問題時可以主動提醒

---

## 協作最佳實踐

### 1. 總指揮提出任務時

**應該做的事**：
- ✅ 明確說明任務目標和交付物
- ✅ 提供驗收點和完成條件
- ✅ 引用 MIN 快照中的規範和路徑

**可以依賴 Cursor 做的事**：
- ✅ Cursor 會檢查文件是否已存在
- ✅ Cursor 會驗證路徑是否符合 Canon 規範
- ✅ Cursor 會主動提醒路徑或文件問題

### 2. 總指揮提供 brief 內容時

**應該做的事**：
- ✅ 提供完整的 brief 內容正文
- ✅ 明確引用需要轉交給顧問的背景資料（引用 MIN 中的路徑）
- ✅ 說明預期的輸出格式

**可以依賴 Cursor 做的事**：
- ✅ Cursor 會將內容寫入正確的 Canon 路徑
- ✅ Cursor 會確保文件格式符合規範
- ✅ Cursor 會檢查是否與現有文件衝突

### 3. 總指揮要求執行任務時

**應該做的事**：
- ✅ 明確說明要執行的步驟
- ✅ 提供驗收標準
- ✅ 說明需要更新的文件（TASK_RECORDS_SUMMARY、CURRENT_SUMMARY 等）

**可以依賴 Cursor 做的事**：
- ✅ Cursor 會按照步驟執行
- ✅ Cursor 會驗證每個步驟的結果
- ✅ Cursor 會更新所有必要的文件
- ✅ Cursor 會重建 MIN 快照

---

## 避免不合理指令的建議

### 建議 1：總指揮可以要求 Cursor 先檢查

**當總指揮不確定文件是否存在時**：
- ✅ 可以要求：「請先檢查 `docs/domain/advisory/R2/P0-3_SECONDARY_METAPHOR_RULES.md` 是否存在，如果存在，請告訴我它的內容摘要」
- ✅ Cursor 會檢查並回報，總指揮再決定如何處理

### 建議 2：總指揮可以要求 Cursor 提供建議

**當總指揮不確定路徑是否正確時**：
- ✅ 可以要求：「請檢查這個路徑是否符合 Canon 規範，如果不符合，請提供正確的路徑」
- ✅ Cursor 會驗證並提供建議

### 建議 3：總指揮可以依賴 Cursor 的主動檢查

**Cursor 會主動檢查**：
- ✅ 文件是否已存在（避免覆蓋重要文件）
- ✅ 路徑是否符合 Canon 規範
- ✅ 是否與現有文件衝突
- ✅ 是否違反治理規則

**如果發現問題，Cursor 會**：
- ✅ 寫入 `CURSOR_COMMANDER_ALERTS.md`（會被納入 MIN 快照）
- ✅ 主動提醒總指揮
- ✅ 提供修正建議

---

## 當前任務（P0-3 B1/B2/B3）的協作範例

### 總指揮的做法（合理）

**步驟 A：創建 brief 模板**
- ✅ 總指揮要求創建 4 份 brief 文件
- ✅ 明確指定 Canon 路徑
- ✅ Cursor 執行並創建模板，等待內容填充

**步驟 B：提供 brief 內容**
- ✅ 總指揮提供完整的 brief 內容正文
- ✅ 引用 MIN 中的規範和路徑
- ✅ Cursor 將內容寫入文件

**步驟 C：執行後續步驟**
- ✅ 總指揮要求執行 runs、落盤、更新等
- ✅ Cursor 按照步驟執行並驗證

### 為什麼這個做法合理

1. **符合工作流程**：
   - 總指揮負責決策和內容（brief）
   - Cursor 負責執行和文件管理
   - 符合 GEM 工作流程：指揮官選角色與任務 → 提供輸入包 → 顧問輸出 → 審核 → 落盤

2. **符合職責分工**：
   - 總指揮：決策層（做什麼、為什麼）
   - Cursor：執行層（怎麼做、在哪裡）

3. **符合規範要求**：
   - 所有路徑符合 Canon 規範
   - 所有操作可追溯
   - 所有更新會同步到 MIN 快照

---

## 總指揮可以改進的地方（建議）

### 建議 1：在提出任務前，可以要求 Cursor 先檢查現有文件

**範例**：
- 「請先檢查 `docs/domain/advisory/R2/P0-3_SECONDARY_METAPHOR_RULES.md` 是否存在，如果存在，請告訴我它的內容摘要，我再決定如何處理」

### 建議 2：可以要求 Cursor 提供文件結構摘要

**範例**：
- 「請告訴我 `docs/domain/advisory/R4/` 下有哪些 P0-3 相關文件，我再決定要更新哪些」

### 建議 3：可以依賴 Cursor 的主動提醒

**Cursor 會主動檢查並提醒**：
- 文件是否已存在
- 路徑是否正確
- 是否違反規範

**總指揮可以**：
- 查看 MIN 快照中的 `CURSOR_COMMANDER_ALERTS.md`
- 根據提醒調整指令

---

## 狀態
- ACTIVE
- 必須納入 MIN 快照
- 幫助總指揮 GPT 更好地與 Cursor 協作



