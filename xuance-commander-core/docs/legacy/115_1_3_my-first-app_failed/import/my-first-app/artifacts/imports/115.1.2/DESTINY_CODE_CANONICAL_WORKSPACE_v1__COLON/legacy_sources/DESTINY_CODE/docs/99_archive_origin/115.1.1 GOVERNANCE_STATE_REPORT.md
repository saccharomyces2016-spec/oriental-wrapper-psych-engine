# Governance State Report

**Date**: 2026-01-01  
**Role**: Governance / Refactor Lead  
**Branch**: gov/cleanup-legacy-20260101-170835  
**Objective**: åˆªé™¤ legacyã€åªä¿ç•™æœ€çµ‚ç‰ˆæœ¬ï¼ˆv1 ontology + v1 engine + v2 output/narrativeï¼‰

---

## Executive Summary

ç¶“éå®Œæ•´åˆ†æï¼Œç™¼ç¾ï¼š

1. **å¤§éƒ¨åˆ† legacy æª”æ¡ˆå·²æ¸…ç†**ï¼šContentDB_*.jsã€_deprecatedã€psych/questionBank å·²å¾ src ç›®éŒ„ç§»é™¤
2. **æ ¸å¿ƒ keep é›†åˆç‹€æ…‹**ï¼š
   - âœ… `round2FourSymbol.v1.json` - ACTIVE
   - âœ… `round4Anchors.v1.json` - ACTIVE
   - âœ… `readingNarrative.v1.js` - ACTIVE
   - âš ï¸ `readingEngine.v1.js` - STUBï¼ˆè¢« Dashboard å¼•ç”¨ä½†å¯¦éš›ä¸ä½¿ç”¨ï¼‰
   - âŒ `questionBank.v1.json` - MISSINGï¼ˆä½†è¢« scripts å¼•ç”¨ï¼‰
   - âŒ `resultTemplates/*.js` - MISSINGï¼ˆDashboard ä½¿ç”¨å…§è¯ stubï¼‰

3. **ä¸»è¦å•é¡Œ**ï¼š
   - Dashboard ä»å¼•ç”¨ stub çš„ `readingEngine.v1.js`ï¼Œä½†å¯¦éš›è³‡æ–™ä¾†è‡ª `props.data`
   - Scripts å¼•ç”¨ä¸å­˜åœ¨çš„ `questionBank.v1.json`
   - App.vue å‹•æ…‹ import ä¸å­˜åœ¨çš„ `anchorSelector.js`

---

## A) Repo ç¾æ³ç›¤é»

### A1. æœ€çµ‚æ ¸å¿ƒ keep é›†åˆç‹€æ…‹

| æª”æ¡ˆ | ç‹€æ…‹ | æœ€å¾Œä¿®æ”¹ | è¢«å¼•ç”¨æ–¼ | å‚™è¨» |
|------|------|----------|----------|------|
| `src/core/ontology/questionBank.v1.json` | âŒ MISSING | - | scripts/*.mjs | è¢«å¤šå€‹ scripts å¼•ç”¨ï¼Œä½†æª”æ¡ˆä¸å­˜åœ¨ |
| `src/core/ontology/round2FourSymbol.v1.json` | âœ… ACTIVE | 2025-12-31 | `choiceEngine.js` | Round2 è³‡æ–™æº |
| `src/core/ontology/round4Anchors.v1.json` | âœ… ACTIVE | 2025-12-30 | `05_Dashboard.vue` | Round4 è³‡æ–™æº |
| `src/core/flow/readingEngine.v1.js` | âš ï¸ STUB | 2026-01-01 | `05_Dashboard.vue` | å·²è¢« stubï¼ˆblocked: trueï¼‰ï¼Œè¿”å›æœ€å°çµæ§‹ |
| `src/core/flow/readingNarrative.v1.js` | âœ… ACTIVE | 2025-12-31 | `05_Dashboard.vue` | æ•˜äº‹ç”Ÿæˆ |
| `src/core/content/resultTemplates/readingOutputV2.js` | âŒ MISSING | - | - | Dashboard ä½¿ç”¨å…§è¯ stub |
| `src/core/content/resultTemplates/loader.js` | âŒ MISSING | - | - | å·²ä¸å­˜åœ¨ |
| `src/core/content/resultTemplates/stateTagExtractor.js` | âŒ MISSING | - | - | Dashboard ä½¿ç”¨å…§è¯ stub |
| `src/core/content/resultTemplates/anchorSelector.js` | âŒ MISSING | - | `App.vue` (dynamic) | è¢«å‹•æ…‹ importï¼Œä½†æª”æ¡ˆä¸å­˜åœ¨ |

**è©³ç´°è³‡æ–™**: è¦‹ `_governance/state_snapshot/keep_final_detected.json`

### A2. Legacy å€™é¸é›†åˆåˆ†é¡

| è·¯å¾‘/æ¨¡å¼ | ç‹€æ…‹ | åˆ†é¡ | å¯å¦åˆªé™¤ | å‚™è¨» |
|-----------|------|------|----------|------|
| `src/core/content/ContentDB_*.js` | âœ… ALREADY_DELETED | DEAD | âœ… | å·²å¾ src ç§»é™¤ï¼ˆfind çµæœç‚º 0ï¼‰ |
| `src/_deprecated/**` | âœ… ALREADY_DELETED | DEAD | âœ… | ç›®éŒ„å·²ä¸å­˜åœ¨ |
| `src/core/psych/questionBank/**` | âœ… ALREADY_DELETED | DEAD | âœ… | ç›®éŒ„å·²ä¸å­˜åœ¨ |
| `archive/legacy/**` | ğŸ“¦ ARCHIVED | ARCHIVE | âœ… | å·²æ­¸æª”ï¼Œä¸å½±éŸ¿ runtime |
| `archive/legacy_question_bank/**` | ğŸ“¦ ARCHIVED | ARCHIVE | âœ… | å·²æ­¸æª”ï¼Œä¸å½±éŸ¿ runtime |

**è©³ç´°è³‡æ–™**: è¦‹ `_governance/state_snapshot/legacy_candidates_classified.json`

### A3. éæœŸä½†ä»è¢«å¼•ç”¨çš„æª”æ¡ˆ

1. **`questionBank.v1.json`** (MISSING)
   - è¢«å¼•ç”¨æ–¼ï¼š11 å€‹ scripts
   - æœ€å¾Œ commitï¼š2025-12-28
   - ç‹€æ…‹ï¼šæª”æ¡ˆä¸å­˜åœ¨ï¼Œä½† scripts ä»å˜—è©¦è®€å–
   - å»ºè­°ï¼šç¢ºèª scripts æ˜¯å¦ä»éœ€è¦ï¼Œæˆ–æ”¹ç”¨å…¶ä»–è³‡æ–™æº

2. **`readingEngine.v1.js`** (STUB)
   - è¢«å¼•ç”¨æ–¼ï¼š`05_Dashboard.vue`
   - æœ€å¾Œä¿®æ”¹ï¼š2026-01-01ï¼ˆstub åŒ–ï¼‰
   - ç‹€æ…‹ï¼šå·²è¢« stubï¼Œä½† Dashboard ä»èª¿ç”¨
   - å»ºè­°ï¼šç§»é™¤ Dashboard ä¸­çš„å¼•ç”¨ï¼Œæ”¹ç”¨ `props.data`

---

## B) ä¾è³´/å¼•ç”¨åœ°åœ–

### B1. Entrypoints â†’ Imports åœ°åœ–

**ä¸»è¦ Entrypoints**:
- `src/main.js` â†’ `src/App.vue`
- `src/App.vue` â†’ Views (01-05) + `SoulArchitect.js`
- `src/views/03_Resonance.vue` â†’ `choiceEngine.js` + ontology JSONs
- `src/views/05_Dashboard.vue` â†’ `readingEngine.v1.js` (stub) + `readingNarrative.v1.js`

**æ ¸å¿ƒè³‡æ–™æµ**:
```
main.js â†’ App.vue â†’ SoulArchitect.js â†’ readingFacade.v1.js â†’ psych/scorer.js
                                                              â†’ guidance/buildGuidance.js
                                                              â†’ ai/promptBuilder.js
```

**è©³ç´°åœ°åœ–**: è¦‹ `_governance/state_snapshot/import_graph_summary.tsv`

### B2. å¼•ç”¨åˆ†é¡

| åˆ†é¡ | æª”æ¡ˆæ•¸ | èªªæ˜ | ç¯„ä¾‹ |
|------|--------|------|------|
| RUNTIME_HARD | ~30 | build/run å¿…é ˆ | `choiceEngine.js`, `SoulArchitect.js`, ontology JSONs |
| RUNTIME_SOFT | ~5 | ç‰¹å®šè·¯å¾‘/feature æ‰ç”¨ | `readingEngine.v1.js` (stub), `anchorSelector.js` (missing) |
| DEV_TOOLING | ~20 | scripts/validate/reports | `scripts/*.mjs`, `scripts/validate/*.mjs` |
| DEAD | 0 | å®Œå…¨ç„¡å¼•ç”¨ | å·²æ¸…ç† |

### B3. delete_paths.txt å€™é¸æª”æ¡ˆç‹€æ…‹

æ ¹æ“š `_governance/cleanup_phase2/delete_paths.txt`ï¼š

| æª”æ¡ˆ | ç‹€æ…‹ | è¢«å¼•ç”¨æ–¼ | åˆ†é¡ | å»ºè­° |
|------|------|----------|------|------|
| `src/core/content/ContentDB_*.js` | âœ… DELETED | - | DEAD | å·²åˆªé™¤ |
| `src/_deprecated/core/**` | âœ… DELETED | `scripts/deprecateUnused.mjs` | DEAD | å·²åˆªé™¤ |
| `src/core/psych/questionBank/**` | âœ… DELETED | - | DEAD | å·²åˆªé™¤ |
| `src/core/ontology/questionBank.v1.json` | âŒ MISSING | 11 scripts | DEV_TOOLING | éœ€ç¢ºèª scripts éœ€æ±‚ |

---

## C) readingEngine çœŸå¯¦ç‹€æ…‹ç¢ºèª

### C1. ç›®å‰ç‹€æ…‹

**æª”æ¡ˆ**: `src/core/flow/readingEngine.v1.js`
**ç‹€æ…‹**: **STUB** (blocked: true)
**å…§å®¹**: è¿”å›æœ€å°çµæ§‹ï¼Œä¸ä¾è³´ä»»ä½• datasets

```javascript
export default async function readingEngineV1(payload = {}) {
  console.warn('[GOVERNANCE] readingEngine.v1 stubbed; legacy datasets blocked')
  return {
    domain_key: payload?.round1?.domain_key || payload?.domain || '',
    situation_profile: { top_signals: [], chosen_round2: [] },
    facet_scores: {},
    top_themes: [],
    anchors: [],
    debug: { source: 'readingEngine.v1', blocked: true }
  }
}
```

### C2. Runtime å¦‚ä½•ç”¢ç”Ÿ readingResult

**å¯¦éš›æµç¨‹**:
1. `SoulArchitect.js` é€é `readingFacade.v1.js` ç”¢ç”Ÿ `psych` è³‡æ–™
2. `SoulArchitect.js` çµ„è£å®Œæ•´çš„ `destinyData`ï¼ˆåŒ…å« psych, insights, guidance, narrativeï¼‰
3. `App.vue` å°‡ `destinyData` å‚³çµ¦ `05_Dashboard.vue` ä½œç‚º `props.data`
4. `05_Dashboard.vue` å¾ `props.data` å–å¾—å¯¦éš›è³‡æ–™

**Dashboard ä¸­çš„ readingEngine èª¿ç”¨**:
- `05_Dashboard.vue:985` èª¿ç”¨ `readingEngine(payload)`
- ä½† `readingResult` ä¸»è¦ç”¨æ–¼ debug é¡¯ç¤º
- å¯¦éš›é¡¯ç¤ºçš„è³‡æ–™ä¾†è‡ª `props.data` (line 1004-1008)

### C3. å“ªäº›åŠŸèƒ½é é¢ä½¿ç”¨ readingEngine è¼¸å‡º

**åƒ… `05_Dashboard.vue`**:
- ç”¨æ–¼ debug é¡¯ç¤ºï¼ˆJSON é è¦½ï¼‰
- å¯¦éš›é¡¯ç¤ºçš„è³‡æ–™ä¾†è‡ª `props.data`
- `readingNarrative` å’Œ `readingOutputV2` ä½¿ç”¨ `readingResult`ï¼Œä½† `readingResult` æ˜¯ stub è¼¸å‡º

**çµè«–**: `readingEngine.v1.js` å¯å®‰å…¨ç§»é™¤ï¼Œä½†éœ€å…ˆä¿®æ”¹ Dashboard ç§»é™¤å¼•ç”¨ã€‚

---

## D) åˆªé™¤è¨ˆç•«å»ºè­°

### Phase 3: DEAD & DEV_TOOLING (0 é¢¨éšª)

**ç›®æ¨™**: åˆªé™¤å·²ç¢ºèªç„¡ runtime ä¾è³´çš„æª”æ¡ˆ

**åˆªé™¤æ¸…å–®**:
1. `archive/legacy/**` - å·²æ­¸æª”ï¼Œä¸å½±éŸ¿ runtime
2. `archive/legacy_question_bank/**` - å·²æ­¸æª”ï¼Œä¸å½±éŸ¿ runtime

**é©—è­‰**:
```bash
npm run build
grep -r "archive/legacy" src || echo "No references"
```

**è©³ç´°è¨ˆç•«**: è¦‹ `_governance/state_snapshot/delete_plan_phase3.txt`

### Phase 4: RUNTIME_SOFT (ä¸­é¢¨éšª)

**ç›®æ¨™**: ç§»é™¤ runtime ä¸­çš„è»Ÿä¾è³´

**ä¿®æ”¹å‰å¿…é ˆå®Œæˆ**:

1. **Dashboard çš„ readingEngine å¼•ç”¨**
   - ç§»é™¤ `import readingEngine`
   - ç§»é™¤æˆ–è¨»è§£ `readingEngine(payload)` èª¿ç”¨
   - ç¢ºèª `readingResult` è³‡æ–™ä¾†æºæ”¹ç‚º `props.data`

2. **App.vue çš„ anchorSelector å‹•æ…‹ import**
   - ç¢ºèª `markCurrentAnchorAsUsed` æ˜¯å¦ä»éœ€è¦
   - å¦‚æœä¸éœ€è¦ï¼Œç§»é™¤å‹•æ…‹ import

3. **Scripts ä¸­çš„ questionBank.v1.json å¼•ç”¨**
   - æª¢æŸ¥æ¯å€‹å¼•ç”¨ script æ˜¯å¦ä»éœ€è¦
   - å¦‚æœä¸éœ€è¦ï¼Œæ¨™è¨˜ç‚º deprecated æˆ–åˆªé™¤

**åˆªé™¤æ¸…å–®**ï¼ˆä¿®æ”¹å®Œæˆå¾Œï¼‰:
- `src/core/flow/readingEngine.v1.js` (å¦‚æœ Dashboard ä¸å†éœ€è¦)

**é©—è­‰**:
```bash
npm run build
npm run dev  # æ‰‹å‹•æ¸¬è©¦å®Œæ•´æµç¨‹
```

**è©³ç´°è¨ˆç•«**: è¦‹ `_governance/state_snapshot/delete_plan_phase4.txt`

---

## E) éœ€è¦äº¤çµ¦ Codex çš„å·¥ä½œåŒ…

### å·¥ä½œåŒ… 1: ç§»é™¤ Dashboard çš„ readingEngine å¼•ç”¨

**ç›®æ¨™**: ç§»é™¤ Dashboard å° stub readingEngine çš„ä¾è³´

**æ”¹å‹•æª”æ¡ˆ**:
- `src/views/05_Dashboard.vue`

**æ”¹å‹•å…§å®¹**:
1. ç§»é™¤ `import readingEngine from '../core/flow/readingEngine.v1.js'` (line 556)
2. ç§»é™¤æˆ–è¨»è§£ `readingResult.value = await readingEngine(payload)` (line 985)
3. ç¢ºèª `readingResult` çš„è³‡æ–™ä¾†æºæ”¹ç‚º `props.data` æˆ–å¾ `props.data` è¡ç”Ÿ
4. ä¿ç•™å…§è¯çš„ `buildReadingOutputV2` å’Œ `extractStateTags` stub

**é©—æ”¶æ¢ä»¶**:
- [ ] `npm run build` é€šé
- [ ] Dashboard é é¢æ­£å¸¸é¡¯ç¤ºï¼ˆä½¿ç”¨ `props.data`ï¼‰
- [ ] æ²’æœ‰ console éŒ¯èª¤
- [ ] Debug JSON é è¦½ä»å¯é¡¯ç¤ºï¼ˆå¦‚æœéœ€è¦çš„è©±ï¼‰

---

### å·¥ä½œåŒ… 2: æ¸…ç† App.vue çš„ anchorSelector å¼•ç”¨

**ç›®æ¨™**: è™•ç† App.vue ä¸­å°ä¸å­˜åœ¨æª”æ¡ˆçš„å‹•æ…‹ import

**æ”¹å‹•æª”æ¡ˆ**:
- `src/App.vue`

**æ”¹å‹•å…§å®¹**:
1. ç¢ºèª `markCurrentAnchorAsUsed` æ˜¯å¦ä»éœ€è¦
2. å¦‚æœä¸éœ€è¦ï¼Œç§»é™¤å‹•æ…‹ import (line 82-84)
3. å¦‚æœéœ€è¦ï¼Œç¢ºèª `anchorSelector.js` çš„ä½ç½®æˆ–é‡æ–°å¯¦ä½œ

**é©—æ”¶æ¢ä»¶**:
- [ ] `npm run build` é€šé
- [ ] App åˆå§‹åŒ–æ­£å¸¸
- [ ] æ²’æœ‰ console éŒ¯èª¤

---

### å·¥ä½œåŒ… 3: æ¸…ç† Scripts ä¸­çš„ questionBank.v1.json å¼•ç”¨

**ç›®æ¨™**: è™•ç† scripts ä¸­å°ä¸å­˜åœ¨æª”æ¡ˆçš„å¼•ç”¨

**æ”¹å‹•æª”æ¡ˆ**:
- `scripts/fixQuestionBankJSON*.mjs` (5 å€‹æª”æ¡ˆ)
- `scripts/doctorPaths.mjs`
- `scripts/fixChoiceMeta.mjs`
- `scripts/auditPatternTags.mjs`
- `scripts/analyticsReport.mjs`
- `scripts/validate/validate-questionbank.mjs`

**æ”¹å‹•å…§å®¹**:
1. æª¢æŸ¥æ¯å€‹ script æ˜¯å¦ä»éœ€è¦ `questionBank.v1.json`
2. å¦‚æœä¸éœ€è¦ï¼Œæ¨™è¨˜ç‚º deprecated æˆ–åˆªé™¤ script
3. å¦‚æœéœ€è¦ï¼Œç¢ºèª `questionBank.v1.json` æ˜¯å¦æ‡‰å­˜åœ¨æˆ–æ”¹ç”¨å…¶ä»–è³‡æ–™æº

**é©—æ”¶æ¢ä»¶**:
- [ ] `npm run validate:all` é€šéï¼ˆå¦‚æœ scripts ä»ä¿ç•™ï¼‰
- [ ] æ²’æœ‰ broken imports

---

### å·¥ä½œåŒ… 4: åˆªé™¤ readingEngine.v1.jsï¼ˆå·¥ä½œåŒ… 1 å®Œæˆå¾Œï¼‰

**ç›®æ¨™**: åˆªé™¤ stub çš„ readingEngine

**æ”¹å‹•æª”æ¡ˆ**:
- `src/core/flow/readingEngine.v1.js` (åˆªé™¤)

**æ”¹å‹•å…§å®¹**:
1. ç¢ºèª Dashboard å·²ä¸å†å¼•ç”¨
2. åˆªé™¤æª”æ¡ˆ

**é©—æ”¶æ¢ä»¶**:
- [ ] `npm run build` é€šé
- [ ] æ²’æœ‰ broken imports

---

## ç¸½çµèˆ‡å»ºè­°

### ç¾æ³ç¸½çµ

1. **å¤§éƒ¨åˆ† legacy å·²æ¸…ç†**ï¼šContentDBã€_deprecatedã€psych/questionBank å·²å¾ src ç§»é™¤
2. **æ ¸å¿ƒ keep é›†åˆç‹€æ…‹è‰¯å¥½**ï¼šround2FourSymbolã€round4Anchorsã€readingNarrative å‡ç‚º ACTIVE
3. **ä¸»è¦å•é¡Œ**ï¼š
   - Dashboard ä»å¼•ç”¨ stub çš„ readingEngineï¼ˆå¯ç§»é™¤ï¼‰
   - Scripts å¼•ç”¨ä¸å­˜åœ¨çš„ questionBank.v1.jsonï¼ˆéœ€ç¢ºèªéœ€æ±‚ï¼‰
   - App.vue å‹•æ…‹ import ä¸å­˜åœ¨çš„ anchorSelector.jsï¼ˆéœ€ç¢ºèªéœ€æ±‚ï¼‰

### å»ºè­°åŸ·è¡Œé †åº

1. **Phase 3**ï¼ˆ0 é¢¨éšªï¼‰ï¼šåˆªé™¤ archive ç›®éŒ„ï¼ˆå¯ç«‹å³åŸ·è¡Œï¼‰
2. **å·¥ä½œåŒ… 1**ï¼šç§»é™¤ Dashboard çš„ readingEngine å¼•ç”¨
3. **å·¥ä½œåŒ… 2**ï¼šæ¸…ç† App.vue çš„ anchorSelector å¼•ç”¨
4. **å·¥ä½œåŒ… 3**ï¼šæ¸…ç† Scripts ä¸­çš„ questionBank.v1.json å¼•ç”¨
5. **å·¥ä½œåŒ… 4**ï¼šåˆªé™¤ readingEngine.v1.js
6. **Phase 4**ï¼šåŸ·è¡Œå‰©é¤˜çš„æ¸…ç†å·¥ä½œ

### é¢¨éšªè©•ä¼°

- **Phase 3**: é¢¨éšª 0ï¼ˆarchive ä¸å½±éŸ¿ runtimeï¼‰
- **å·¥ä½œåŒ… 1-3**: é¢¨éšª ä¸­ï¼ˆéœ€ä¿®æ”¹ runtime æª”æ¡ˆï¼Œä½†å½±éŸ¿ç¯„åœå¯æ§ï¼‰
- **å·¥ä½œåŒ… 4**: é¢¨éšª ä½ï¼ˆå·¥ä½œåŒ… 1 å®Œæˆå¾Œï¼‰

### å›æ»¾ç­–ç•¥

æ‰€æœ‰ä¿®æ”¹å‡å¯é€é git å›æ»¾ï¼š
```bash
git restore <file>
git log --all --full-history -- <file>  # æŸ¥çœ‹æ­·å²
```

---

**å ±å‘Šç”Ÿæˆæ™‚é–“**: 2026-01-01  
**åˆ†æå·¥å…·**: grep, find, git log, node scripts  
**æ©Ÿå™¨å¯è®€æª”ä½ç½®**: `_governance/state_snapshot/`

