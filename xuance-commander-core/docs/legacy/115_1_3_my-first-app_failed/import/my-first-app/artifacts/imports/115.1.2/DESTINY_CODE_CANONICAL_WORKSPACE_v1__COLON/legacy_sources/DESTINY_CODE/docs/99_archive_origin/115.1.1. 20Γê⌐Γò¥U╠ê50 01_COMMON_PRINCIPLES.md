# 基本共同性原則（General Principles）
> 產出時間：2026-01-01

本文件用於「重建工程架構書」與「後續所有施工任務拆分」時的共同規範，避免再次出現資料混亂、題庫版本重疊與引用失控。

## 1. 專案分層與資料責任邊界
以現有封存專案的實際分布來看，建議固定以下責任邊界（未來重建也沿用）：

- `src/views/*`：只處理畫面/流程（01~05...），不放公式  
- `src/core/*`：所有可重用核心：題庫語意、映射、計分、推導、telemetry、安全  
- `docs/*`、`reports/*`：設計白皮書、推導依據、決策紀錄（不參與 runtime）  
- `scripts/*`：開發期驗證/檢查工具（不參與 runtime；若有引用題庫檔，需明確標記「dev-only」）

## 2. 版本策略（避免再次重疊）
- 題庫/映射資料必須有唯一「canonical」來源（例如 `src/core/psych/*` 或 `src/core/ontology/*`）
- 任何衍生版本（試作、備份、舊版）都必須放到明確的 `archive/` 並加註「不被 runtime 引用」
- feature flag（例如 `VITE_USE_QUESTION_BANK`）若保留，就必須對應到可用資料源；若不支援，就要在工程計畫書中明示「deprecate」並移除 UI/流程入口（但不得破壞核心公式）

## 3. 題庫變更管控（白皮書優先）
每次題庫調整必須同時更新：
- 題目設計白皮書（題目命名、母題對應、選項映射、權重與預期效果）
- 題庫資料本體（JSON 或程式化資料）
- 驗證腳本（若有）
- 最小手動驗收清單（Round1-4 + 結果頁）

## 4. 觀測與迭代（你提到的「停留時間統計」）
你已定義：在題目作答過程要統計使用者在題目停留時間，以回饋題庫調整。  
現有封存專案已具備最小實作（見 `src/core/telemetry/choiceMetrics.js`），後續重建需保留相同觀測點與資料結構，避免歷史資料不可比。

## 5. 安全與風險提醒必須可追溯
結果頁與使用流程中出現的警語/提示，視為產品合規的一部分：  
不得在重建時被「美術或流程重寫」不小心刪掉。  
（現有實作線索：`src/views/05_Dashboard.vue` 的 schema 中有警語/免責/使用提醒區塊，以及 `src/core/security/*` 的輸入處理與安全工具。）

---

