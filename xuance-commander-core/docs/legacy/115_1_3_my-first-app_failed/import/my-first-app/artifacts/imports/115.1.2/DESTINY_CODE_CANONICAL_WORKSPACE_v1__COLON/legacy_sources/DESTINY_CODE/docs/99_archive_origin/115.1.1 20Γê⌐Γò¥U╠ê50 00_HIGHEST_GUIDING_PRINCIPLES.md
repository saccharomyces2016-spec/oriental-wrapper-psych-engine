# 最高指導原則（Immutable / No-Touch）
> 產出時間：2026-01-01（由現有檔案庫 + 封存專案解析彙整）

本文件定義「不可變動」的最高層原則，用於後續重建整個專案（從零重建 UI/架構也可），但**必須保留與遵守**：題庫設計理念、計分/權重/加權引擎、Round1-4 的母題結構、姓名學/五行公式、結果頁推導與安全機制。

## 1. 核心價值主軸（不可稀釋）
系統的主軸不是 UI，而是：  
**題庫設計 → 選項映射 → 加權/計分 → 四回合推導 → 結果頁可解釋輸出（含姓名學/五行）**。  
任何重構/重建都要以「不破壞這條鏈」為第一優先。

## 2. 不可動的資料與邏輯範圍（PROTECTED SET）
以下在任何清理/去重/重建中都視為「保護區」，不得刪除、不得改公式邏輯；僅允許（必要時）做**引用路徑收斂**或**import 指向修正**，但不得改結果含意：

- **計分/推導引擎**
  - `src/core/psych/scorer.js`（選擇→訊號/分數/象限化的核心）
  - `src/core/scoring/DestinyScoringEngine.ts`（四回合輸入→命盤代碼組裝）
  - `src/core/ontology/round2FourSymbol.v1.json`
  - `src/core/ontology/round3Ipsative.v2.json`
  - `src/core/ontology/round4IntensityTrigger.v1.json`
- **母題/題庫語意結構（Round1-4 的定義與映射）**
  - `src/core/psych/motherThemes.v1.json`
  - `src/core/psych/questionToTheme.json`
  - `src/core/ontology/*`（所有 round/trait/symbol/mapping 類資料）
- **姓名學 / 五行公式與先驗設定**
  - `docs/metaphysics/ELEMENT_PRIOR_SPEC.md`
  - `docs/metaphysics/NAME_STUDIES.md`
  - （若後續存在對應的程式化計算模組，亦屬保護區）
- **結果頁推導與安全提醒**
  - `src/views/05_Dashboard.vue`（結果輸出組裝、敘事 schema、安全/警語區塊）
  - 安全機制：`src/core/security/safetyKit.js`, `src/core/security/sanitize.js`（與任何同類檔案）
- **行為資料/統計（題目停留時間等）**
  - `src/core/telemetry/choiceMetrics.js`
  - `src/views/03_Resonance.vue`（題目流程與 telemetry 呼叫點）

> 以上清單是依現有封存專案可見檔案建立的「最小不可動集合」。若日後發現有額外引擎/公式檔案，需把它補進 PROTECTED SET。

## 3. 任何刪除或去重必須採「證據先行」
你已明確要求：  
- 不能因為看起來像舊檔就刪  
- 必須有引用鏈證據（runtime 引用 / feature flag / import/fetch/fs read）  
- 必須有完整回滾點（即便 git 不可寫，也要能靠快照回滾）

因此清理流程的先後順序固定為：  
**快照 → 引用鏈盤點 → 指紋/題數/round 覆蓋比較 → dry-run 刪除清單 →（確認後才可能實刪）**

## 4. 你在對話中訂下的重建策略（作為最高層工作法）
- 優先把「題庫設計 + 計分/權重/推導邏輯」抽出成白皮書/工程架構書（MD）  
- UI/介面暫時可以全部捨棄或重寫  
- 後續重建採「先把總計畫書想清楚再動工」，不再邊寫邊想  
- 開發分工（概念上）：
  - 你：方向/產品主軸/決策
  - Gemini：想法、風格探索、參考方向、創意發散
  - 我（GPT）：監督者、規格控管、工程計畫書、指令包、風險控管
  - Codex/Cursor：實作代碼（依指令包落地）

---

