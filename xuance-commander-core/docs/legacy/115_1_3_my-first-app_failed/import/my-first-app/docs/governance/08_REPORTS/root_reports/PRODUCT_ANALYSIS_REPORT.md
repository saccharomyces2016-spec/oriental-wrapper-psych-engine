# 產品深度分析報告

**分析角色**：資深產品策略顧問 + 資深前端架構師  
**分析依據**：純粹從原始碼結構、命名、流程、互動設計與資料流判斷  
**分析日期**：2024

---

## ① 這是什麼樣的產品（實際定位）

### 核心本質
這是一個**「命理心理測驗混合系統」**，不是純命理工具，也不是純心理測驗，而是把兩者融合成一個「儀式化問答流程」。

### 實際運作方式
1. **輸入層**：使用者輸入生辰八字（年、月、日、時）和姓名
2. **選擇層**：四回合互動選擇
   - Round 1：選領域（財、情、業、家、身、心等 6-8 個）
   - Round 2：選「此刻狀態」（12 個情境題，如「身體換季時你更像哪種？」）
   - Round 3：選「細象」（從題庫或舊流程選 2-3 個主題）
   - Round 4：選「錨點」（2 個固定語句）
3. **計算層**：把選擇轉成「五行向量」（木火土金水）和「軸向量」（動靜、冷熱、邊界等），再映射到「母題」（如「長期耗竭」「主控感流失」等 8 個心理模式）
4. **輸出層**：生成「批命文字」「斷語」「解決建議」「連鎖預測」等結構化報告

### 技術架構特徵
- **雙軌並行**：
  - 新題庫系統（`questionBank.v1.json`）：透過 `VITE_USE_QUESTION_BANK=true` 啟用，顯示 6 題隨機題目
  - 舊流程（`ContentDB_*.js`）：Round 1-4 的「星塵節點」選擇，每個選擇帶 `weights` 累積向量
  - 兩者最終都轉成 `userChoices` 陣列，但格式不同（新題庫有 `pattern_tags`、`behavior_facet`，舊流程有 `weights`）
- **多層計分鏈**：
  1. `scorePsychometrics`：從 `userChoices` 累積 `traits`、`axes`、`elements` 向量
  2. `mapToMotherThemes`：把 Round 2/3 的標籤映射到母題（如「stability」→「fear_based_stability」）
  3. `scoreDomains`：把五行向量映射到 8 大領域機率（用 dot product 計算）
  4. `buildGuidance`：從母題生成「解決建議」和「連鎖預測」（優先 `byTheme`，沒有才回退 `byDomain`）
  5. `generateAiNarrative`：用 AI 生成「批命文字」（失敗才用 `generateLocalNarrative`）
- **緩存機制**：`ORACLE_CACHE` 用 Map 存 `{birth, resonance}` 的組合結果，避免重複計算
- **Fallback 設計**：AI 生成失敗會回退到本地模板，確保使用者永遠能看到結果
- **資料流追蹤**：`readingEngine.v1.js` 獨立處理 Round 1-4 的計分（但與主流程不同步，目前是 debug 用）

### 隱含世界觀
**「你的選擇會累積成向量，向量會映射到心理模式，心理模式會生成命理式解讀」**。這不是科學驗證，而是**「儀式化自我探索工具」**，用傳統命理的外殼包裝現代心理學的內核。

### 使用者角色判斷
從程式碼的命名和流程設計推斷：
- **主要受眾**：熟悉中文命理文化、願意花 10-15 分鐘完成「儀式」的使用者
- **使用情境**：不是「快速測驗」，而是「深度探索」— 使用者需要輸入生辰、完成 4 回合選擇、等待推演、閱讀長篇報告
- **心理狀態**：使用者可能處於「人生卡關」「想理解自己」「尋求方向」的狀態，願意接受「命理式包裝」的心理分析

---

## ② 目前 UI/UX 與文字風格給人的第一印象

### 視覺風格
- **深色背景**（`#05060a`, `#0f1012`）+ **金色/米色文字**（`rgba(255,220,170,0.92)`）
- **毛玻璃效果**（`backdrop-filter: blur(12px)`）+ **半透明邊框**
- **字體**：`Noto Serif TC`（標題）+ `Ma Shan Zheng`（按鈕文字，毛筆感）
- **動畫**：緩慢旋轉的符印、星塵背景、漸變過渡

**第一眼感覺**：像「數位化的命理館」，有儀式感，但略顯沉重。

### 文字風格
- **高度文言化**：「汝之座標正與歲月重疊」「撥開煙雲，窺見那抹被塵世遮蔽的本原」
- **術語密集**：「五行鏡」「氣機分布」「暗線提示」「路徑回聲」「批命」「斷語」
- **按鈕用詞**：「結印」「定象」「合參」「另起一局」
- **錯誤訊息**：「天機混沌，請稍後再試」

**第一印象**：**「這是一個給中文使用者、熟悉命理文化的人用的產品」**。對不熟悉命理的人來說，門檻很高。

### 互動設計
- **線性流程**：5 個階段（Origin → Input → Resonance → Computation → Dashboard），不能跳過
- **選擇方式**：Round 2/3 是「星塵宇宙中的節點」，點擊後標記「已定」
- **進度提示**：底部有「能量條」和狀態文字（如「共振中：2/4」）
- **無返回鍵**：除了左上角「返回」，沒有明確的「上一步」提示

**體驗感受**：**「像在進行一場儀式，每一步都有儀式感，但操作成本高」**。

---

## ③ 最有價值且不可破壞的核心特色

### 1. **「向量累積 → 模式映射」的計分邏輯**
這是整個產品的**核心演算法**，不能動：
- 使用者的選擇會累積成 `elementVector`（五行）和 `axisVector`（動靜/冷熱等）
- 這些向量會透過 `scoreDomains` 映射到 8 大領域的機率
- 再透過 `mapToMotherThemes` 映射到 8 個心理母題
- 最後用 `buildGuidance` 生成建議

**為什麼不可破壞**：這是產品差異化的核心，其他心理測驗沒有這種「命理式向量計算」。

### 2. **「儀式化流程」的沉浸感**
5 階段流程 + 文言文字 + 深色視覺 + 緩慢動畫，營造出「進行儀式」的感覺。

**為什麼不可破壞**：這是情感連結的關鍵，使用者不是來「做測驗」，而是來「探索命盤」。

### 3. **「雙語並行但中文優先」的內容架構**
- 所有 JSON 都有 `_zh` 和 `_en` 欄位，但**中文是主要語言**
- 題目、選項、結果都是中文優先，英文是「備註」

**為什麼不可破壞**：這是產品定位的基礎，它服務的是「熟悉中文命理文化」的使用者。

### 4. **「AI + 規則」的混合生成**
- 核心計分用規則（`scorer.js`, `domainScoring.js`）
- 文字生成用 AI（`generateAiNarrative`），失敗才用本地模板

**為什麼不可破壞**：這讓產品既有「可解釋性」（規則計分），又有「個性化」（AI 文字）。

---

## ④ 會限制它走向國際水準的關鍵問題

### 問題 1：**資料結構不一致，導致維護成本高**
- `round2Situations.v1.json` 用 `questions[]` + `situation_id` + `options[]`（選項只有 `key` 和 `text_zh`/`text_en`），但 `readingEngine.v1.js` 期望 `items[]` + `id` + `choice_meta[]`（每個選項要有 `choice` 和 `signal_key`）
- `round4Anchors.v1.json` 有正確的 `items[]` + `choice_meta`，但 Round 2 沒有
- 這導致 Round 2 的 `signal_key` 映射會失敗（因為找不到 `choice_meta`），`scoreRound2` 函數會跳過這些答案
- 更嚴重的是：`05_Dashboard.vue` 有複雜的 `normalizeRound2` 函數試圖修復這個問題，但這是「補丁」，不是根本解決

**影響**：**程式碼會報錯，功能不完整**。這是技術債，必須修。而且因為有「補丁」，問題被掩蓋了，但實際上 Round 2 的 `signal_key` 計分可能完全失效。

### 問題 2：**命名風格混亂，降低可維護性**
- 有些用英文（`elementVector`, `axisVector`, `scorePsychometrics`）
- 有些用中文拼音（`ink-font`, `brush-font`）
- 有些用混合（`round2Situations`, `motherThemes`）
- 變數名有時用英文（`currentPhase`, `destinyData`），有時用中文概念（`birthData`, `resonanceData`）

**影響**：**新開發者難以理解，國際化時翻譯成本高**。

### 問題 3：**UI 文字完全硬編碼，無法國際化**
- 所有按鈕、標題、提示文字都寫死在 Vue 模板裡（如「探索因緣」「結印」「定象」）
- 沒有 i18n 系統，沒有文字資源檔
- 即使 JSON 有 `_en` 欄位，UI 層面完全用不到

**影響**：**要做英文版，必須重寫所有 Vue 檔案**。

### 問題 4：**「儀式化文字」的文化門檻太高**
- 「汝之座標正與歲月重疊」這種文字，對非中文使用者來說是「看不懂的詩」
- 即使翻譯成英文，也會失去「儀式感」
- 命理術語（「五行」「氣機」「批命」）在英文文化中沒有對應概念

**影響**：**產品無法直接移植到其他文化**。

### 問題 5：**技術架構缺乏抽象層**
- `SoulArchitect.js` 直接耦合了「生辰」「共振」「命盤」等概念
- 沒有「領域模型」抽象，所有邏輯都寫死在函數裡
- 如果要改成「不問生辰，只問心理狀態」的模式，必須重寫核心邏輯
- **雙軌系統的資料格式不一致**：新題庫的 `userChoices` 有 `pattern_tags`、`behavior_facet`，舊流程的 `userChoices` 有 `weights`，但 `scorePsychometrics` 要同時處理兩種格式（用 `if (uc?.weights)` 判斷）

**影響**：**產品擴展性差，無法快速迭代新功能**。而且因為雙軌並行，維護成本是兩倍。

### 問題 6：**視覺風格過於「命理館」，限制受眾**
- 深色 + 金色 + 毛筆字體，給人「傳統命理」的印象
- 對「不相信命理但想探索自我」的使用者來說，視覺風格是障礙

**影響**：**產品只能服務「接受命理文化」的使用者，市場受限**。

### 問題 7：**「星塵節點」互動設計的可用性問題**
- Round 2/3 的選擇方式是「星塵宇宙中的節點」，點擊後標記「已定」
- 但從程式碼看，節點的位置是隨機分佈的（`distributeStars` 函數），而且會根據視窗大小重新計算
- 這導致：使用者可能找不到想要的選項、點擊後沒有明確反饋、無法快速掃描所有選項

**影響**：**操作成本高，使用者可能因為「找不到選項」而放棄**。

---

## ⑤ 如果要做一次「整體 UI/體驗重構」的方向建議

### 方向選擇：**「Headspace + Calm」的現代冥想風格 + 「16personalities」的測驗流程**

### 理由分析

#### 為什麼不選「Apple 極簡風格」？
- Apple 風格太「冷」，缺乏情感連結
- 這個產品需要「儀式感」，但不需要「科技感」

#### 為什麼不選「Notion / Linear 的生產力工具風格」？
- 生產力工具強調「效率」，但這個產品強調「探索」
- 使用者不是來「完成任務」，而是來「理解自己」

#### 為什麼選「Headspace + Calm + 16personalities」？
1. **Headspace/Calm 的視覺語言**：
   - 柔和的漸變色（不是深黑，而是深藍/深紫 + 暖色點綴）
   - 簡約的插畫風格（不是符印，而是抽象圖形）
   - 舒緩的動畫（不是旋轉，而是呼吸般的緩慢變化）
   - **保留「儀式感」，但用「現代冥想」的語言表達**

2. **16personalities 的流程設計**：
   - 清晰的進度指示（「第 3 題，共 12 題」）
   - 每題都有「為什麼問這個」的說明
   - 結果頁面有「視覺化圖表」+「文字解讀」+「行動建議」
   - **保留「探索感」，但用「心理測驗」的流程表達**

### 具體方向建議

#### 視覺層面
- **色彩**：從「深黑 + 金色」改為「深藍/深紫 + 暖橙/粉紅」的漸變
- **字體**：保留 `Noto Serif TC` 做標題，但按鈕用無襯線字體（如 `Inter` 或 `SF Pro`）
- **動畫**：從「旋轉符印」改為「呼吸般的縮放」或「粒子流動」
- **背景**：從「星塵」改為「抽象漸變」或「微妙的幾何圖形」

#### 文字層面
- **保留「儀式感」，但降低「文言門檻」**
  - 「汝之座標正與歲月重疊」→「你的選擇正在累積成獨特的模式」
  - 「結印」→「開始探索」
  - 「定象」→「確認選擇」
  - 「批命」→「深度解讀」
- **術語保留，但加解釋**
  - 「五行鏡」→「五行鏡（你的能量分布）」
  - 「母題命中」→「核心模式（你反覆卡住的底層劇本）」

#### 互動層面
- **保留線性流程，但加「可返回」提示**
  - 每個階段都有「上一步」按鈕
  - 進度條顯示「第 2 階段，共 5 階段」
- **選擇方式從「星塵節點」改為「卡片式選擇」**
  - 保留「點擊後標記」的互動，但用更現代的視覺（如卡片高亮）
- **結果頁面從「長文滾動」改為「分段式展示」**
  - 每個區塊（母題、五行、建議）都是獨立的「卡片」
  - 可以「展開/收起」，降低資訊過載

#### 技術層面（不寫程式，只給方向）
- **建立 i18n 系統**：所有 UI 文字都從資源檔讀取
- **統一資料結構**：Round 2/3/4 都用相同的 `items[]` + `choice_meta` 格式
- **抽象領域模型**：把「生辰」「選擇」「計分」抽象成獨立的 Domain Model
- **分離「儀式感」與「功能邏輯」**：視覺層可以切換「傳統命理風格」或「現代冥想風格」，但核心邏輯不變

### 最終目標
**「保留核心演算法和儀式感，但用現代、國際化的視覺語言重新包裝」**。讓產品既能服務「熟悉命理文化」的使用者，也能吸引「想探索自我但不相信命理」的使用者。

---

## 總結

這個產品目前是**「命理心理測驗混合系統」**，有獨特的「向量累積 → 模式映射」演算法和強烈的「儀式化沉浸感」，但受困於：
1. 技術債（資料結構不一致）
2. 文化門檻（文言文字、命理術語）
3. 國際化障礙（硬編碼文字、缺乏抽象層）

如果要重構，建議朝向**「Headspace + Calm + 16personalities」的混合風格**：保留儀式感和核心演算法，但用現代、國際化的視覺語言重新表達。

---

**報告結束**

