# 專案角色與工作模式說明（補充建議版）

## 一、專案總覽

本專案為一套「命理語彙包裝的心理計量系統」，核心價值不在於命理本身，
而在於「向量累積 → 心理母題映射 → 可解釋的分析與建議」。

因此，本專案採用「人類決策 × AI 協作 × 工程分層」的工作模式。

---

## 二、角色分工總覽（不可混淆）

### 1. 人類（Product Owner / 世界觀設計者）

**責任範圍：**
- 產品方向與存在理由
- 世界觀與命理語彙定調
- 美術風格與視覺情緒的最終裁決
- 命理語感是否成立
- 品牌調性與市場定位（唯一決策者）

**不應交由 AI 的事項：**
- 價值選擇
- 文化判斷
- 商業風險承擔

**✅ 補充建議：**
- **資料驗證權**：所有 JSON 資料（題庫、母題、指引）的最終審核權
- **計分邏輯確認**：當 ChatGPT 提出新的計分公式時，必須由人類確認「這符合產品世界觀嗎？」
- **邊界案例處理**：當 AI 遇到「不知道怎麼處理」的情況時，必須回報給人類，不能自行決定

---

### 2. ChatGPT（System Architect / 技術監督者）

**責任範圍：**
- 系統架構一致性
- 資料結構與計分邏輯設計
- 演算法可解釋性
- 技術決策風險評估
- 將模糊想法轉換為可執行規格

**角色定位：**
- 不產出大量程式碼
- 不主導創意與美術
- 負責「這套系統會不會壞、能不能長期演進」

**✅ 補充建議：**
- **資料結構審查**：每次新增 JSON 檔案時，ChatGPT 必須檢查「是否與現有結構一致？」
- **計分邏輯文檔化**：所有計分公式必須寫成可讀的註解，不能只有程式碼
- **跨檔案一致性檢查**：當 Cursor 修改檔案時，ChatGPT 要檢查「是否影響其他檔案？」
- **技術債追蹤**：定期檢視 `PROJECT_ISSUES_FOR_AI.md`，評估哪些問題必須優先處理

**⚠️ 重要限制：**
- 不能直接修改程式碼（那是 Cursor 的工作）
- 不能決定「這個功能要不要做」（那是 Product Owner 的工作）
- 只能「建議」和「警告」，不能「執行」

---

### 3. Codex / Cursor（Execution Engine）

**責任範圍：**
- 實際程式碼撰寫
- 重構、補齊、修改檔案
- 依指令執行，不做產品判斷

**限制：**
- 不理解產品全貌
- 不負責設計決策
- 不做價值判斷

**✅ 補充建議：**
- **指令明確性要求**：如果指令不清楚，Cursor 應該「詢問」而不是「猜測」
- **修改前確認**：修改核心計分邏輯前，必須先說明「會影響哪些檔案」
- **測試覆蓋**：每次修改後，Cursor 應該檢查「是否有相關的測試需要更新？」
- **命名一致性**：遵循 ChatGPT 制定的命名規範（如果有的話）

**⚠️ 重要限制：**
- 不能「優化」程式碼（除非明確要求）
- 不能「重構」架構（那是 ChatGPT 的工作）
- 不能「新增功能」（那是 Product Owner 的決策）

---

### 4. Gemini（Creative & Research Sidecar）

**責任範圍：**
- 美術風格提案
- 命理文字風格探索
- 語感、敘事、靈感發散
- 市場與使用者角度的補充觀點

**限制：**
- 不做架構決策
- 不碰核心計分邏輯
- 不負責跨檔案一致性

**✅ 補充建議：**
- **文字風格庫**：建立「命理語彙風格庫」，讓 Gemini 參考（避免偏離調性）
- **文化敏感度檢查**：當 Gemini 提出文字建議時，必須標註「這是否符合中文命理文化？」
- **A/B 測試提案**：可以提出多個風格選項，但最終選擇權在 Product Owner
- **市場研究補充**：可以研究「類似產品怎麼做」，但結論要由 Product Owner 判斷

**⚠️ 重要限制：**
- 不能決定「這個風格好不好」（那是 Product Owner 的決策）
- 不能修改程式碼（那是 Cursor 的工作）
- 不能設計資料結構（那是 ChatGPT 的工作）

---

## 三、協作原則（強制遵守）

1. **所有核心邏輯必須可解釋**
   - ✅ 計分公式要有註解說明「為什麼這樣算」
   - ✅ 母題映射要有規則文檔（如 `SIGNAL_THEME_MAP`）
   - ❌ 不能有「黑盒」邏輯（AI 生成的計分公式必須可追溯）

2. **AI 文字生成不得成為結論來源**
   - ✅ AI 生成的「批命文字」只是「輸出」，不是「決策依據」
   - ✅ 所有「建議」都來自規則引擎（`buildGuidance`），不是 AI 自由發揮
   - ❌ 不能讓 AI 決定「這個使用者應該做什麼」

3. **決策權永遠在 Product Owner**
   - ✅ 所有「要不要做」的決策都由人類決定
   - ✅ AI 只能「建議」和「警告」，不能「決定」
   - ❌ 不能讓 AI 自行決定「這個功能很重要，我來做」

4. **技術監督與創意探索不得混用同一角色**
   - ✅ ChatGPT 負責技術，Gemini 負責創意
   - ✅ 如果 ChatGPT 提出創意建議，要標註「這是創意建議，請 Gemini 評估」
   - ❌ 不能讓 ChatGPT 同時做架構設計和文字風格設計

5. **執行單位（Codex）只接受明確指令**
   - ✅ 指令必須包含「要改什麼檔案」「要改成什麼樣子」
   - ✅ 如果指令不清楚，Cursor 應該「詢問」而不是「猜測」
   - ❌ 不能給 Cursor 模糊指令（如「優化一下」）

---

## 四、這套分工的目的

- 降低錯誤擴散
- 保留創造彈性
- 確保系統可長期維護
- 避免 AI「看起來很會，但實際亂跑」

**✅ 補充：實際運作時的檢查點**

### 當 Product Owner 提出需求時：
1. **ChatGPT 先評估**：「這個需求會影響哪些檔案？技術風險是什麼？」
2. **Gemini 補充觀點**：「這個需求對使用者體驗的影響是什麼？」
3. **Product Owner 決策**：「要不要做？優先級是什麼？」
4. **ChatGPT 寫規格**：「具體要改哪些檔案？改成什麼樣子？」
5. **Cursor 執行**：「依規格修改程式碼」

### 當發現 Bug 時：
1. **Cursor 先定位**：「這個 Bug 在哪個檔案？是什麼原因？」
2. **ChatGPT 評估影響**：「這個 Bug 會影響哪些功能？修復風險是什麼？」
3. **Product Owner 決定**：「要不要立即修復？還是先記錄？」
4. **Cursor 修復**：「依 ChatGPT 的修復方案執行」

### 當要新增功能時：
1. **Product Owner 提出**：「我想要新增 XXX 功能」
2. **ChatGPT 設計架構**：「這個功能需要改哪些檔案？資料結構要怎麼設計？」
3. **Gemini 補充體驗**：「這個功能對使用者體驗的影響是什麼？文字要怎麼表達？」
4. **Product Owner 確認**：「這個設計符合產品定位嗎？」
5. **Cursor 實作**：「依設計規格實作」

---

## 五、實際運作建議（基於專案現況）

### 1. 立即需要 ChatGPT 處理的事項

**高優先級：**
- ✅ **修復 Round 2 資料結構不一致問題**
  - 問題：`round2Situations.v1.json` 缺少 `choice_meta`，導致 `signal_key` 無法映射
  - ChatGPT 應該：設計統一的資料結構格式，寫出「遷移方案」
  - Cursor 執行：依方案修改 JSON 檔案和 `readingEngine.v1.js`

- ✅ **建立 i18n 系統架構**
  - 問題：UI 文字完全硬編碼，無法國際化
  - ChatGPT 應該：設計 i18n 系統架構（檔案結構、載入方式、使用方式）
  - Cursor 執行：實作 i18n 系統，把所有 UI 文字抽到資源檔

**中優先級：**
- ✅ **統一雙軌系統的資料格式**
  - 問題：新題庫和舊流程的 `userChoices` 格式不同
  - ChatGPT 應該：設計統一格式，或設計轉換層
  - Cursor 執行：實作統一格式或轉換層

### 2. 立即需要 Gemini 處理的事項

- ✅ **建立「命理語彙風格庫」**
  - 目的：讓 Gemini 在生成文字時有參考基準
  - 內容：收集現有的「好文字」和「壞文字」範例
  - 產出：一份「風格指南」文檔

- ✅ **評估「星塵節點」互動設計的可用性**
  - 問題：使用者可能找不到想要的選項
  - Gemini 應該：研究類似產品的互動設計，提出改進建議
  - Product Owner 決策：要不要改？改成什麼樣子？

### 3. 需要 Product Owner 決策的事項

- ✅ **決定「要不要修復 Round 2 資料結構問題」**
  - 影響：這是技術債，不修會導致功能不完整
  - 建議：**立即修復**（高優先級）

- ✅ **決定「要不要建立 i18n 系統」**
  - 影響：如果要國際化，這是必須的
  - 建議：**如果要國際化，立即建立**（高優先級）

- ✅ **決定「要不要統一雙軌系統」**
  - 影響：降低維護成本，但需要時間
  - 建議：**中期處理**（中優先級）

---

## 六、常見錯誤與防範

### ❌ 錯誤 1：讓 ChatGPT 直接寫程式碼
**問題**：ChatGPT 應該只負責「設計」，不應該直接寫程式碼
**正確做法**：ChatGPT 寫規格 → Cursor 實作

### ❌ 錯誤 2：讓 Gemini 設計資料結構
**問題**：Gemini 不理解技術架構，可能設計出不一致的結構
**正確做法**：Gemini 提出需求 → ChatGPT 設計結構 → Cursor 實作

### ❌ 錯誤 3：讓 Cursor 自行決定「優化」
**問題**：Cursor 可能「優化」掉重要的邏輯
**正確做法**：明確告訴 Cursor「要優化什麼」「為什麼要優化」

### ❌ 錯誤 4：讓 AI 決定「這個功能要不要做」
**問題**：這是 Product Owner 的決策權
**正確做法**：AI 只能「建議」，不能「決定」

---

## 七、工作流程範例

### 範例 1：修復 Round 2 資料結構問題

**步驟 1：Product Owner 提出需求**
> 「Round 2 的 signal_key 無法映射，需要修復」

**步驟 2：ChatGPT 分析問題**
> 「問題在於 `round2Situations.v1.json` 缺少 `choice_meta` 欄位。建議統一 Round 2/3/4 的資料結構，都使用 `items[]` + `choice_meta[]` 格式。這是遷移方案：[詳細方案]」

**步驟 3：Product Owner 確認**
> 「這個方案可行，請執行」

**步驟 4：Cursor 執行**
> 「依方案修改 `round2Situations.v1.json` 和 `readingEngine.v1.js`」

**步驟 5：ChatGPT 驗證**
> 「檢查修改後的檔案，確認結構一致」

---

### 範例 2：新增一個新的母題

**步驟 1：Product Owner 提出需求**
> 「我想要新增一個母題：『完美主義陷阱』」

**步驟 2：ChatGPT 設計資料結構**
> 「需要在 `motherThemes.v1.json` 新增一個 item，id 為 `perfectionism_trap`。同時需要在 `patternToThemeMap.v1.js` 新增映射規則。這是詳細規格：[規格]」

**步驟 3：Gemini 補充文字**
> 「這個母題的中文標籤建議用『完美主義陷阱』，英文標籤用 `Perfectionism Trap`。描述文字建議：[文字]」

**步驟 4：Product Owner 確認**
> 「文字可以，請執行」

**步驟 5：Cursor 實作**
> 「依規格新增母題到 JSON 檔案」

---

## 八、總結

這套分工模式的**核心價值**：
1. **降低錯誤擴散**：每個角色只負責自己擅長的部分
2. **保留創造彈性**：Product Owner 有最終決策權
3. **確保系統可長期維護**：ChatGPT 負責架構一致性
4. **避免 AI「看起來很會，但實際亂跑」**：明確限制每個角色的權限

**最重要的原則**：
> **「AI 只能建議，不能決定。決策權永遠在 Product Owner。」**

---

**最後更新**：2024
