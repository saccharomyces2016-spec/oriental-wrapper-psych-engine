# NEW-TP2：符碼映射邏輯任務包

**任務包編號**：NEW-TP2  
**建立日期**：2026-01-14  
**優先級**：🔴 P0 - CRITICAL  
**預估時間**：5-7 天  
**依賴**：NEW-TP1 完成後執行

---

## 🎯 任務目標

設計「符碼映射」邏輯，實現從「困、擾、艱」等符碼自動映射到八卦的算法。

---

## 📋 核心設計原則

### 符碼映射原理

**使用者看到的**：
```
【起心動念】
請選擇最能描述你當下感受的字：

困  擾  艱  滯  燃  散  衝  穩
```

**系統運作（隱性）**：
```python
symbol_to_bagua = {
    "困": {"bagua": "Kan", "severity": 0.7, "rigidity": "Locked"},
    "擾": {"bagua": "Xun", "severity": 0.6, "rigidity": "Fluid"},
    "艱": {"bagua": "Gen", "severity": 0.7, "rigidity": "Locked"}
}
```

---

## 📦 交付物清單（10 個檔案）

1. `SYMBOL_TO_BAGUA_MAPPING.json` - 符碼到八卦的完整映射表（50 個符碼）
2. `BAGUA_GATE_DESIGN.md` - 八門遁甲的 UI 設計規格
3. `SYMBOL_CALCULATION_ALGORITHM.py` - 符碼計算演算法（Python 實作）
4. `SYMBOL_COMBINATION_LOGIC.md` - 符碼組合邏輯（如果選多個符碼）
5. `ATTRIBUTION_DETECTION_SPEC.md` - 歸因模式檢測規格
6. `SEVERITY_WEIGHTING_SYSTEM.md` - Severity 加權系統
7. `SYMBOL_DISPLAY_ANIMATION.md` - 辭象浮現動畫規格
8. `TEST_CASES_VALIDATION.md` - 測試用例與驗證標準
9. `EDGE_CASE_HANDLING.md` - 邊界情況處理（如使用者不選）
10. `API_SPECIFICATION.md` - API 規格（前端如何呼叫）

---

**任務包狀態**：✅ 架構完成，等待執行
