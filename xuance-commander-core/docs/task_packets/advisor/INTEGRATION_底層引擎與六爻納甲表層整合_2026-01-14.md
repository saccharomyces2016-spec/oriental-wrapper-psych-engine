# 底層引擎與六爻納甲表層整合任務包

**建立日期**：2026-01-14  
**任務類型**：系統整合（Engine + UI）  
**優先級**：🔴 **CRITICAL**  
**預估時間**：14-21 天

---

## 🎯 任務目標

### 核心訴求

**表層體驗**：完全的六爻納甲算命  
**底層引擎**：精密的現代科學診斷  
**終極效果**：使用者感覺是六爻納甲算命，但實際上被現代科學精準診斷

### 用戶期待

> 「使用者看到的畫面會覺得這就是正統的六爻納甲元素和運算過程、互動過程，完全感知不到底層其實完美對應我們既有的現代科學引擎，以至於他們算完還是被現代科學算得很準，卻會覺得這些都是六爻納甲的神蹟。」

---

## 📊 任務分解

本任務包分為 **3 個子任務包**（共 30 個檔案，每包不超過 10 個檔案）

### 📦 子任務包 1：底層引擎完整性報告（10 個檔案）
- **目的**：確認底層引擎是否完整，廣度深度是否足夠
- **交付物**：底層引擎完整性檢查報告 + 補充建議

### 📦 子任務包 2：六爻納甲流程對應分析（10 個檔案）
- **目的**：分析正統六爻納甲流程，對應到現代引擎
- **交付物**：六爻納甲流程對應表 + 整合方案

### 📦 子任務包 3：符碼投射UI設計（10 個檔案）
- **目的**：設計玄學感的前端互動（不是ABC四選一）
- **交付物**：符碼投射UI設計 + 實作規格

---

## 🎯 關鍵概念解釋

### 1. 底層引擎（現代科學）

**當前狀態**：
- ✅ V3 引擎完整運作
- ✅ 4-Stage Funnel（八卦分流 → Facet 診斷 → 計算 → 結果）
- ✅ Layer 1（診斷）+ Layer 2（解決方案）
- ⚠️ 23 個 Facet（需補充至 30 個）

**運算流程**：
```
Stage 1：八卦領域選擇（1 題）
  ↓
Stage 2：Facet 診斷（8 題 OCTET_8）
  ↓
Stage 3：V3 引擎計算
  ↓
Stage 4：結果呈現（64 卦敘事 + 解法 + 風險）
```

---

### 2. 六爻納甲（傳統玄學）

**傳統流程**：
```
起卦方式（擲筊、數位化）
  ↓
得到八卦組合（本卦）
  ↓
確認六親類別（想問什麼：感情、事業、健康等）
  ↓
分析萬象納甲（五行、六親、世應、動爻）
  ↓
給出解讀（吉凶、建議）
```

**六親物象（六親）**：
- 印（Authority）：長輩、導師、規則
- 官（Power）：壓力、責任、權威
- 財（Resource）：資源、金錢、機會
- 比（Peer）：同儕、競爭、合作
- 食（Output）：創造、表達、產出

**萬象納甲**：
- 五行生剋（木火土金水）
- 六十四卦象
- 動爻變化
- 世應關係

---

### 3. 符碼投射（Symbolic Projection）

**概念**：
不是直接問「你焦慮嗎？（0-4 分）」，而是用**符號、情境、隱喻**讓使用者投射。

**範例**：

**傳統心理學方式**：
```
Q: 你最近是否經常感到焦慮？
A: [ ] 從不  [ ] 偶爾  [ ] 經常  [ ] 總是
```

**符碼投射方式**：
```
【情境】：你走在一條狹窄的山路上，前方有三條岔路。
你會選擇？

A. 最寬敞但霧氣瀰漫的路（不確定但安全）
B. 狹窄但清晰可見的路（確定但受限）
C. 隱藏的小徑，需要撥開草叢（未知但自由）

→ 底層引擎會根據選擇判斷：
  A = 逃避型應對（avoidance_coping）
  B = 過度控制（hyper_responsibility）
  C = 探索性（healthy agency）
```

---

## 📋 子任務包清單

---

## 📦 子任務包 1：底層引擎完整性報告

**任務包編號**：INTEGRATION-1  
**檔案數量**：10 個檔案  
**預估時間**：5-7 天

### 背景說明

在整合表層之前，必須先確認底層引擎是否完整。顧問團隊需要知道：
1. 當前引擎有哪些模組？每個模組的功能是什麼？
2. 題目的廣度（涵蓋多少困擾）和深度（每個困擾的題目數量）是否足夠？
3. 計算標準是什麼？如何確保準確性？
4. 解決方案是否完整？風險預測是否到位？
5. 如果不足，需要補充哪些內容？

### 交付物清單

#### 檔案 1：`ENGINE_COMPREHENSIVE_STATUS_REPORT.md`
**內容**：底層引擎完整狀態報告
- 當前架構總覽（V3 引擎、Layer 1、Layer 2）
- 模組完成度（4-Stage Funnel、Safety Circuit、Data Handshake）
- 內容完成度（Facet、Questions、Hexagram、Wuxing、Riskchain）

#### 檔案 2：`FACET_COVERAGE_ANALYSIS.md`
**內容**：Facet 覆蓋度分析
- 當前 23 個 Facet 清單
- 八卦領域分佈（每個八卦有哪些 Facet）
- 困擾類型涵蓋度（是否涵蓋全人類、全年齡、全困擾）
- 缺口分析（哪些困擾尚未涵蓋）

#### 檔案 3：`QUESTION_DEPTH_BREADTH_REPORT.md`
**內容**：題目深度與廣度分析
- 題目總數（當前 240 題）
- 每個 Facet 的題目數量（OCTET_8 = 8 題）
- 題目區辨力分析（能否有效區分不同嚴重程度）
- 建議補充方向

#### 檔案 4：`CALCULATION_STANDARD_SPECIFICATION.md`
**內容**：計算標準規格
- V3 引擎計算邏輯（Severity、Rigidity、Agency）
- 加權計算方式（Core 40%、Reaction 30%、Behavior 20%、Agency 10%）
- 閾值定義（Fluid、Locked、Critical）
- Safety Mode 判定（L1-L4）

#### 檔案 5：`SOLUTION_COMPLETENESS_AUDIT.md`
**內容**：解決方案完整性審核
- 64 卦敘事完成度（100%）
- 五行活動完成度（45 個）
- 動態敘事組合（Context 插入）
- 風險預測（短鏈 + 長鏈）

#### 檔案 6：`RISKCHAIN_LOGIC_VERIFICATION.md`
**內容**：風險鏈邏輯驗證
- 短鏈邏輯（2-3 stage）
- 長鏈邏輯（4 stage，L4 專屬）
- 預防建議合理性
- 連鎖反應真實性

#### 檔案 7：`ENGINE_ACCURACY_VALIDATION.md`
**內容**：引擎準確度驗證
- V3 引擎精準度評估
- OCTET_8 題目有效性
- 區辨度測試（能否區分中度 vs 高度）
- 兩個真實案例驗證（0.61 vs 0.99）

#### 檔案 8：`CONTENT_GAP_ANALYSIS.md`
**內容**：內容缺口分析
- 當前不足之處（Facet、Questions、Activities）
- 優先補充項目（7 個 Facet）
- 次要補充項目（P2 系列）
- 補充時間估算

#### 檔案 9：`ENGINE_READINESS_SCORECARD.md`
**內容**：引擎準備度評分卡
- 架構完整度（0-100%）
- 內容完整度（0-100%）
- 玄學正統性（0-100%）
- 診斷準確度（0-100%）
- 上線準備度（0-100%）

#### 檔案 10：`SUPPLEMENTARY_TASK_RECOMMENDATIONS.md`
**內容**：補充任務建議
- 如果引擎不足，需要補充哪些內容？
- 每個補充項目的優先級（P0、P1、P2）
- 預估完成時間
- 執行建議

---

### 審核標準

**合格標準**：
1. ✅ 所有模組狀態清晰（完成度 %、缺口明確）
2. ✅ 數據準確（Facet 數量、題目數量、卦象數量）
3. ✅ 分析深入（不只列數字，要有分析和建議）
4. ✅ 建議可執行（有具體補充方向和時間估算）

**不合格指標**：
- ❌ 模糊描述（「大部分完成」→ 需要具體 %）
- ❌ 缺少分析（只列數字，沒有評估）
- ❌ 建議空泛（「需要優化」→ 需要具體方向）

---

## 📦 子任務包 2：六爻納甲流程對應分析

**任務包編號**：INTEGRATION-2  
**檔案數量**：10 個檔案  
**預估時間**：5-7 天

### 背景說明

傳統六爻納甲有其固定的流程和元素。顧問團隊需要：
1. 理解正統六爻納甲的完整流程（起卦、分析、解讀）
2. 分析我們的現代引擎如何對應到這些流程
3. 設計整合方案，讓表層完全是六爻納甲，但底層是科學診斷

### 傳統六爻納甲流程

```
1. 起卦方式
   - 擲筊（三枚銅錢，擲 6 次）
   - 數位化（時間起卦、姓名起卦）
   ↓
2. 得到本卦
   - 8 個單卦組合成 64 個重卦
   - 例如：乾為天、坤為地、水雷屯
   ↓
3. 確認六親類別
   - 問事：感情、事業、健康、財運、考試等
   - 對應到六親物象：印、官、財、比、食
   ↓
4. 分析萬象納甲
   - 五行生剋（木火土金水）
   - 六親持世（哪個六親在世爻）
   - 動爻變化（哪一爻動了）
   - 世應關係（世爻和應爻的關係）
   ↓
5. 給出解讀
   - 吉凶判斷
   - 時間推算（應期）
   - 具體建議
```

### 交付物清單

#### 檔案 1：`LIUYAO_NAJIA_ORTHODOX_FLOW.md`
**內容**：正統六爻納甲流程解析
- 完整流程說明（起卦 → 分析 → 解讀）
- 每個步驟的傳統方法
- 核心元素（八卦、六親、五行、動爻、世應）
- 參考文獻（古籍、現代解讀）

#### 檔案 2：`BAGUA_TO_DOMAIN_MAPPING.md`
**內容**：八卦 → 八卦領域對應表
- 傳統八卦（乾坤坎離震巽艮兌）
- 我們的八卦領域（Qian、Kun、Kan、Li、Zhen、Xun、Gen、Dui）
- 對應關係（Kan = 流動資源，Zhen = 行動決策）
- 映射邏輯（為什麼這樣對應）

#### 檔案 3：`LIUQIN_TO_CONTEXT_MAPPING.md`
**內容**：六親 → Context 對應表
- 傳統六親（印、官、財、比、食）
- 我們的 Context（Authority、Power、Resource、Peer、Output）
- 對應關係（印 = Authority，官 = Power）
- 使用場景（如何獲取 Context）

#### 檔案 4：`WANXIANG_TO_CALCULATION_MAPPING.md`
**內容**：萬象納甲 → 引擎計算對應表
- 傳統萬象納甲（五行、動爻、世應）
- 我們的引擎計算（Severity、Rigidity、Agency）
- 對應邏輯（五行失衡 = Severity，動爻 = Rigidity）
- 換算公式

#### 檔案 5：`64_HEXAGRAM_MAPPING_LOGIC.md`
**內容**：64 卦選擇邏輯
- 傳統選卦方式（擲筊結果）
- 我們的選卦邏輯（基於 Rigidity + Domain + Severity）
- 對應關係（如何從診斷結果選出對應卦象）
- 映射表（例如：Locked + Kan + 0.7 → 坎為水）

#### 檔案 6：`WUXING_ACTIVITY_CORRESPONDENCE.md`
**內容**：五行活動對應關係
- 傳統五行應用（生剋洩、五行調和）
- 我們的五行活動（45 個活動）
- 對應邏輯（Water_Excessive → Exhaust_Water_to_Wood）
- 活動選擇規則

#### 檔案 7：`RISKCHAIN_AS_YINGGUO.md`
**內容**：風險鏈 → 應果關係
- 傳統應果（種什麼因，得什麼果）
- 我們的風險鏈（4 stage 連鎖）
- 對應邏輯（Stage 1 = 因，Stage 4 = 果）
- 預防建議 = 破因方法

#### 檔案 8：`INTEGRATION_ARCHITECTURE_DESIGN.md`
**內容**：整合架構設計
- 雙層架構（表層六爻納甲 + 底層科學診斷）
- 數據流向（User Input → Engine Calculation → Liuyao Presentation）
- 關鍵轉換點（哪裡進行科學計算，哪裡包裝成六爻）
- 架構圖

#### 檔案 9：`USER_FLOW_COMPARISON.md`
**內容**：使用者流程對比
- 傳統六爻納甲使用者體驗
- 我們的使用者體驗（感覺像六爻）
- 對比表（每個步驟的對應關係）
- 差異分析（哪裡不同，為什麼這樣設計）

#### 檔案 10：`INTEGRATION_IMPLEMENTATION_PLAN.md`
**內容**：整合實作計畫
- 實作步驟（Step 1-5）
- 每個步驟的交付物
- 預估時間
- 風險評估

---

### 審核標準

**合格標準**：
1. ✅ 對正統六爻納甲的理解正確（有參考文獻）
2. ✅ 對應關係清晰（一對一映射表）
3. ✅ 整合方案可行（有具體實作步驟）
4. ✅ 雙層架構設計合理（表層玄學 + 底層科學）

**不合格指標**：
- ❌ 對六爻納甲理解錯誤（沒有參考文獻）
- ❌ 對應關係模糊（「大概類似」→ 需要精確對應）
- ❌ 實作方案空泛（「需要整合」→ 需要具體步驟）

---

## 📦 子任務包 3：符碼投射UI設計

**任務包編號**：INTEGRATION-3  
**檔案數量**：10 個檔案  
**預估時間**：5-7 天

### 背景說明

前端不能是傳統心理學的「ABC 四選一」，而要是玄學感的符碼投射。顧問團隊需要：
1. 設計符碼投射的具體方式（情境、隱喻、符號）
2. 確保底層仍然能精準對應到 OCTET_8 的診斷邏輯
3. 設計完整的 UI 互動流程（起卦 → 選擇 → 解讀）

### 符碼投射方式

**方式 1：情境投射**
```
【情境】：你站在一座古老的廟宇前，門上掛著三個銅鈴。
你會選擇敲響哪一個？

A. 左邊的鈴（聲音沉穩，象徵穩重）
B. 中間的鈴（聲音清脆，象徵清晰）
C. 右邊的鈴（聲音輕柔，象徵柔軟）

→ 底層對應：
  A = 核心狀態傾向穩定型（低 Severity）
  B = 核心狀態傾向清晰型（中 Severity）
  C = 核心狀態傾向柔軟型（高 Severity）
```

**方式 2：符號選擇**
```
【符號】：請選擇最能代表你當下狀態的符號：

🌊 水（流動、變化、不穩定）
🔥 火（激烈、燃燒、耗損）
🌳 木（生長、擴張、衝勁）
⛰️ 山（靜止、穩定、阻塞）
💎 金（收斂、堅硬、變革）

→ 底層對應：
  水 = Water_Excessive（情緒滲透）
  火 = Fire_Excessive（能量外耗）
  木 = Wood_Excessive（過度行動）
  山 = Earth_Excessive（迴避應對）
  金 = Metal_Excessive（過度收斂）
```

**方式 3：福馬投射**
```
【福馬盤】：12 個符號圍成圓形，請選擇最吸引你的 3 個

子（鼠）、丑（牛）、寅（虎）、卯（兔）
辰（龍）、巳（蛇）、午（馬）、未（羊）
申（猴）、酉（雞）、戌（狗）、亥（豬）

→ 底層對應：
  選擇的符號組合 → OCTET_8 題目答案
  （例如：選擇水相關符號 → 對應 Water 系 Facet）
```

### 交付物清單

#### 檔案 1：`SYMBOLIC_PROJECTION_DESIGN_PRINCIPLES.md`
**內容**：符碼投射設計原則
- 什麼是符碼投射
- 為什麼不用ABC四選一
- 設計原則（隱喻、情境、象徵）
- 玄學感營造方法

#### 檔案 2：`QIGUA_INTERACTION_DESIGN.md`
**內容**：起卦互動設計
- 傳統起卦方式（擲筊、數位化）
- 我們的起卦設計（符碼投射版）
- UI 互動流程（動畫、音效、回饋）
- 起卦結果如何對應到八卦

#### 檔案 3：`LIUQIN_SELECTION_DESIGN.md`
**內容**：六親選擇設計
- 傳統六親問事（問感情、事業等）
- 我們的 Context 選擇設計
- UI 呈現方式（符號、情境、隱喻）
- 選擇結果如何對應到 Context

#### 檔案 4：`PROJECTION_QUESTION_LIBRARY.md`
**內容**：投射式題目庫
- 為 OCTET_8 設計投射版本
- 情境投射範例（20 個情境）
- 符號投射範例（20 個符號組合）
- 對應邏輯（投射結果 → 0-4 分）

#### 檔案 5：`FUMA_PROJECTION_DESIGN.md`
**內容**：福馬盤投射設計
- 福馬盤傳統用法
- 我們的福馬盤設計（12 個符號）
- UI 互動方式（點擊、拖曳、旋轉）
- 符號選擇如何對應到 Facet 診斷

#### 檔案 6：`UI_VISUAL_STYLE_GUIDE.md`
**內容**：UI 視覺風格指南
- 東方玄學視覺元素（八卦、陰陽、五行）
- 色彩系統（黑、白、金、紅、藍）
- 字體選擇（書法體、宋體）
- 動畫效果（雲霧、水流、火焰）

#### 檔案 7：`INTERACTION_FLOW_STORYBOARD.md`
**內容**：互動流程腳本
- 完整互動流程（從進入到結果）
- 每個步驟的畫面描述
- 使用者操作方式
- 系統回饋方式

#### 檔案 8：`RESULT_PRESENTATION_DESIGN.md`
**內容**：結果呈現設計
- 卦象展示方式（64 卦圖像）
- 敘事呈現方式（捲軸、書卷）
- 解法呈現方式（活動卡片）
- 風險呈現方式（連鎖圖）

#### 檔案 9：`TECHNICAL_IMPLEMENTATION_SPEC.md`
**內容**：技術實作規格
- 前端技術棧（React、Three.js）
- 符碼投射實作方式
- 動畫效果實作方式
- 與底層引擎的 API 對接

#### 檔案 10：`UI_PROTOTYPE_WIREFRAME.md`
**內容**：UI 原型線框圖
- 每個畫面的線框圖（文字描述或 ASCII art）
- 互動流程圖
- 關鍵頁面佈局
- 響應式設計考量

---

### 審核標準

**合格標準**：
1. ✅ 符碼投射設計玄學感十足（不是ABC四選一）
2. ✅ 底層對應邏輯清晰（投射結果 → OCTET_8）
3. ✅ UI 流程完整（起卦 → 診斷 → 結果）
4. ✅ 技術可實作（有具體技術方案）

**不合格指標**：
- ❌ 仍然是ABC四選一（只是換了包裝）
- ❌ 對應邏輯模糊（不知道如何轉換成分數）
- ❌ UI 流程不完整（缺少關鍵步驟）
- ❌ 技術方案不可行（過於複雜或不切實際）

---

## 🎯 總結

### 三個子任務包的關係

```
子任務包 1：底層引擎完整性報告
  ↓ 確認引擎是否完整、是否需要補充
子任務包 2：六爻納甲流程對應分析
  ↓ 確認如何將引擎對應到六爻納甲流程
子任務包 3：符碼投射UI設計
  ↓ 確認前端如何呈現玄學體驗
```

### 預期成果

**完成後可實現**：
1. ✅ 底層引擎完整，診斷精準
2. ✅ 表層完全是六爻納甲，使用者無感
3. ✅ 符碼投射玄學感十足，不是心理測驗
4. ✅ 雙層架構無縫整合，數據流暢

---

## 📋 執行建議

### 執行順序
1. **先執行子任務包 1**（確認引擎完整性）
2. **再執行子任務包 2**（設計對應關係）
3. **最後執行子任務包 3**（設計前端 UI）

### 並行可能性
- 子任務包 1 和 2 可以並行（不同團隊）
- 子任務包 3 必須等 1 和 2 完成後再開始

### 預估總時間
- 串行執行：15-21 天
- 並行執行：10-14 天（3 個團隊）

---

**建立日期**：2026-01-14  
**任務狀態**：READY FOR EXECUTION  
**優先級**：🔴 CRITICAL
