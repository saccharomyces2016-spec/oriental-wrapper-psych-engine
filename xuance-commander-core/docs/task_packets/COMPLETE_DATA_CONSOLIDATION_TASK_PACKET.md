# 完整資料整理任務包（無衝突、無重複、無錯位）

**任務編號**：COMPLETE-DATA-CONSOLIDATION-001  
**任務名稱**：完整資料整理 - 無衝突、無重複、無錯位  
**優先級**：P0（立即執行）  
**狀態**：READY_TO_EXECUTE  
**建立日期**：2026-01-12  
**負責人**：共同專案開發人 & 合夥人

---

## 📋 任務概述

### 任務目標

對整個專案進行**徹底、全面、深度**的資料整理，確保：

1. ✅ **無衝突**：所有概念只有一個定義，沒有相互矛盾的內容
2. ✅ **無重複**：所有檔案只有一個位置，沒有重複的內容
3. ✅ **無錯位**：所有檔案都在正確的位置，符合 SSOT 原則

### 任務重要性

- ✅ **解決前一次任務的不足**：前一次任務只做了結構重組，沒有做內容去重
- ✅ **建立可持續的基礎**：確保後續任務可以基於完整、正確的資料進行
- ✅ **避免資訊污染**：重複和衝突的檔案會造成資訊污染，影響決策品質

---

## 🔍 第一部分：問題分析（基於前一次任務的不足）

### 1.1 前一次任務的不足

#### 範圍不足
- ✅ 做了資料夾結構重組
- ✅ 建立了整合報告
- ❌ **沒有進行內容去重**
- ❌ **沒有進行跨資料夾的檔案比對**
- ❌ **沒有建立 SSOT 驗證機制**

#### 深度不足
- ✅ 按類別整合了任務資料夾
- ❌ **沒有處理規格文件和核心資料之間的重複**
- ❌ **沒有處理基準檔案和規格文件之間的重複**
- ❌ **沒有驗證內容一致性**

#### 驗證不足
- ✅ 驗證了資料夾結構完整性
- ❌ **沒有驗證內容唯一性**
- ❌ **沒有驗證 SSOT 狀態**

### 1.2 發現的具體問題

#### 重複檔案（已發現）
1. `question_design_guidelines.v1.0.md` - 2 個位置（已處理）
2. `result_presentation_design.v1.0.md` - 2 個位置（待處理）
3. `P0-4.5_FUNNEL_SYSTEM_DESIGN.md` - 2 個位置（待處理）
4. `P0-4.5_INTEGRATION_WITH_P0-5.md` - 2 個位置（待處理）

#### 相同檔名（需要檢查）
- `INDEX.md` - 2 個位置（需要判斷是否重複）
- `MASTER_SYNC_PACKET.md` - 2 個位置（需要判斷是否重複）
- `NORTH_STAR.md` - 2 個位置（需要判斷是否重複）

---

## 🎯 第二部分：完整整理計劃

### 2.1 核心原則

#### 原則 1：SSOT（單一真相來源）
- 每個概念只有一個 SSOT 檔案
- 其他位置應引用 SSOT，而非複製內容

#### 原則 2：內容唯一性
- 相同內容的檔案只能存在一個
- 相同檔名的檔案需要檢查內容是否相同

#### 原則 3：位置正確性
- 每個檔案都應該在正確的位置
- 符合 `docs/governance/CURSOR_FILE_PLACEMENT_RULE.md` 的規範

---

### 2.2 執行階段

#### 階段 1：全面盤點（深度分析）✅

**目標**：找出所有重複、衝突、錯位的檔案

**執行內容**：
1. **檔名去重檢查**
   - 找出所有相同檔名的檔案
   - 記錄每個檔名的所有位置

2. **內容去重檢查**
   - 計算所有檔案的 MD5 雜湊值
   - 找出所有相同內容的檔案
   - 記錄每組重複檔案的位置

3. **概念分散檢查**
   - 找出所有提到相同概念的檔案
   - 識別哪些是 SSOT，哪些是重複

4. **位置驗證檢查**
   - 檢查每個檔案是否符合 `CURSOR_FILE_PLACEMENT_RULE.md`
   - 識別錯位的檔案

**輸出**：
- `docs/ops/analysis/COMPLETE_DUPLICATION_AUDIT.md` - 完整重複審計報告
- `docs/ops/analysis/COMPLETE_CONFLICT_AUDIT.md` - 完整衝突審計報告
- `docs/ops/analysis/COMPLETE_PLACEMENT_AUDIT.md` - 完整位置審計報告

---

#### 階段 2：SSOT 建立與驗證 ✅

**目標**：為每個概念建立或確認 SSOT

**執行內容**：
1. **核心概念 SSOT 清單**
   - 列出所有核心概念（制度、題目、計算、引擎、UI 等）
   - 為每個概念確認或建立 SSOT

2. **SSOT 驗證**
   - 檢查每個概念是否只有一個 SSOT
   - 檢查 SSOT 是否在正確的位置
   - 檢查 SSOT 是否被正確引用

3. **SSOT 索引建立**
   - 建立 `docs/SSOT_INDEX.md` - 所有 SSOT 的索引
   - 更新 `docs/FILE_PLACEMENT_AND_SEARCH_GUIDE.md` 的 SSOT 清單

**輸出**：
- `docs/SSOT_INDEX.md` - SSOT 總索引
- 更新的 `docs/FILE_PLACEMENT_AND_SEARCH_GUIDE.md`

---

#### 階段 3：重複檔案處理 ✅

**目標**：處理所有重複檔案

**執行內容**：
1. **內容相同的重複檔案**
   - 確認 SSOT 位置
   - 刪除重複檔案
   - 在刪除位置建立 README 說明 SSOT 位置

2. **內容不同的同名檔案**
   - 分析內容差異
   - 決定是否合併或保留
   - 更新 SSOT 或建立新的 SSOT

3. **規格文件與核心資料的重複**
   - 確認核心資料為 SSOT
   - 刪除規格文件中的重複內容
   - 在規格文件中建立引用說明

**處理規則**：
- 如果內容相同：刪除重複，保留 SSOT
- 如果內容不同：分析差異，決定合併或保留
- 如果位置錯誤：移動到正確位置

**輸出**：
- 處理報告：`docs/ops/analysis/DUPLICATE_RESOLUTION_REPORT.md`
- 更新的檔案結構

---

#### 階段 4：衝突解決 ✅

**目標**：解決所有內容衝突

**執行內容**：
1. **概念定義衝突**
   - 找出所有定義相同概念但內容不同的檔案
   - 分析衝突原因
   - 決定正確的定義（以 SSOT 為準）

2. **規則衝突**
   - 找出所有定義相同規則但內容不同的檔案
   - 以 `docs/governance/` 中的規則為準
   - 更新或刪除衝突的規則

3. **規格衝突**
   - 找出所有定義相同規格但內容不同的檔案
   - 以 `specs/` 中的規格為準
   - 更新或刪除衝突的規格

**處理規則**：
- 以 SSOT 為準
- 如果 SSOT 不明確，以最新或最完整的版本為準
- 記錄所有衝突和解決方案

**輸出**：
- 衝突解決報告：`docs/ops/analysis/CONFLICT_RESOLUTION_REPORT.md`

---

#### 階段 5：位置校正 ✅

**目標**：確保所有檔案都在正確的位置

**執行內容**：
1. **位置驗證**
   - 檢查每個檔案是否符合 `CURSOR_FILE_PLACEMENT_RULE.md`
   - 識別錯位的檔案

2. **檔案移動**
   - 將錯位的檔案移動到正確位置
   - 更新所有引用

3. **引用更新**
   - 找出所有引用錯位檔案的檔案
   - 更新引用路徑

**處理規則**：
- 以 `docs/governance/CURSOR_FILE_PLACEMENT_RULE.md` 為準
- 移動檔案前先確認目標位置
- 移動後更新所有引用

**輸出**：
- 位置校正報告：`docs/ops/analysis/PLACEMENT_CORRECTION_REPORT.md`

---

#### 階段 6：驗證與測試 ✅

**目標**：驗證整理結果

**執行內容**：
1. **結構驗證**
   - 驗證資料夾結構完整性
   - 驗證所有檔案都在正確位置

2. **內容驗證**
   - 驗證沒有重複檔案
   - 驗證沒有衝突內容
   - 驗證所有 SSOT 都存在

3. **引用驗證**
   - 驗證所有引用都正確
   - 驗證沒有斷裂的引用

4. **完整性測試**
   - 測試查找特定概念是否容易
   - 測試 SSOT 是否被正確引用

**驗證標準**：
- ✅ 沒有重複檔案（內容相同）
- ✅ 沒有衝突內容（概念定義一致）
- ✅ 所有檔案都在正確位置
- ✅ 所有 SSOT 都存在且被正確引用

**輸出**：
- 驗證報告：`docs/ops/analysis/CONSOLIDATION_VERIFICATION_REPORT.md`

---

## 📝 第三部分：執行細節

### 3.1 重複檔案處理規則

#### 規則 1：內容相同的重複檔案
- **處理方式**：刪除重複，保留 SSOT
- **SSOT 判斷順序**：
  1. `domain/` 中的檔案優先於 `specs/` 中的檔案
  2. `docs/governance/` 中的檔案優先於其他位置的檔案
  3. 根目錄的基準檔案（如 `P0-4.5/`）優先於 `specs/` 中的檔案
  4. 如果都不符合，以檔案修改時間最新的為準

#### 規則 2：內容不同的同名檔案
- **處理方式**：分析差異，決定合併或保留
- **判斷標準**：
  - 如果差異是版本差異：保留所有版本，但明確標註版本
  - 如果差異是內容差異：合併內容，更新 SSOT
  - 如果差異是格式差異：統一格式，保留 SSOT

#### 規則 3：規格文件與核心資料的重複
- **處理方式**：刪除規格文件中的重複，建立引用說明
- **原則**：
  - 核心資料（`domain/`）為 SSOT
  - 規格文件（`specs/`）應引用 SSOT，而非複製內容
  - 在規格文件中建立 README 說明 SSOT 位置

---

### 3.2 衝突解決規則

#### 規則 1：概念定義衝突
- **處理方式**：以 SSOT 為準
- **SSOT 判斷順序**：
  1. `charter/CHARTER.md` - 專案憲章
  2. `roadmap/ROADMAP.md` - 路線圖
  3. `specs/` - 規格文件
  4. `docs/governance/` - 治理規則
  5. `domain/` - 核心資料

#### 規則 2：規則衝突
- **處理方式**：以 `docs/governance/` 中的規則為準
- **判斷順序**：
  1. `docs/governance/ESSENTIAL_RULES.md` - 核心制度
  2. `docs/governance/CURSOR_FILE_PLACEMENT_RULE.md` - 文件放置規範
  3. 其他治理規則

#### 規則 3：規格衝突
- **處理方式**：以 `specs/` 中的規格為準
- **判斷順序**：
  1. `specs/ui/` - UI 規格
  2. `specs/engine/` - 引擎規格
  3. `specs/domain/` - Domain 規格

---

### 3.3 位置校正規則

#### 規則 1：檔案類型判斷
- **治理文件** → `docs/governance/`
- **規格文件** → `specs/{類別}/`
- **核心資料** → `domain/{類型}/`
- **任務相關** → `docs/task_packets/` 或 `archive/tasks_by_category/`
- **運營記錄** → `docs/ops/`

#### 規則 2：SSOT 位置優先
- SSOT 檔案應在核心位置（`domain/`, `docs/governance/`, `specs/`）
- 非 SSOT 檔案應在引用位置（`archive/`, `docs/ops/`）

---

## ✅ 第四部分：驗收標準

### 4.1 無衝突標準
- ✅ 所有概念只有一個定義
- ✅ 所有規則沒有相互矛盾
- ✅ 所有規格沒有相互衝突

### 4.2 無重複標準
- ✅ 沒有內容相同的重複檔案
- ✅ 沒有不必要的同名檔案
- ✅ 所有檔案都有明確的用途

### 4.3 無錯位標準
- ✅ 所有檔案都在正確的位置
- ✅ 所有檔案都符合 `CURSOR_FILE_PLACEMENT_RULE.md`
- ✅ 所有引用都正確

### 4.4 完整性標準
- ✅ 所有 SSOT 都存在
- ✅ 所有 SSOT 都被正確引用
- ✅ 所有索引都完整

---

## 📊 第五部分：執行計劃

### 5.1 執行順序

1. **階段 1：全面盤點**（1-2 小時）
   - 檔名去重檢查
   - 內容去重檢查
   - 概念分散檢查
   - 位置驗證檢查

2. **階段 2：SSOT 建立與驗證**（1 小時）
   - 核心概念 SSOT 清單
   - SSOT 驗證
   - SSOT 索引建立

3. **階段 3：重複檔案處理**（2-3 小時）
   - 內容相同的重複檔案處理
   - 內容不同的同名檔案處理
   - 規格文件與核心資料的重複處理

4. **階段 4：衝突解決**（1-2 小時）
   - 概念定義衝突解決
   - 規則衝突解決
   - 規格衝突解決

5. **階段 5：位置校正**（1 小時）
   - 位置驗證
   - 檔案移動
   - 引用更新

6. **階段 6：驗證與測試**（1 小時）
   - 結構驗證
   - 內容驗證
   - 引用驗證
   - 完整性測試

**總預估時間**：7-10 小時

---

### 5.2 風險控制

#### 風險 1：誤刪重要檔案
- **控制措施**：
  - 所有刪除操作前先備份
  - 所有刪除操作都記錄在報告中
  - 可以根據報告恢復檔案

#### 風險 2：破壞現有引用
- **控制措施**：
  - 移動檔案前先找出所有引用
  - 移動後立即更新所有引用
  - 驗證階段檢查所有引用

#### 風險 3：SSOT 判斷錯誤
- **控制措施**：
  - 使用明確的 SSOT 判斷規則
  - 記錄所有 SSOT 判斷的依據
  - 驗證階段檢查所有 SSOT

---

## 📚 第六部分：參考文件

### 6.1 相關文件
- `docs/governance/CURSOR_FILE_PLACEMENT_RULE.md` - 文件放置規範
- `docs/FILE_PLACEMENT_AND_SEARCH_GUIDE.md` - 檔案放置與查找指引
- `docs/ops/analysis/CONCEPT_DUPLICATION_AUDIT.md` - 概念重複審計報告
- `docs/ops/analysis/PREVIOUS_TASK_ANALYSIS.md` - 前一次任務不足分析

### 6.2 SSOT 檔案
- `charter/CHARTER.md` - 專案憲章
- `roadmap/ROADMAP.md` - 路線圖
- `docs/governance/ESSENTIAL_RULES.md` - 核心制度
- `docs/governance/CURSOR_FILE_PLACEMENT_RULE.md` - 文件放置規範

---

**建立日期**：2026-01-12  
**狀態**：✅ COMPLETED  
**優先級**：P0（立即執行）  
**完成日期**：2026-01-12
