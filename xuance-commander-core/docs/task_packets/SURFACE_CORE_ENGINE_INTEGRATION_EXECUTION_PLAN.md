# SURFACE_CORE_ENGINE_INTEGRATION_EXECUTION_PLAN

**建立日期**：2026-01-15  
**任務關聯**：SURFACE_CORE_ENGINE_INTEGRATION_REBASELINE_001  
**用途**：回答「表層 × 底層整合」缺口、可行性、建議與任務拆解（依據 SSOT）。

---

## A) 現況判斷（是否可結合）

**結論**：目前仍需補足關鍵環節，尚無法直接完成表層 × 底層的完整連動。  
原因為：表層詞彙已定義，但缺少「可計算」對應、64 卦映射規則、核心資料完整度與 compiled facets。  

**必補環節（最小集）**：
1. **64 卦內/中/外圈詞彙 SSOT**（缺失）
2. **八卦領域 → Facet 對應表**（目前 default_facets 多數無實際資料檔）
3. **64 卦映射規則**（目前只有單一 facet 範例）
4. **Facet 資料完整化**（scoring/manifest/compiled 缺口過大）
5. **symbol_facet_mapper 與 domain manifests 合流**

---

## B) 任務式補全計劃（可用任務包執行）

### Phase 1 — 表層詞彙與映射對齊
- [ ] 補齊「64 卦內圈/中圈/外圈」詞彙 SSOT（依 v4 計畫書結構）
- [ ] 建立「表層詞彙 → 底層欄位」對應表（八卦/內圈/中圈/外圈 → domain/facet/weight）

### Phase 2 — 八卦領域 → Facet 完整化
- [ ] 盤點每個八卦領域對應 facet 的資料缺口
- [ ] 補齊最小可計算集合（questions/scoring/narratives/reco/risk/manifests）
- [ ] 更新 `bagua.domain_map.v1.0.json` 指向實際可用 facet

### Phase 3 — 64 卦映射規則落地
- [ ] 定義「輸入向量（E/C/A/H/U/Cost） → 64 卦」映射規則
- [ ] 將規則落地成 JSON 或 engine module（取代 MVP 8 卦邏輯）
- [ ] 每個核心 facet 至少有一組 hexagram_mapping

### Phase 4 — 引擎合流
- [ ] `symbol_facet_mapper` 由硬編 facet 改為讀取 domain manifests
- [ ] 新增 compiled facets，形成可直接運行輸出

### Phase 5 — 最小可運行驗收
- [ ] 建立端到端輸入樣例（表層詞彙 → 底層運算 → 64 卦輸出）
- [ ] 形成最小驗收報告（輸入/輸出與缺口）

---

## C) 是否可啟動「代理模式」直接補齊？

**結論**：可以啟動「任務包驅動」模式逐步補齊，但需遵守：
- **保留底層現有題庫與引擎**，以補全對應關係為主
- **新增資料時需可追溯**（schema + manifests）
- **不得用模糊詞覆蓋底層語義**（避免 AI 轉譯後對不上）

因此可採「任務包 + 分階段執行」作為代理模式的實作方式。

---

## D) 系統完成後是否能達成終極目標？

**結論**：完成上述補全後，系統在「玄學表層 × 心理底層」的運作上**可達成目標**（夠玄、難以看出心理學、但底層具可計算性）。  
但是否「足夠涵蓋全人類全年齡全類型」，仍取決於：
- **facet 覆蓋度**（領域密度）
- **題庫深度**（對話與測量精度）
- **策略/風險鏈完整性**

因此：完成整合後，主要工作將轉為「資料庫擴充與微調」。

---

## E) 專家角度的建議（不拆掉重做）

1. **不建議推倒重做**：現有底層結構可用，問題在於「表層映射與資料不完整」。
2. **核心優先順序**：先完成 mapping（八卦/64 卦/內中外圈）再擴充題庫。
3. **避免語義漂移**：表層詞彙需對應可定量的底層欄位，避免 AI 敘事偏離。
4. **先做最小可運行**：至少一條「八卦 → facet → scoring → 64 卦 → 輸出」流水線通過，再擴充範圍。

---

## F) 下一步行動（最小集合）

1. 建立 64 卦內/中/外圈詞彙 SSOT（你提供詞彙即可落盤）
2. 建立八卦領域對應表（至少 1-3 個核心 facet）
3. 定義 64 卦映射規則（可先做 MVP 版本）

