# 世界觀設計規格 (Worldview Design Specification)

**文件編號**：P0-5.7_WORLDVIEW_DESIGN  
**建立日期**：2026-01-12（從 P0-5.7_DESIGN_DOC_FINAL.md 提取）  
**適用版本**：全系統  
**文件狀態**：ACTIVE  
**注意**：本文件僅保留視覺風格定義，Stage 設計以 `P0-4.5_FUNNEL_SYSTEM_DESIGN.md` 為準

---

## 1. 設計核心哲學：虛實共構 (The Binary Reality)

### 1.1 核心命題：「儀式即計算」
所有互動操作（轉盤、羅盤、擲筊、展卷）在視覺上是「向天問卜」的儀式，但在數據層面上，這是使用者輸入特徵數據、系統進行即時運算與校準的過程。

### 1.2 視覺定調：「墨流運算 (Computational Ink)」
介面被定義為「宣紙」，互動回饋是「墨暈擴散」與「金石撞擊」。
* **關鍵詞**：沉穩 (Grounded)、流動 (Fluid)、神秘 (Arcane)、精確 (Precise)。
* **隱喻**：螢幕是載體，指尖是筆觸，數據的運算則是墨跡在紙纖維中的擴散與定型。

---

## 2. 基礎視覺風格定義 (Visual Style Guide)

### 2.1 色彩系統 (Minimal Palette)
不使用宮廟色，採用「文人畫」與「金石學」色調。

* **基底 (Background)**：`Rice Paper White` (#F3F2EE)、`Ink Black` (#1A1A1A)。
* **能量/狀態 (Energy/State)**：`Cinnabar Red` (#B63728) 用於強調/火；`Bronze Gold` (#C5A065) 用於高亮/神聖。
* **輔助 (Auxiliary)**：`Jade Green` (#6A7F6E) 用於平衡；`Indigo Blue` (#3A4A5A) 用於深層資訊。

### 2.2 字體排印 (Typography)
* **儀式性文字**：**宋體/明體**（如：思源宋體、裝甲明朝）。
* **功能性文字**：**無襯線黑體**（如：Inter, Roboto, 思源黑體）。
* **排版原則**：**留白 (White Space)**，模仿傳統書畫布局。

### 2.3 介面材質 (Materiality)
* **容器**：使用「框線」、「印章」、「拓印」作為邊界，不使用 Card 陰影。
* **回饋**：點擊時產生「墨汁滲透」或「金石敲擊」的動態與音效。

---

## 3. 核心機制：雙重計算與一致性 (Dual Calculation Canon)

本系統嚴格遵守「後端科學極大化，前端玄學極致化」原則。

### 3.1 雙引擎並行 (Dual Engines)
1.  **科學計算路徑 (Internal Validator)**：
    * 使用心理學量表與風險模型計算。
    * 產出：`Risk_Level`, `Score`, `Scientific_Advice`。
    * 地位：**絕對基準 (The Truth)**。
2.  **玄學計算路徑 (Presentation Layer)**：
    * 使用五行生剋與易經卦理進行推演。
    * 產出：`Hexagram_ID`, `Element_Tags`, `Metaphysical_Text`。
    * 地位：**表層呈現 (The Face)**。

### 3.2 一致性驗證邏輯 (Consistency Logic)
為了確保使用者不產生認知失調，系統執行以下邏輯：
1.  **計算**：科學引擎算出 `Risk: HIGH`。
2.  **篩選**：玄學引擎從 64 卦中，篩選出所有帶有「凶/悔/吝」屬性的卦象作為 `Candidate_Set`。
3.  **匹配**：玄學引擎根據使用者的 Stage 1-3 輸入（五行/方位），從 `Candidate_Set` 中挑選最符合的卦象。
4.  **鎖定**：將此結果（卦象 ID、變爻、風險等級）打包，作為不可變更的 Payload。

> **⚠️ 嚴格約束**：若玄學計算結果與科學結果衝突，**必須**調整玄學參數或重選卦象，**絕不可**修改科學評估結果。

---

## 4. 技術與實作約束 (Technical Constraints)

### 4.1 前端渲染 (Frontend)
* **動畫解耦**：所有動畫（轉盤、擲幣）必須與結果解耦。前端請求 API → 播放過場動畫 → 接收 API 結果 → 渲染對應的最終幀。
* **RWD**：Mobile First，圓形介面寬度佔螢幕寬度 90%-95%。

### 4.2 國際化 (i18n)
* **無文字圖檔**：所有介面上的文字必須是 Text Layer，支援 CN/EN 即時切換。
* **AI 多語系**：AI 生成層需在 Prompt 中指定輸出語言（`lang: "zh-TW"` 或 `lang: "en"`）。

### 4.3 配置化 (Configuration)
* **Theme Config**：所有顏色值、字體、背景紋理必須從 `theme_config` 讀取，不得硬編碼。

---

**文件狀態**：ACTIVE  
**參考文件**：
- UI 架構：`specs/ui/architecture/P0-5_UI_ARCHITECTURE.md`
- 流程設計：`specs/ui/workflow/P0-4.5_FUNNEL_SYSTEM_DESIGN.md`
