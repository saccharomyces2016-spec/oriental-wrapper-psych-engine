# P0-5 網頁測試指南（使用 Atlas 網頁瀏覽器）

**建立日期**：2026-01-11  
**用途**：指導如何使用 Atlas（GPT 網頁瀏覽器）進行網頁測試

---

## 一、Atlas 網頁瀏覽器簡介

Atlas 是 GPT 的網頁瀏覽器功能，可以用於：
- 自動化網頁測試
- 視覺檢查和截圖
- 互動測試（點擊、輸入等）
- 檢查運行時錯誤
- 驗證 UI 狀態

---

## 二、測試流程

### 2.1 準備工作

1. **確認開發伺服器運行**
   ```bash
   cd xuance-commander-core/ui
   npm run dev
   ```
   確認輸出：`➜  Local:   http://localhost:5173/`

2. **提供測試網址給 Atlas**
   - 測試網址：`http://localhost:5173/`

### 2.2 請求 Atlas 執行測試

**請求格式範例**：
```
請使用 Atlas 網頁瀏覽器訪問 http://localhost:5173/，並執行以下測試：

1. 檢查頁面是否正常載入
2. 檢查控制台是否有錯誤
3. 測試符碼點擊功能
4. 檢查 i18n 翻譯是否正確（是否出現原始 key）
5. 檢查節點文字是否重疊
6. 測試語系切換功能
7. 提供頁面截圖和詳細報告
```

### 2.3 測試檢查清單

#### A. 基本載入測試
- [ ] 頁面是否正常載入（無白屏）
- [ ] 控制台是否有錯誤訊息
- [ ] 數據是否成功載入（檢查 Network 請求）

#### B. i18n 翻譯測試
- [ ] 檢查是否出現原始 key（如 `symbol_heaven`）
- [ ] 檢查翻譯是否正確（中文顯示正確）
- [ ] 測試語系切換（CN ↔ EN）
- [ ] 確認所有文字都正確翻譯

#### C. 佈局測試
- [ ] 檢查節點文字是否重疊
- [ ] 檢查節點位置是否合理
- [ ] 檢查響應式設計（不同視窗大小）

#### D. 互動測試
- [ ] 測試符碼點擊功能
- [ ] 檢查選取計數是否更新（0/3 → 1/3）
- [ ] 檢查確認按鈕是否正確啟用/禁用
- [ ] 測試選取狀態視覺回饋

#### E. 功能流程測試
- [ ] 選取 3 個符碼後點擊確認
- [ ] 確認進入 Stage 3
- [ ] 測試 Stage 3 的問題回答
- [ ] 測試進入 Stage 4 結果頁

---

## 三、常見問題排查

### 3.1 i18n 問題

**症狀**：畫面出現原始 key（如 `symbol_heaven`）

**可能原因**：
1. i18n 字典未正確載入
2. key 命名不一致
3. `t()` 函數未正確調用

**排查步驟**：
1. 檢查控制台是否有 i18n 載入錯誤
2. 檢查 `public/data/compiled_facet.json` 中的 i18n 數據
3. 檢查 `t()` 函數實現（是否正確返回翻譯）

### 3.2 佈局重疊問題

**症狀**：節點文字疊在一起

**可能原因**：
1. 極座標計算錯誤
2. 文字寬度未考慮
3. 缺少 collision detection

**排查步驟**：
1. 檢查節點座標計算邏輯
2. 檢查文字定位方式（anchor point）
3. 使用 DevTools 檢查 bounding box

### 3.3 互動問題

**症狀**：點擊無反應或狀態不同步

**可能原因**：
1. hit area 太小
2. pointer-events 被阻擋
3. 狀態管理不同步

**排查步驟**：
1. 檢查 hit area 大小（應 >= 40px）
2. 檢查 pointer-events CSS
3. 檢查狀態管理邏輯

---

## 四、測試報告格式

請 Atlas 提供以下格式的測試報告：

```markdown
## 測試報告

### 1. 基本資訊
- 測試時間：[時間]
- 測試網址：http://localhost:5173/
- 瀏覽器：Atlas

### 2. 載入狀態
- [ ] 頁面正常載入
- [ ] 控制台錯誤：[列出錯誤]

### 3. i18n 測試
- 發現的問題：[描述]
- 截圖：[如有]

### 4. 佈局測試
- 發現的重疊問題：[描述]
- 截圖：[如有]

### 5. 互動測試
- 點擊測試結果：[描述]
- 狀態同步測試：[描述]

### 6. 功能流程測試
- Stage 2 → Stage 3：[結果]
- Stage 3 → Stage 4：[結果]

### 7. 建議修復
- [列出建議修復的問題]
```

---

## 五、使用技巧

1. **請求明確**：明確說明需要測試的具體功能
2. **提供截圖**：請求 Atlas 提供頁面截圖
3. **檢查控制台**：要求 Atlas 檢查瀏覽器控制台
4. **測試多個場景**：測試不同狀態和交互

---

**注意事項**：
- Atlas 需要開發伺服器正在運行
- 如果使用本地網址（localhost），需要確保 Atlas 可以訪問
- 建議先手動測試基本功能，再用 Atlas 進行詳細測試

---

**版本**：v1.0  
**狀態**：待使用
