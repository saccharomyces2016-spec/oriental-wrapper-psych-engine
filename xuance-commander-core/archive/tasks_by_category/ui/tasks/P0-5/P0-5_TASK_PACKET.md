# P0-5 任務包：UI 整合與結果呈現設計

**狀態**：ACTIVE | EDITABLE | REFERENCE（非硬性、可隨時修正）  
**建立日期**：2026-01-10  
**更新日期**：2026-01-10  
**版本**：v2.0（依照新任務包制度更新）

---

## ⚠️ 重要聲明：所有內容保留修改空間

**本任務包中的所有設計、規格、決策均為暫時性版本，不得凍結。**

- 所有設計決策均可在後續討論中調整
- 所有介面元素、流程、視覺風格均可修改
- 所有技術實現方式均可變更
- 任何「最終版本」「確定方案」的說法均指「當前可執行的方案」，非永久凍結

**目標**：建立一個**可運作、可測試、可持續調整**的基礎版本，而非完美終版。

---

## 📋 文件放置規範（必引用）

**權威規範**：請參考 `docs/governance/CURSOR_FILE_PLACEMENT_RULE.md`

**本任務包位置**：`xuance-commander-core/P0-5/P0-5_TASK_PACKET.md`

**相關文件放置規則**：
- 階段文件 → `P0-5/`
- 顧問任務包 → `docs/task_packets/advisor/task_packages/TASK_PACKAGE_P0-5_<Task>.md`
- 顧問輸出 → `docs/gem/runs/RUN_P0-5_<Task>_<Role>_<Date>.md`

**任務包集中管理**：見 `docs/task_packets/README.md` 和 `docs/task_packets/INDEX.md`

---

## 一、專案／任務背景摘要

### 1.1 這是什麼專案

**專案定位**：
- 打造一個以心理學、行為科學、認知結構、社會學、人類學等現代學術研究為底層引擎
- 結合 GPT 與 Gemini 等 AI 工具進行資訊收集與大數據庫建構
- 以東方命理、玄學、象數與隱喻作為人類可理解介面
- 能夠適用於全世界、全文化、全人類、全年齡、全性別、全困擾、全問題場景的解析、引導與連鎖互動系統

**核心價值**：
- **真的能賺錢**：商業可行性（序號買斷、信用卡、PayPal、Stripe）
- **真的可以上國際**：世界級水準，CN/EN 雙語原生語感
- **真的可以幫到人**：使用者真實感受到「這套玄學非常準，而且真的有幫助」

**使用者體驗終極目標**：
- 使用者只會、也只需要感知到：這是一個玄學網站、這是一套命理／神秘系統、這個系統非常準、這個系統對自己很有幫助
- 使用者不需要、也不應該被告知：任何心理學名詞、任何現代科學背景、任何「其實這不是玄學」的說明

### 1.2 為什麼現在要做這件事

**當前階段背景**：
- P0-1 至 P0-4.5 已完成：已建立完整的 Facet 設計、敘事系統、分流系統
- 已有可用的 compiled facet JSON（`income_expansion_pressure` 和 `relationship_imbalance`）
- 已有完整的敘事、建議、風險鏈數據結構
- **現在需要**：建立最小 UI 串接，讓使用者能夠實際體驗系統，驗證端到端流程

**關鍵決策脈絡**：
- P0-2 決策：採用「歲時農耕・倉廩觀」作為主隱喻，Framework A/B 作為風險鏈結構
- P0-3 決策：完成敘事銳利度指標、禁用詞表、玄學轉譯規則、Golden Tests
- P0-4 決策：驗證結構可移植性，第二個 Facet 可零改動搬移
- P0-4.5 決策：完成 4 階段全像漏斗系統設計（八卦定方位 → 六親定物象 → 萬象定歸因 → 命盤綜合與斷語）

### 1.3 這次任務在整體中扮演什麼位置

**在整體架構中的角色**：
- **Phase 0：MVP（單一構面）**的最後一個階段
- 連接「後端數據結構」與「使用者體驗」的關鍵橋樑
- 驗證「從 compiled facet 到使用者感知」的完整流程

**與其他任務的關聯**：
- **依賴**：P0-1 至 P0-4.5 的所有成果（Facet 設計、敘事系統、分流系統）
- **提供**：為 P0-6（最小付費/權限策略）提供 UI 基礎
- **驗證**：驗證 P0-3 和 P0-4 的 Golden Tests 在實際 UI 中的表現

---

## 二、與本次任務相關的「過往任務回顧」

### 2.1 之前做過哪些相關嘗試

**已完成階段**：

- ✅ **P0-1**：選定第一個構面（Facet）
  - Facet ID: `income_expansion_pressure`（歲時農耕・倉廩觀）
  - 定義：薪資增速追不上家庭開銷所產生的壓力，以及對「第二收入」的驅動與可行性狀態

- ✅ **P0-2**：建立該 facet 的 questions/scoring/reco/narr/risk
  - 採納 R1 題目藍圖：以「歲時農耕・倉廩觀」作為 user-facing 唯一主隱喻
  - 採納 R4 風險鏈：Framework A/B 作為 internal 結構（對外輸出必須翻譯成農耕語彙）
  - 完成 questions、scoring、recommendations、narratives、riskchains 數據結構

- ✅ **P0-3**：跑 golden tests 固定輸入輸出
  - 完成敘事銳利度指標（M1–M4）
  - 完成機器檢查禁用詞表（Forbidden Lexicon）
  - 完成玄學轉譯規則（Internal Signals → 農耕語彙）
  - 完成 5 條標準測試樣本（CI/驗收用例）
  - 完成次隱喻邊界與高風險 L4 固定模板

- ✅ **P0-4**：Facet Portability & Stress Test
  - 驗證 P0-3 結構可在第二個 Facet（relationship_imbalance）上零改動搬移且不崩壞
  - 完成可移植性驗證與 Golden Tests Spec
  - 確認結構穩定性

- ✅ **P0-4.5**：題目流程與分流系統設計
  - 完成 4 階段全像漏斗系統設計
  - 核心流程：八卦定方位 → 六親定物象 → 萬象定歸因 → 命盤綜合與斷語
  - 八卦盤界面整合：Stage 1 使用八卦轉輪/八門卡片
  - 路由規則：精確路由 + 模糊路由（中宮/混沌處理）

**已有原型**：
- `prototype/` 目錄：HTML + CSS + 原生 JavaScript 原型
- 基本題目渲染與結果顯示功能
- 讀取 `domain/compiled/` 下的 compiled facet JSON

### 2.2 哪些已完成、哪些卡住

**已完成**：
- ✅ Facet 數據結構設計（questions、scoring、narratives、recommendations、riskchains）
- ✅ 敘事系統設計（L1–L4 四層結構）
- ✅ 安全稽核系統（R4 禁用詞表、高風險模板）
- ✅ Golden Tests 規格（5 條標準測試樣本）
- ✅ 分流系統設計（4 階段全像漏斗）
- ✅ 原型基礎（HTML/CSS/JS 基本框架）

**卡住或待確認**：
- ⏳ **UI 設計細節**：具體配色方案、字體選擇、動畫效果（待討論）
- ⏳ **分流系統實作策略**：是否在 P0-5 階段實作完整 4 階段分流，還是先做 Stage 3 + Stage 4（待討論）
- ⏳ **使用者資訊收集**：性別、姓名、出生年月日是否在 P0-5 階段實作（待討論）
- ⏳ **前端框架選擇**：是否繼續使用原生 HTML/CSS/JS，還是引入前端框架（待討論）

### 2.3 哪些方向已被否定或暫停

**已否定的方向**：
- ❌ **不優化視覺設計**：P0-5 階段不追求完美視覺，只追求可運作
- ❌ **不優化響應式設計**：P0-5 階段不優化響應式設計
- ❌ **不優化動畫效果**：P0-5 階段不優化動畫效果（基本動畫可保留）
- ❌ **不實作用戶認證**：P0-5 階段不實作用戶認證
- ❌ **不實作付費功能**：P0-5 階段不實作付費功能（P0-6 占位）
- ❌ **不實作跨 Facet 選擇 UI**：P0-5 階段不實作跨 Facet 選擇介面

**已暫停的方向**：
- ⏸️ **完整 4 階段分流系統實作**：可先做 Stage 3 + Stage 4，Stage 1 和 Stage 2 延後
- ⏸️ **開場動畫與世界觀說明**：可延後實作
- ⏸️ **豐富的視覺效果與動畫**：可延後實作
- ⏸️ **結果分享功能**：可延後實作

---

## 三、目前已完成的結果或階段性結論

### 3.1 已經有哪些初步成果

**具體交付物**：

- ✅ **Compiled Facet JSON**：
  - 位置：`domain/compiled/income_expansion_pressure.compiled.v1.0.json`
  - 位置：`domain/compiled/relationship_imbalance.compiled.v1.0.json`
  - 狀態：已完成，可直接使用
  - 內容：包含 questions、scoring、narratives、recommendations、riskchains 完整數據結構

- ✅ **敘事系統規格**：
  - 位置：`P0-3/R1_METRICS_V1_EXECUTABLE_SPEC.md`
  - 位置：`P0-3/R2_METAPHOR_BOUNDARY_BANLIST_HIGHRISK_TEMPLATES.md`
  - 狀態：已完成，可直接使用
  - 內容：L1–L4 四層敘事結構、次隱喻邊界、高風險 L4 固定模板

- ✅ **安全稽核系統**：
  - 位置：`P0-3/R2_METAPHOR_BOUNDARY_BANLIST_HIGHRISK_TEMPLATES.md`
  - 狀態：已完成，可直接使用
  - 內容：禁用詞表、自動轉譯護欄（Rewrite Guards）、高風險模板

- ✅ **分流系統設計**：
  - 位置：`P0-4.5/P0-4.5_FUNNEL_SYSTEM_DESIGN.md`
  - 狀態：已完成，可直接參考
  - 內容：4 階段全像漏斗系統設計、路由規則

- ✅ **UI 架構設計**：
  - 位置：`P0-5/P0-5_UI_ARCHITECTURE.md`
  - 位置：`P0-5/P0-5_UI_INTEGRATION_SPEC.md`
  - 狀態：已完成，可直接使用
  - 內容：UI 架構哲學、全流程 UI 模組分層、數據流設計

- ✅ **原型基礎**：
  - 位置：`prototype/` 目錄
  - 狀態：已完成，可作為起點
  - 內容：HTML + CSS + 原生 JavaScript 基本框架

### 3.2 哪些東西「暫時可用」

**暫時可用但需改進的資源**：

- 🔄 **原型代碼**：
  - 說明：已有基本框架，但需要重構以符合新的 UI 架構設計
  - 限制：代碼結構可能不符合新的 UI 模組分層設計
  - 可用性：可作為起點，但需大幅改進

- 🔄 **Compiled Facet JSON 結構**：
  - 說明：數據結構已穩定，但可能會有版本更新
  - 限制：需要處理版本兼容性（例如：v1.0、v1.1）
  - 可用性：可直接使用，但需具備容錯能力

- 🔄 **敘事文案**：
  - 說明：已有完整的 L1–L4 敘事文案，但可能需要多樣化（R3 的輸出）
  - 限制：可能需要處理多樣化文案池
  - 可用性：可直接使用，但需支援多樣化

### 3.3 哪些仍不確定

**尚未確定的設計決策**：

- ❓ **UI 設計細節**：
  - 具體配色方案（墨色、金色、五行色等）
  - 具體字體選擇（書法字體、仿古字體等）
  - 具體動畫效果（雲霧、水波、星象等）
  - 待確認：需要與設計團隊或使用者測試後決定

- ❓ **分流系統實作策略**：
  - 是否在 P0-5 階段實作完整 4 階段分流？
  - 若否，Stage 1 和 Stage 2 如何簡化或跳過？
  - 待確認：需要根據開發時間和優先級決定

- ❓ **使用者資訊收集**：
  - 性別、姓名、出生年月日是否在 P0-5 階段實作？
  - 若實作，表單驗證規則如何設計？
  - 待確認：需要根據功能優先級決定

- ❓ **前端框架選擇**：
  - 是否繼續使用原生 HTML/CSS/JS？
  - 是否需要引入前端框架（React、Vue 等）？
  - 待確認：需要根據開發效率和維護成本決定

**尚未驗證的假設**：

- ❓ **數據綁定方式**：
  - 如何處理數據結構變化？
  - 如何處理多語言數據？
  - 待驗證：需要實際實作後驗證

- ❓ **高風險結果的特殊處理**：
  - UI 如何識別高風險結果？
  - 高風險結果的特殊樣式如何呈現？
  - 待驗證：需要實際測試後驗證

---

## 四、本次希望推進的下一個目標

### 4.1 當前階段目標

**本次任務包要達成什麼**：

> 建立最小 UI 串接，能夠讀取 compiled facet（`income_expansion_pressure` 和 `relationship_imbalance`），並顯示敘事、建議與風險鏈，驗證端到端流程可運作。

**一句話目標**：
- 讓使用者能夠實際體驗系統，從回答題目到看到結果，完整驗證「從 compiled facet 到使用者感知」的流程

### 4.2 推進方向

**可以模糊，但要有方向**：

- **想補強哪一段**：
  - 補強 UI 與數據結構的串接（從 compiled facet JSON 到 UI 顯示）
  - 補強結果頁面的呈現（L1–L4 敘事、建議、風險鏈的正確顯示）
  - 補強多語言支援（CN/EN 即時切換）
  - 補強基本動畫效果（結果出現時的動畫）

- **想擴展還是收斂**：
  - **收斂**：P0-5 階段不追求完美，只追求可運作、可測試
  - **收斂**：不實作完整 4 階段分流，可先做 Stage 3 + Stage 4
  - **收斂**：不優化視覺設計、響應式設計、動畫效果
  - **預留擴展空間**：架構需可擴展，確保未來可無縫整合完整分流系統

- **想驗證某個假設，還是單純找靈感**：
  - **驗證假設**：驗證「從 compiled facet 到使用者感知」的完整流程是否可行
  - **驗證假設**：驗證 Golden Tests 在實際 UI 中的表現
  - **驗證假設**：驗證多語言切換是否流暢
  - **驗證假設**：驗證高風險結果的特殊處理是否正確

### 4.3 預期成果

**功能完整性（最低要求）**：
- [ ] 能夠讀取 compiled facet JSON
- [ ] 能夠渲染題目並收集使用者回答
- [ ] 能夠計算 score 並選擇對應的 outcome band
- [ ] 能夠顯示結果頁面（包含 L1–L4 敘事、建議、風險鏈）
- [ ] 能夠支援 CN/EN 即時切換

**使用者體驗（最低要求）**：
- [ ] 題目呈現維持「問卦」體驗，不讓使用者感覺在做測驗
- [ ] 結果頁面呈現維持「玄學」語感，不暴露心理學
- [ ] 所有文字（題目、結果、按鈕）支援 CN/EN 切換
- [ ] 結果出現時有基本動畫效果

**技術品質（最低要求）**：
- [ ] 代碼結構清晰，具備基本的容錯能力
- [ ] 能夠處理數據結構變化（使用 fallback 值）
- [ ] 能夠處理多語言數據（根據當前語言選擇對應欄位）

---

## 五、相互影響的核心要素

### 5.1 AI 顧問角色系統（R1–R5）的協作關係

本專案採用**分工協作、分層審核**的 AI 顧問角色系統：

#### R1：題目設計顧問（Assessment Designer）
- **責任**：設計題目結構與問法，讓使用者「不覺得在做心理測驗」，但仍能穩定區分狀態
- **輸出**：題目藍圖、CN/EN 題目草案、風險提醒
- **影響範圍**：題目的「形式」與「語感」直接決定使用者第一印象
- **UI 整合點**：UI 需配合題目呈現形式，維持「問卦」體驗

#### R2：玄學敘事顧問（Esoteric Narrative Designer）
- **責任**：把「結果」講成「玄學敘事」，讓人覺得準、神秘但不空
- **輸出**：每個 outcome band 的 CN/EN 敘事文案（L1–L4 四層節奏）
- **影響範圍**：結果頁面的「敘事層次」與「語感銳利度」
- **UI 整合點**：UI 需正確呈現 R2 的 L1–L4 敘事文案

#### R3：敘事多樣化顧問（Narrative Diversity Advisor）
- **責任**：確保同一 outcome band 下的敘事有足夠多樣性，避免重複
- **輸出**：多樣化文案池、變體生成規則
- **影響範圍**：避免使用者多次使用時看到重複內容
- **UI 整合點**：UI 需能夠處理多樣化文案池

#### R4：安全一致性稽核（Safety Consistency Auditor）
- **責任**：確保輸出不會越界（不觸及醫療/法律/投資/人際決策指令）、不暴露內核（心理學）
- **輸出**：安全稽核清單、自動轉譯護欄（Rewrite Guards）、高風險 L4 固定模板
- **影響範圍**：結果頁面的「安全邊界」與「越界保護」
- **UI 整合點**：UI 需能夠識別並處理高風險結果，強制使用固定模板

#### R5：跨 Facet 一致性顧問（Cross-Facet Consistency Advisor）
- **責任**：確保不同 Facet 之間的敘事風格、語感、世界觀保持一致
- **輸出**：跨 Facet 一致性規則、隱喻兼容性檢查
- **影響範圍**：未來多 Facet 系統的整體一致性
- **UI 整合點**：UI 需能夠處理不同 Facet 的數據結構

### 5.2 Facet 設計與題目形式的相互影響

#### Facet 定義影響題目設計
- **Facet ID**：`income_expansion_pressure`（歲時農耕・倉廩觀）
- **主隱喻**：陸地農耕與倉廩
- **題目語感**：所有題目必須走「歲時、農耕、倉廩、氣機、五行」語感
- **禁用詞**：不得出現任何現代心理/商業/醫療/投資/管理術語

#### 題目形式設計原則（由 R1 負責，但 UI 必須配合）

1. **題目必須像「問卦」而非「測驗」**
   - 不得讓使用者感到「我在做心理測驗」
   - 必須維持「我在問卦」的體驗感

2. **題目覆蓋面要求**
   - 行為：使用者的行為模式
   - 狀態：使用者的當前狀態
   - 觸發：導致狀態的因素
   - 恢復：恢復能力
   - 外在壓力：外部環境影響
   - **以上皆需用玄學語境包裝**

3. **題目數量與結構**
   - 目標題數範圍：12/24/36（可調整）
   - 分段設計：題目需分成多個段落，每段有明確目的
   - 題目類型：單選/量表/情境題（可混合）

4. **CN/EN 雙語原生語感**
   - 中文題目必須像「東方命理問卦」
   - 英文題目必須像「原生英文玄學系統」，不得是逐字翻譯

5. **與 P0-4.5 分流系統的整合**
   - Stage 1：八卦定方位（使用八卦轉輪/八門卡片）
   - Stage 2：六親定物象（選擇問題領域）
   - Stage 3：萬象定歸因（具體題目回答）
   - Stage 4：命盤綜合與斷語（結果呈現）

**UI 設計必須考慮**：
- 題目呈現形式需配合各階段流程
- 題目互動方式需維持「問卦」體驗
- 題目跳轉邏輯需符合分流路由規則

### 5.3 結果頁面呈現與敘事層次的相互影響

#### 結果頁面的四層敘事結構（L1–L4）

**由 R2 設計，但 UI 必須呈現**：

- **L1（Opening）**：開場語境，設定氣象/格局/基調
  - 例如：「此時天象為大旱，倉廩微裂...」
  - UI 呈現：可作為結果頁面的標題或引言

- **L2（主敘事）**：核心狀態描述，用具體名詞（裂痕/發霉/潰決）而非抽象形容詞
  - 例如：「溝渠淤積，水流不轉，倉門緊鎖...」
  - UI 呈現：結果頁面的主要敘事區塊

- **L3（干擾/誤判）**：警示可能存在的誤判或干擾因素
  - 例如：「熱浪虛景，山林迷霧遮眼，勿誤逐鬼火...」
  - UI 呈現：可作為「需留意」區塊

- **L4（姿態/方位）**：行動建議的「姿態」，而非具體決策指令
  - 例如：「宜止息播種，先護根，守中養根，避風保本...」
  - UI 呈現：作為「建議」區塊，但語氣必須是「姿態」而非「命令」

**高風險情況的特殊處理**：
- 當 R4 觸發高風險時，L4 必須強制使用固定模板（模板 A 或模板 B）
- UI 需能夠識別並以特殊樣式呈現高風險結果

#### 結果頁面必須包含的元素

1. **卦象標題**（L1 或 Outcome Band 標題）
   - 例如：「【倉底懸空之象】」或「【雲中播種之象】」

2. **主敘事區塊**（L2）
   - 呈現核心狀態描述
   - 使用具體意象（裂痕/發霉/潰決）

3. **建議區塊**（L4）
   - 呈現行動建議的「姿態」
   - 不得出現具體決策指令（如「立刻辭職」「立即就醫」）

4. **風險鏈區塊**（Risk Chains）
   - 呈現「若未處理，可能的連鎖反應」
   - 使用玄學語境（例如：「若倉底繼續懸空，恐有塌陷之虞...」）

5. **個人化稱呼**（如果有收集姓名）
   - 例如：「張三，你的卦象顯示...」

6. **內部評分資訊**（可選，開發模式可見）
   - Severity、Attribution、Coping 等內部數值
   - 僅供開發與除錯使用，不得對外顯示

### 5.4 UI 設計與技術實現的相互影響

#### UI 技術棧（目前為原型階段）

**當前原型**（`prototype/` 目錄）：
- HTML + CSS + 原生 JavaScript
- 讀取 `domain/compiled/` 下的 compiled facet JSON
- 基本題目渲染與結果顯示

**P0-5 階段目標**：
- 建立最小可運作的 UI 串接
- 讀取 compiled facet → 顯示敘事+建議+風險鏈
- **不追求完美，只追求可測試、可調整**

#### UI 設計必須考慮的技術約束

1. **數據來源**：
   - 從 `domain/compiled/<facet_id>.compiled.v1.0.json` 讀取
   - 數據結構可能變化，UI 需具備容錯能力

2. **多語言切換**：
   - 必須支援 CN/EN 即時切換
   - 數據結構中應包含 `zh` 和 `en` 欄位

3. **動畫與視覺效果**（P0-5 階段可簡化）：
   - 開場動畫、轉場動畫（可延後）
   - 結果出現動畫（建議保留，增強體驗）
   - 五行/玄學視覺元素（可延後）

4. **使用者資訊收集**（P0-5 階段可簡化）：
   - 性別、姓名、出生年月日（可先做基本表單，完整驗證延後）

5. **分流系統整合**（P0-5 階段可簡化）：
   - 4 階段分流系統的完整實作可延後
   - 但需預留接口，確保未來可無縫整合

---

## 六、設計要求（AI 創建時必須考慮）

### 6.1 題目的「形式」設計原則

#### 必須讓使用者感覺「我在問卦」，而非「我在做測驗」

**允許的題目形式**：
- 「近一年，你覺得『俸祿的增幅』追得上『家用的潮水』嗎？」
- 「當你感到倉廩吃緊時，你會選擇加固堤防，還是開闢新田？」
- 「你最近是否感受到天象的變化，如大旱、梅雨、或微風細雨？」

**不允許的題目形式**：
- 「你最近是否感到焦慮？」（直接暴露心理學）
- 「你的收入是否能應付開銷？」（太過直白，像問卷）
- 「請選擇 1–10 分，你的壓力程度是？」（量表感太重）

#### 題目的「選項」設計原則

**單選題（推薦）**：
- 選項必須走玄學語感
- 例如：「A 追得上且有餘裕 / B 追得上但幾乎不剩 / C 開始吃緊 / D 已透支或壓力明顯影響生活」

**情境題（可選）**：
- 給一個玄學情境，讓使用者選擇反應
- 例如：「若遇大旱，你會如何應對？A 祈雨守倉 / B 引水灌溉 / C 休耕養息 / D 另闢蹊徑」

**量表題（需謹慎使用）**：
- 若必須使用量表，需用玄學包裝
- 例如：「此時天象的『燥』的程度，你覺得如何？」（而非「壓力 1–10 分」）

### 6.2 題目的「流程」設計原則

#### 與 P0-4.5 分流系統的整合

**Stage 1：八卦定方位**（必須考慮的 UI 呈現）
- 使用者看到八卦轉輪或八門卡片
- 選擇一個「方位」（例如：乾、坤、震、巽、坎、離、艮、兌）
- 此階段決定後續題目的「方向」與「重點」

**Stage 2：六親定物象**（必須考慮的 UI 呈現）
- 使用者選擇「問題領域」（例如：財運、事業、感情、健康）
- 此階段進一步細化問題範圍

**Stage 3：萬象定歸因**（具體題目回答）
- 使用者回答具體題目
- 題目內容與數量根據前兩階段的路由決定
- 此階段收集用於 scoring 的數據

**Stage 4：命盤綜合與斷語**（結果呈現）
- 顯示 L1–L4 敘事、建議、風險鏈
- 此階段是結果頁面的核心內容

**P0-5 階段實作策略**：
- 可以先做 Stage 3 + Stage 4（跳過分流，直接進入題目回答）
- 但需預留接口，確保未來可無縫整合 Stage 1 和 Stage 2

### 6.3 結果頁面的設計要求

#### 結果頁面的核心元素（必須包含）

1. **卦象標題區塊**
   - 顯示 Outcome Band 的標題（例如：「【倉底懸空之象】」）
   - 可選：顯示卦象圖示或視覺元素

2. **主敘事區塊**（L2）
   - 顯示 L2 主敘事文字
   - 必須包含具體意象（裂痕/發霉/潰決等具體名詞）

3. **建議區塊**（L4）
   - 顯示 L4 行動建議的「姿態」
   - 語氣必須是「宜／可／不宜」，而非「建議你」「你應該」

4. **風險鏈區塊**
   - 顯示「若未處理，可能的連鎖反應」
   - 使用玄學語境（例如：「若倉底繼續懸空，恐有塌陷之虞...」）

5. **個人化稱呼**（如果有收集姓名）
   - 在結果頁面開頭顯示：「[姓名]，你的卦象顯示...」

6. **內部評分資訊**（可選，開發模式可見）
   - Severity、Attribution、Coping 等內部數值
   - 僅在開發/除錯模式下顯示

#### 結果頁面的視覺設計要求

**世界級水準要求**：
- 視覺質感：必須達到世界級水準
- 配色：需符合東方命理風格（例如：墨色、金色、五行色）
- 字體：需易讀且符合玄學風格（可考慮使用書法字體或仿古字體）

**動畫效果**：
- 結果出現時需有動畫效果（例如：漸入、滑入、淡入）
- 動畫需流暢，不得卡頓
- 動畫風格需符合東方命理風格（例如：雲霧、水波、星象）

**多語言支援**：
- CN/EN 切換：必須支援即時切換，不需重新載入頁面
- 原生語感：英文版不得只是逐字翻譯，必須像原生英文玄學系統一樣自然

---

## 七、與其他系統要素的整合點

### 7.1 與 R1 題目設計的整合

**UI 需配合**：
- 題目呈現形式需符合 R1 的題目藍圖
- 題目互動方式需維持「問卦」體驗
- 題目選項需正確綁定到 scoring 邏輯

### 7.2 與 R2 敘事文案的整合

**UI 需配合**：
- 結果頁面需正確呈現 R2 的 L1–L4 敘事文案
- 需能夠處理多樣化文案（R3 的輸出）
- 需能夠根據當前語言選擇對應的 CN/EN 文案

### 7.3 與 R4 安全稽核的整合

**UI 需配合**：
- 高風險時需強制使用 R4 的固定模板
- UI 需能夠識別並處理高風險結果
- UI 需確保不會顯示任何被 R4 標記為禁用的內容

### 7.4 與 P0-4.5 分流系統的整合

**UI 需配合**：
- 需預留接口，確保未來可無縫整合 4 階段分流系統
- 當前可先做 Stage 3 + Stage 4，但需確保架構可擴展

### 7.5 與 Facet 編譯系統的整合

**UI 需配合**：
- 需能夠讀取 `domain/compiled/` 下的 compiled facet JSON
- 需能夠處理不同版本的 compiled facet（例如：v1.0、v1.1）
- 需能夠處理不同 Facet 的數據結構（例如：income_expansion_pressure、relationship_imbalance）

---

## 八、待討論與確認的事項

### 8.1 UI 設計細節（需討論）

1. **開場動畫與世界觀說明**
   - 是否在 P0-5 階段實作？
   - 若實作，動畫風格與時長如何設計？

2. **使用者資訊收集**
   - 性別、姓名、出生年月日是否在 P0-5 階段實作？
   - 若實作，表單驗證規則如何設計？

3. **結果頁面的視覺風格**
   - 具體配色方案（墨色、金色、五行色等）
   - 具體字體選擇（書法字體、仿古字體等）
   - 具體動畫效果（雲霧、水波、星象等）

4. **分流系統的實作策略**
   - 是否在 P0-5 階段實作完整 4 階段分流？
   - 若否，Stage 1 和 Stage 2 如何簡化或跳過？

### 8.2 技術實現細節（需討論）

1. **前端框架選擇**
   - 是否繼續使用原生 HTML/CSS/JS？
   - 是否需要引入前端框架（React、Vue 等）？

2. **動畫技術選擇**
   - CSS 動畫、JavaScript 動畫、或動畫庫（例如：GSAP、Lottie）？

3. **數據綁定方式**
   - 如何處理數據結構變化？
   - 如何處理多語言數據？

4. **測試策略**
   - 如何測試 UI 渲染正確性？
   - 如何測試多語言切換？
   - 如何測試高風險結果的特殊處理？

### 8.3 與其他角色的協作方式（需討論）

1. **與 R1 的協作**
   - UI 設計是否需要 R1 參與？
   - 題目呈現形式是否需要 R1 審核？

2. **與 R2 的協作**
   - 結果頁面設計是否需要 R2 參與？
   - 敘事文案的呈現方式是否需要 R2 審核？

3. **與 R4 的協作**
   - 高風險結果的 UI 呈現是否需要 R4 審核？
   - 安全邊界的 UI 檢查是否需要 R4 參與？

---

## 九、成功標準與驗收條件

### 9.1 功能完整性（最低要求）

- [ ] 能夠讀取 compiled facet JSON
- [ ] 能夠渲染題目並收集使用者回答
- [ ] 能夠計算 score 並選擇對應的 outcome band
- [ ] 能夠顯示結果頁面（包含 L1–L4 敘事、建議、風險鏈）
- [ ] 能夠支援 CN/EN 即時切換

### 9.2 使用者體驗（最低要求）

- [ ] 題目呈現維持「問卦」體驗，不讓使用者感覺在做測驗
- [ ] 結果頁面呈現維持「玄學」語感，不暴露心理學
- [ ] 所有文字（題目、結果、按鈕）支援 CN/EN 切換
- [ ] 結果出現時有基本動畫效果

### 9.3 安全性與合規性（硬性要求）

- [ ] 高風險結果正確使用 R4 固定模板
- [ ] 不會顯示任何被 R4 標記為禁用的內容
- [ ] 不會暴露內部結構（Severity、Attribution、Coping 等僅開發模式可見）

### 9.4 技術品質（最低要求）

- [ ] 代碼結構清晰，具備基本的容錯能力
- [ ] 能夠處理數據結構變化（使用 fallback 值）
- [ ] 能夠處理多語言數據（根據當前語言選擇對應欄位）

---

## 十、思考與產出期待（取代角色設定）

### 10.1 期望的思考方式

**重點不是固定角色，而是思考方式與產出期待**：

- **可以專業、抽象、跨領域**：
  - 允許跨領域思考（UI 設計、心理學、玄學、技術實現）
  - 抽象層次的概念（儀式性體驗、敘事管線、世界觀建立）
  - 專業深度的分析（數據流設計、容錯處理、多語言支援）

- **不必保守**：
  - 鼓勵創新與突破（新的 UI 互動方式、新的視覺呈現方式）
  - 允許探索未知領域（玄學與現代 UI 的結合）
  - 不限制思考框架（不強制使用傳統的 UI 設計模式）

- **不要求一次定稿**：
  - 允許迭代與改進（先做最小版本，再逐步完善）
  - 可以產生多個版本（多個 UI 設計方案並存）
  - 逐步完善（從原型到最終版本的漸進式改進）

- **可以多版本並存**：
  - 允許並行探索多個方案（多個 UI 設計方案、多個技術實現方案）
  - 不強制選擇單一方案（保留選擇空間）
  - 保留選擇空間（根據測試結果選擇最佳方案）

### 10.2 期望的產出內容

**UI 整合與結果呈現設計**：
- **UI 架構設計**：全流程 UI 模組分層、數據流設計、組件清單
- **視覺設計方案**：配色方案、字體選擇、動畫效果（可多個方案並存）
- **技術實現方案**：前端框架選擇、數據綁定方式、測試策略（可多個方案並存）
- **整合方案**：與 R1/R2/R4 的整合方式、與分流系統的整合方式、與 Facet 編譯系統的整合方式

**題目設計**：
- **題目形式設計**：題目呈現方式、選項設計、互動方式（維持「問卦」體驗）
- **題目流程設計**：與分流系統的整合、題目順序、題目分段

**敘事文案生成**：
- **敘事呈現方式**：L1–L4 的呈現方式、多樣化文案的處理方式
- **多語言支援**：CN/EN 切換方式、原生語感的實現方式

**技術實現評估**：
- **可行性評估**：技術方案的可行性、開發時間評估、維護成本評估
- **風險評估**：技術風險、數據結構變化風險、多語言支援風險

### 10.3 思考與產出的範例

**例如：UI 整合與結果呈現設計**：
- **思考方式**：從「儀式性體驗」的角度思考 UI 設計，而非傳統的「App」或「問卷」設計
- **產出期待**：提出一個「進入玄學世界 → 自我投射 → 被系統照見 → 得到指引」的完整 UI 流程設計
- **多版本並存**：可以提出多個 UI 設計方案（例如：簡約版、豐富版、動畫版），不強制選擇單一方案

**例如：題目設計**：
- **思考方式**：從「問卦」體驗的角度思考題目呈現，而非傳統的「心理測驗」設計
- **產出期待**：提出題目呈現方式、選項設計、互動方式，確保使用者感覺「我在問卦」
- **多版本並存**：可以提出多個題目形式方案（例如：單選題、情境題、量表題），根據測試結果選擇

**例如：敘事文案生成**：
- **思考方式**：從「玄學敘事」的角度思考文案呈現，而非傳統的「心理學報告」設計
- **產出期待**：提出 L1–L4 的呈現方式、多樣化文案的處理方式，確保使用者感覺「這就是玄學」
- **多版本並存**：可以提出多個敘事呈現方案（例如：簡約版、豐富版、動畫版），根據測試結果選擇

**例如：技術實現評估**：
- **思考方式**：從「可運作、可測試、可持續調整」的角度思考技術實現，而非追求完美
- **產出期待**：提出技術方案的可行性評估、開發時間評估、維護成本評估
- **多版本並存**：可以提出多個技術實現方案（例如：原生 HTML/CSS/JS、React、Vue），根據開發效率和維護成本選擇

---

## 十一、後續擴展與優化空間（不凍結，保留修改空間）

### 11.1 可延後的功能

- **完整的 4 階段分流系統實作**：可先做 Stage 3 + Stage 4，Stage 1 和 Stage 2 延後
- **開場動畫與世界觀說明**：可延後實作
- **豐富的視覺效果與動畫**：可延後實作
- **結果分享功能**：可延後實作
- **使用者資訊收集的完整驗證**：可先做基本表單，完整驗證延後

### 11.2 可持續優化的方向

- **題目呈現形式的優化**：根據使用者反饋持續優化
- **結果頁面視覺風格的優化**：根據使用者反饋持續優化
- **動畫效果的優化**：根據性能與體驗測試持續優化
- **多語言支援的優化**：根據國際市場反饋持續優化

### 11.3 未來整合點

- **與商業化功能的整合**：付費、分享激勵等（P0-6 占位）
- **與使用者研究系統的整合**：數據收集、A/B 測試等
- **與多 Facet 系統的整合**：多個構面的綜合分析

---

## 十二、附錄：相關文件索引

### 12.1 核心文件

- `charter/CHARTER.md`：專案憲章（SSOT，取代舊的 `FULL/NORTH_STAR.md`）
- `roadmap/ROADMAP.md`：專案路線圖
- `docs/governance/CURSOR_FILE_PLACEMENT_RULE.md`：文件放置規範
- `docs/governance/CURSOR_GPT_GEMINI_COLLABORATION_FRAMEWORK.md`：AI 協作框架

### 12.2 P0-3 相關文件

- `P0-3/DECISION_PACKET_P0-3.md`：P0-3 決策封包
- `P0-3/R1_METRICS_V1_EXECUTABLE_SPEC.md`：R1 敘事銳利度指標
- `P0-3/R2_METAPHOR_BOUNDARY_BANLIST_HIGHRISK_TEMPLATES.md`：R2 次隱喻邊界與高風險模板

### 12.3 P0-4.5 相關文件

- `P0-4.5/P0-4.5_FUNNEL_SYSTEM_DESIGN.md`：4 階段全像漏斗系統設計

### 12.4 P0-5 相關文件

- `P0-5/P0-5_CHARTER.md`：P0-5 階段憲章
- `P0-5/P0-5_UI_ARCHITECTURE.md`：P0-5 UI 架構設計
- `P0-5/P0-5_UI_INTEGRATION_SPEC.md`：P0-5 UI 串接規格

### 12.5 UI 設計相關文件

- `prototype/`：當前原型實作

### 12.6 AI 顧問角色相關文件

- `docs/governance/AI_ADVISORY_ROLES.md`：AI 顧問角色系統
- `prompts/gem/`：AI 顧問提示詞

### 12.7 任務包集中管理

- `docs/task_packets/README.md`：任務包集中管理說明
- `docs/task_packets/INDEX.md`：任務包索引

---

**本任務包版本**：v2.0（依照新任務包制度更新）  
**建立日期**：2026-01-10  
**更新日期**：2026-01-10  
**狀態**：ACTIVE | EDITABLE | REFERENCE（非硬性、可隨時修正）

**— 本任務包遵循 `docs/governance/CURSOR_GPT_GEMINI_COLLABORATION_FRAMEWORK.md` 與 `docs/governance/CURSOR_FILE_PLACEMENT_RULE.md` 規範。**
