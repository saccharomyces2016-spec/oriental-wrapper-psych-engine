# P0-5 UI Integration Spec（P0-5 UI 串接規格）

## 狀態
- ACTIVE
- EDITABLE
- 建立日期：2026-01-09
- 設計來源：副指揮官（GPT）提案，總指揮批准

---

## 設計核心結論（一句話版）

P0-5 UI 不是畫面，而是一條「敘事管線（Narrative Pipeline）」：
UI 只負責「轉譯 compiled facet → 人類可感知的玄學體驗」，
不承擔推論、不承擔判斷、不暴露內部結構。

---

## 整體 UI 架構哲學（世界級定位）

### UI 的角色定位
- ❌ 不是 App
- ❌ 不是問卷
- ❌ 不是心理測驗
- ✅ 而是一個：「進入玄學世界 → 自我投射 → 被系統照見 → 得到指引」的儀式性體驗

**UI 的本質是儀式引導器（Ritual Orchestrator）。**

---

## 全流程 UI 模組分層（可刪減 / 可擴充）

### Layer 0：世界觀與氣氛層（Entrance Layer）
**只出現一次，可後續替換為高規動畫，不影響主流程**

**模組**：
- 開場動畫（五行生成 / 陰陽流轉）
- 世界觀短敘事（30–60 秒）
- 語言切換（CN / EN）

**設計原則**：
- 無互動決策
- 不承載資料
- 僅負責「信任建立」

---

### Layer 1：使用者錨定層（User Anchor）
**把「人」穩定錨定進系統，供後續敘事引用**

**資料輸入**：
- 姓名（顯示用）
- 性別（語氣與隱喻微調）
- 出生年月日（目前僅收集，不解讀）

**重要規則**：
- UI 不顯示「為什麼要這些資料」
- 只說：「此為觀測之錨」

---

### Layer 2：困擾領域選擇層（Facet Gate）
**對應 compiled facet 的入口層**

**UI 表現**：
- 卡片式困境選擇
- 事業 / 關係 /（未來可擴充）
- 每張卡只有「玄學描述」，不顯示系統名

**資料行為**：
- 選擇 = facet key
- 不做任何邏輯判斷

---

### Layer 3：問題行走層（Question Walk）
**問題不是在「問你」，是在「帶你走一段路」**

**特性**：
- 問題逐題顯示（不可跳）
- 無返回鍵（避免理性校正）
- 轉場有「氣息流動」動畫

**資料**：
- 單純收集 answer payload
- UI 不解釋、不推論

---

### Layer 4：轉譯儀式層（Transition Ritual）
**系統「運算中」的象徵階段**

**表現**：
- 五行 / 月相 / 節氣動畫（依 facet）
- 不顯示 loading 百分比
- 時間固定（避免感知推論）

---

### Layer 5：結果敘事層（Narrative Stage）
**核心價值所在**

**分段呈現**：
1. 主敘事（Narrative）
2. 行動建議（Recommendations）
3. 風險鏈（Risk Chain）

**設計重點**：
- 分層展開（非一次丟出）
- 每層都可單獨動畫
- 使用姓名進行「指名敘事」

---

### Layer 6：指引與收尾層（Guidance & Exit）
**不做決策，只留下方向**

**內容**：
- 當下可行的一步
- 不承諾結果
- 不給具體指令（符合法規）

---

## UI 技術與結構設計方法

### 技術立場
- **UI = Pure Renderer**
- 所有資料來自 compiled facet JSON
- 無任何 domain logic 在 UI

### 資料流（簡化）
```
compiled_facet.json
        ↓
UI Adapter（只 mapping，不運算）
        ↓
View Components
```

### 可擴充性保證
- 新 Facet = 新 JSON + 新文案
- UI 無需改動結構

---

## 動畫與視覺策略（不鎖死）

### 原則
- 動畫 = 情緒節拍器
- 不為炫技
- 不與內容耦合

### 技術建議（非強制）
- CSS / Canvas / WebGL 皆可
- 動畫模組獨立，可整包替換

---

## 錯誤處理（玄學語感版）

| 狀況 | UI 回應 |
|------|---------|
| JSON 無法讀取 | 「卦象未成，暫不可觀」 |
| 結構錯誤 | 「此時天象紊亂，請稍後再試」 |
| 缺欄位 | 「部分徵象未顯」 |

---

## 顧問師角色需求

### 必要顧問
1. **R2｜玄學敘事顧問**
   - 世界觀文字
   - 開場與轉場語感

2. **R5｜CN / EN 原生語感顧問**
   - 雙語敘事一致性
   - 避免文化錯位

### 可選（後期）
3. **UX Motion 顧問**（非內容）
   - 動畫節奏審核

4. **視覺符號顧問**
   - 五行 / 月相符號語義校正

---

## 交付結論摘要

- ✅ P0-5 UI 是敘事管線，不是介面
- ✅ 所有模組皆：可刪、可替、可版本化
- ✅ UI 不承擔任何判斷責任
- ✅ 世界觀感 > 操作效率
- ✅ 完全符合 North Star 與治理約束

---

## 狀態
- ACTIVE
- EDITABLE
- 必須納入 P0-5 任務包



