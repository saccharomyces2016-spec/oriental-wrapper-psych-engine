# P0-5.7 最小世界觀設計任務包

**任務編號**：P0-5.7  
**任務名稱**：最小世界觀設計（Minimal Worldview Design）  
**建立日期**：2026-01-11  
**狀態**：ACTIVE  
**優先級**：P0（阻塞功能實作）

---

## 一、任務概述

### 1.1 任務目標

為系統設計「最小世界觀框架」，確定 Stage 1-4 的互動方式和基本視覺風格基調，為後續功能實作提供設計約束。

### 1.2 任務性質

**設計任務**（非實作任務）

**輸出交付物**：
- 最小世界觀設計文檔（1-2 頁）
- Stage 1-4 互動方式定義
- 基本視覺風格基調定義

### 1.3 任務重要性

**阻塞關係**：
- 阻塞：P0-5.6 功能實作（需要互動方式定義）
- 被阻塞：無（可以立即開始）

**理由**：
- Stage 1-4 的具體互動方式會影響功能實作
- 需要在功能實作前確定基本設計約束
- 避免後期大幅調整

---

## 二、核心原則（必須遵守）

### 2.1 二元架構原則（核心約束）

**「後端科學極大化，前端玄學極致化」**

這是系統的核心架構原則，必須嚴格遵守：

#### 後端（不可見層）：
- 使用現代心理學與相關科學系統作為核心引擎
- 結構化的數據處理（問卷、評分、風險鏈）
- 可推導的計算邏輯

#### 前端（可見層）：
- 使用者只感知到「完整的玄學系統」
- 使用五行、八卦等東方玄學元素作為表層呈現
- **關鍵**：五行、八卦只能在表層，不能污染現代科學的計算結果

### 2.2 數據流原則（關鍵機制）

**⚠️ 核心機制：雙重計算，結果一致**

**關鍵理解**：
- **玄學系統（五行、八卦）也會經過完整的計算**
- **玄學計算結果必須與科學計算結果一致**
- **最終呈現給使用者的是科學計算的正確結果，但以經過確實計算的玄學結果的模樣呈現**

流程說明：
1. **科學計算路徑**（內部驗證基準）：使用現代科學方法計算（心理學評估、風險分析等）
2. **玄學計算路徑**（表層呈現系統）：使用玄學系統計算（五行、八卦、易經邏輯等）
3. **結果驗證與一致性檢查**：確保兩種計算結果一致，科學計算作為驗證基準
4. **表層呈現**：使用玄學計算結果的模樣呈現給使用者（但已驗證與科學計算一致）

**關鍵原則**：
- 玄學系統不是裝飾，而是真正的計算系統
- 科學計算和玄學計算必須同時進行
- 兩種結果必須一致，科學計算作為驗證基準
- 一致性優先：如果出現不一致，優先以科學計算結果為準

**禁止事項**：
- ❌ 不得讓玄學計算結果影響科學計算結果
- ❌ 不得為了「看起來像玄學」而犧牲結果的正確性
- ❌ 不得向使用者暴露科學計算過程
- ❌ 不得在科學計算階段使用玄學邏輯（科學計算必須保持純科學）

**允許事項**：
- ✅ 玄學系統有完整的計算邏輯
- ✅ 科學計算和玄學計算同時進行
- ✅ 兩種計算結果必須一致
- ✅ 呈現給使用者的是玄學計算結果（但已驗證與科學計算一致）
- ✅ 內部保留雙重計算機制和驗證邏輯（供審計與維護）

### 2.3 視覺解耦原則

根據 UMIP 設計，系統支持「視覺解耦」：
- `theme_config` 機制允許後期調整視覺
- 功能邏輯與視覺呈現理論上可分離
- 但**互動方式**需要提前確定（因為影響功能實作）

---

## 三、系統架構背景

### 3.1 已確定的系統架構（P0-5.5 決策）

根據 `P0-5.5_ELEMENT_SELECTION_DECISION.md`，系統已確定採用：

**System Canon：易經矩陣系統（I Ching Matrix System）**

**三層架構**：
1. **結構層（The Skeleton）**：八卦 / 六十四卦
   - 角色：狀態空間、人生構面座標、最終局勢符號
   - 輸出：`hexagram_id`（0-63 或 1-64）

2. **動態層（The Blood）**：五行生剋
   - 角色：衝突與修復的解釋邏輯
   - 輸出：`interaction_tags`（generate / control / drain 等）

3. **運算層（The Engine）**：雙軌制（Root × Flow）
   - Track A：先天本命（Root / Nature）- DOB → Root Element
   - Track B：後天流年（Flow / Nurture）- Stage 1-3 → Hexagram
   - Collision：`Result = f(Root, Flow)`

### 3.2 Stage 1-4 映射（已確定）

根據 P0-5.5 決策，Stage 1-4 的映射已確定：

| Stage | 名稱 | UI 隱喻 | 功能 | 狀態 |
|-------|------|---------|------|------|
| **Stage 1** | 八卦定方位 | 先天八卦盤（Primordial Bagua） | 分流選擇（Facet Space 定位） | 隱喻已確定，需設計互動方式 |
| **Stage 2** | 五行定物象 | 五行羅盤（Elemental Compass） | 符碼選擇（顯性特徵 / 投射物） | 隱喻已確定，需設計互動方式 |
| **Stage 3** | 爻變定歸因 | 鑄爻（Casting Lines） | 量表權重 → 變爻觸發 → 卦象轉移 | 隱喻已確定，需設計互動方式 |
| **Stage 4** | 卦象顯影 | 卦象顯影（Hexagram Visualization） | 結果呈現（L1-L4 分層） | 隱喻已確定，需設計互動方式 |

---

## 四、現有系統背景

### 4.1 當前 Facet：income_expansion_pressure

**定義**：薪資增速追不上家庭開銷所產生的壓力，以及對「第二收入」的驅動與可行性狀態。

**當前狀態**：
- 題目、評分、敘事、建議、風險鏈已建立
- 使用「歲時農耕・倉廩觀」作為 user-facing 隱喻
- 數據結構符合 UMIP v1.0

**注意**：
- 當前 Facet 使用農耕隱喻，但新的系統架構要求使用易經矩陣系統
- 需要在世界觀設計中考慮如何整合

### 4.2 現有 UI 實作（P0-5 已完成）

**已實作的 UI 組件**：
- Stage 2：Radial Compass（放射狀羅盤）- 當前使用通用符碼概念
- Stage 3：Projection（投射問題）- 當前使用通用問題框架
- Stage 4：Results（結果呈現）- L1-L4 分層呈現

**需要調整的部分**：
- Stage 2：從通用符碼調整為五行羅盤
- Stage 3：從通用問題調整為鑄爻
- Stage 4：從通用結果調整為卦象顯影
- Stage 1：需要新建（當前未實作）

### 4.3 數據結構（UMIP v1.0）

**當前數據結構**：
- `compiled_facet.json` 格式
- 包含 `stage2_compass`、`stage3_projection`、`stage4_results`
- 支持 `theme_config`（視覺配置）
- 支持 `i18n`（CN/EN 雙語）

**計劃演進**（P0-5.6）：
- UMIP v1.0 → v1.1
- 新增 `dob`、`root_element`、`hexagram_id` 等欄位

---

## 五、運算邏輯背景

### 5.1 後端科學計算邏輯（不可見層）

**計算流程**：
1. **題目回答收集**：使用者回答 Stage 1-3 的題目
2. **評分計算**：使用科學方法計算分數（心理學評估）
3. **風險分析**：分析風險等級（HIGH / MEDIUM / LOW）
4. **結果生成**：生成敘事、建議、風險鏈

**關鍵原則**：
- 所有計算使用現代科學方法
- 不依賴五行/八卦邏輯
- 可推導、可審計

### 5.2 雙重計算邏輯（科學 + 玄學）

**⚠️ 核心機制：雙重計算，結果一致**

**雙重計算流程**：
1. **科學計算路徑**（驗證基準）：
   - 使用者回答題目
   - 系統使用現代科學方法計算
   - 得到科學計算結果（分數、風險等級等）

2. **玄學計算路徑**（表層呈現系統）：
   - 使用者回答題目（與科學計算路徑相同）
   - 系統使用玄學系統計算（五行、八卦、易經邏輯等）
   - 得到玄學計算結果（卦象、五行屬性等）
   - **玄學系統有完整的計算邏輯，不是簡單的「映射」或「包裝」**

3. **結果驗證與一致性檢查**（內部處理）：
   - 比較兩種計算結果
   - 確保玄學計算結果與科學計算結果一致
   - 如果不一致，調整玄學計算邏輯或參數
   - **關鍵**：玄學計算結果必須符合科學計算結果

4. **表層呈現**（使用者看到）：
   - 呈現給使用者的是：**玄學計算結果的模樣**
   - 但這個結果已經過驗證，與科學計算結果一致

**玄學計算系統設計**：
- 需要建立完整的玄學計算引擎（五行、八卦、易經邏輯）
- 需要建立「科學結果 ↔ 玄學結果」驗證機制
- 需要建立調整機制（當不一致時，調整玄學計算參數）
- 驗證機制為內部資料，不向使用者暴露
- 驗證機制需要可審計、可維護

### 5.3 雙軌運算機制

**Track A：先天本命（Root / Nature）**
- 輸入：DOB（出生年月日）- 選填
- 計算：DOB → Root Element（五行）
- 容錯：若缺 DOB，使用 Stage 1-3 的行為資料推導「後天優勢屬性」

**Track B：後天流年（Flow / Nurture）**
- 輸入：Stage 1-3 的互動選擇與問卷量表
- 計算：Stage 1-3 → Hexagram + Changing Line
- 決策權：最終建議、風險鏈、行動方案的決策權以 Flow 為準

**Collision（碰撞運算）**：
- 核心形式：`Result = f(Root, Flow)`
- 用途：解釋「為何你是這樣的人（Root）」在「此刻遭遇這種局勢（Flow）」時會出現此壓力與風險走向

---

## 六、設計要求

### 6.1 需要確定的內容（必須）

#### 6.1.1 Stage 1-4 的互動方式

**Stage 1：先天八卦盤**
- 問題：旋轉式還是點選式？
- 問題：如何呈現八個卦象？
- 問題：如何處理「中宮/混沌」選項？
- 問題：單選還是多選？（根據設計：單選）

**Stage 2：五行羅盤**
- 問題：圓形布局還是其他布局？
- 問題：如何呈現五個元素（金、木、水、火、土）？
- 問題：用戶如何選擇（點選、拖拽、其他）？
- 問題：選擇數量限制（根據設計：多選 2-3 個）

**Stage 3：鑄爻**
- 問題：如何呈現「鑄爻」的過程？
- 問題：如何呈現「變爻觸發」？
- 問題：如何呈現「卦象轉移」？
- 問題：用戶互動方式（點選、拖拽、其他）？

**Stage 4：卦象顯影**
- 問題：如何呈現卦象（六十四卦之一）？
- 問題：如何呈現 L1-L4 的分層揭示？
- 問題：如何呈現 Root 和 Flow 的碰撞結果？
- 問題：互動方式（自動揭示、用戶觸發、其他）？

#### 6.1.2 基本視覺風格基調

**整體風格**：
- 古典/現代？
- 簡約/豐富？
- 暗色/亮色？

**顏色基調**：
- 主色調方向（不需完整調色板）
- 輔色調方向

**字體選擇**：
- 主字體方向（不需詳細排版）
- 輔字體方向

**基本布局方向**：
- 整體布局方向（不需詳細設計稿）

### 6.2 不需要深入的內容（後期處理）

- 詳細的視覺設計稿
- 完整的顏色調色板
- 詳細的字體排版
- 完整的動畫效果
- 詳細的交互細節
- 完整的用戶體驗設計

---

## 七、設計約束

### 7.1 技術約束

1. **必須支持 CN/EN 雙語**
   - 設計需要考慮雙語切換
   - 不得有語言特定的設計元素

2. **必須支持 RWD（響應式設計）**
   - 桌面端、平板端、手機端都要考慮
   - 互動方式需要在不同設備上可用

3. **必須支持 `theme_config` 機制**
   - 設計需要考慮可配置性
   - 不得硬編碼視覺元素

### 7.2 原則約束

1. **前端玄學極致化**
   - 使用者必須感知為「完整玄學系統」
   - 不得暴露科學計算過程

2. **視覺解耦**
   - 功能邏輯與視覺呈現分離
   - 但互動方式需要確定

3. **數據驅動**
   - 設計必須支持數據驅動的視覺
   - 不得硬編碼內容

---

## 八、交付物要求

### 8.1 最小世界觀設計文檔（主要交付物）

**格式**：Markdown 文件

**內容必須包括**：

1. **Stage 1-4 互動方式定義**
   - 每個 Stage 的具體互動方式
   - 每個 Stage 的視覺呈現方向
   - 每個 Stage 的用戶操作流程

2. **基本視覺風格基調定義**
   - 整體風格方向
   - 顏色基調方向
   - 字體選擇方向
   - 基本布局方向

3. **設計原則說明**
   - 如何遵守「後端科學極大化，前端玄學極致化」
   - 如何確保五行/八卦只在表層
   - 如何確保不污染科學計算結果

4. **設計約束說明**
   - 技術約束
   - 原則約束
   - 其他約束

### 8.2 可選交付物

- 簡單的示意圖（可選）
- 參考案例（可選）
- 設計方向說明（可選）

---

## 九、相關文件索引

### 9.1 核心決策文件

- **P0-5.5 決策文件**：`P0-5.5_ORIENTAL_ELEMENT_CONSULTATION/P0-5.5_ELEMENT_SELECTION_DECISION.md`
  - 系統架構定義
  - Stage 1-4 映射
  - 雙軌運算機制

- **P0-5 UMIP 設計**：`P0-5/P0-5_UMIP_CLOSURE_REPORT.md`
  - UMIP 架構原則
  - 視覺解耦機制
  - Stage 1-4 規格

### 9.2 背景資料文件

- **CHARTER**：`charter/CHARTER.md`
  - 終極目標
  - 核心原則

- **P0-4.5 系統設計**：`P0-4.5/P0-4.5_FUNNEL_SYSTEM_DESIGN.md`
  - 4 階段系統設計

- **P0-5.5 分析文件**：`P0-5.5_ORIENTAL_ELEMENT_CONSULTATION/P0-5.5_WORLDVIEW_VS_FUNCTIONALITY_ANALYSIS.md`
  - 世界觀 vs 功能實作分析

### 9.3 當前任務文件

- **任務包**：`P0-5.7_WORLDVIEW_DESIGN/P0-5.7_TASK_PACKET.md`（本文件）

---

## 十、任務狀態

**當前狀態**：ACTIVE  
**下一步行動**：將本任務包提供給顧問師/設計師，開始最小世界觀設計

---

**文件版本**：v1.0  
**最後更新**：2026-01-11
