# P0-4.5｜題目流程與分流系統設計（Question Flow & Funnel System Design）

## 狀態
- ACTIVE
- EDITABLE
- 建立日期：2026-01-10
- 優先級：P0（立即處理，阻斷主線）

---

## 任務性質
**設計決策任務**（非技術實作、非內容創作，但影響後續所有開發）

---

## Goal (One sentence)
設計一個能夠「涵蓋全人類、全年齡、全困擾、全困境」的多階段分流選擇系統，確定題型設計策略，為未來的八卦盤界面設計奠定基礎，確保使用者不會覺得「沒有符合我困境的選項」。

---

## 為什麼現在需要這個任務

### 1. 終極目標的絕對要求
**要求**：終極目標明確要求「能夠適用於全世界、全文化、全人類、全年齡、全性別、全困擾、全問題場景」

**現狀問題**：
- 當前只有單一 Facet 的題目設計（`income_expansion_pressure`、`relationship_imbalance`）
- 沒有跨 Facet 的分流機制
- 使用者無法找到符合他們困境的選項

**影響**：
- 如果沒有分流系統，無法達成終極目標
- **這是阻斷性問題，不是優化問題**

### 2. 題型設計的關鍵影響
**影響**：
- 題型選擇（單選、複選、多選、符號選擇）會影響題目的設計方法論
- 題型選擇會影響 UI 架構的設計
- 如果 P0-5 使用錯誤的題型，後續引入八卦盤時可能需要重寫

**現狀問題**：
- P0-5 的題型選擇尚未明確
- 雖然有題型可擴充性設計，但沒有明確的策略

**影響**：
- **這是架構決策，不是細節優化**

### 3. 八卦盤界面的明確規劃
**規劃**：終極目標明確提到「八卦盤、陰陽兩極」等界面設計，後續會使用類似八卦盤的風格作為題目選擇的互動過程

**現狀問題**：
- 八卦盤界面的具體設計尚未確定
- 八卦盤界面如何與題型設計整合尚未明確

**影響**：
- 如果現在不考慮，後續可能需要大幅修改
- **這是未來規劃，不是臨時需求**

---

## Non-goals (Hard)
- ❌ 不實作 UI（這是設計任務，不是實作任務）
- ❌ 不設計具體的題目內容（這是流程設計，不是題目設計）
- ❌ 不優化視覺設計（這是架構設計，不是視覺設計）
- ❌ 不實作八卦盤界面（這是規劃任務，不是實作任務）

---

## Deliverables (必須交付)

### 1. 多階段分流系統設計
- **文件**：`P0-4.5/P0-4.5_FUNNEL_SYSTEM_DESIGN.md`
- **內容**：
  - **階段 1：全人類困境分類**（如何涵蓋所有可能的困境）
    - 如何分類「全人類、全年齡、全困擾、全困境」
    - 如何確保使用者不會覺得「沒有符合的選項」
    - 如何設計「其他」選項（如果需要的話）
  - **階段 2：困境細化選擇**（如何收斂到特定困境）
    - 如何在階段 1 的基礎上進一步細化
    - 如何確保細化過程符合玄學語感
  - **階段 3：Facet 選擇**（如何選擇對應的 Facet）
    - 如何將困境映射到對應的 Facet
    - 如何處理一個困境可能對應多個 Facet 的情況
  - **階段 4：題目問答**（如何在選定的 Facet 上進行問答）
    - 如何在選定的 Facet 上進行題目問答
    - 如何確保問答過程符合玄學語感
  - **階段 5：結果呈現**（如何呈現結果）
    - 如何在結果呈現時保持玄學語感
    - 如何處理跨 Facet 的結果呈現

### 2. 題型設計策略
- **文件**：`P0-4.5/P0-4.5_QUESTION_MODALITY_STRATEGY.md`
- **內容**：
  - **不同階段應該使用什麼題型**
    - 階段 1（困境分類）應該使用什麼題型（單選、複選、符號選擇等）
    - 階段 2（困境細化）應該使用什麼題型
    - 階段 3（Facet 選擇）應該使用什麼題型
    - 階段 4（題目問答）應該使用什麼題型（單選、複選、多選、符號選擇等）
  - **如何為未來的八卦盤界面設計題型**
    - 八卦盤界面在哪些階段使用
    - 八卦盤界面如何與題型設計整合
    - 八卦盤界面的數據結構要求
  - **如何確保題型選擇不會讓使用者覺得「沒有符合的選項」**
    - 如何設計「涵蓋全人類」的選項
    - 如何處理邊緣情況
    - 如何設計「其他」選項（如果需要的話）

### 3. 八卦盤界面整合規劃
- **文件**：`P0-4.5/P0-4.5_BAGUA_INTERFACE_INTEGRATION_PLAN.md`
- **內容**：
  - **八卦盤界面在哪些階段使用**
    - 階段 1：困境分類（是否使用八卦盤）
    - 階段 2：困境細化（是否使用八卦盤）
    - 階段 3：Facet 選擇（是否使用八卦盤）
    - 階段 4：題目問答（是否使用八卦盤、陰陽兩極等）
  - **八卦盤界面如何與題型設計整合**
    - 八卦盤界面的數據結構要求
    - 八卦盤界面如何映射到題型選擇
    - 八卦盤界面如何收集答案
  - **八卦盤界面的設計原則**
    - 如何保持玄學語感
    - 如何確保使用者體驗
    - 如何支持未來的擴充

### 4. 題目設計方法論更新
- **文件**：`P0-4.5/P0-4.5_QUESTION_DESIGN_METHODOLOGY.md`
- **內容**：
  - **更新題目設計方法論，支持多階段分流系統**
    - 如何在多階段分流系統中設計題目
    - 如何確保題目符合玄學語感
    - 如何確保題目能夠「涵蓋全人類」
  - **如何設計「涵蓋全人類」的題目**
    - 如何分類「全人類、全年齡、全困擾、全困境」
    - 如何設計選項，確保使用者不會覺得「沒有符合的選項」
  - **如何確保題目不會讓使用者覺得「沒有符合的選項」**
    - 如何設計選項的覆蓋面
    - 如何處理邊緣情況
    - 如何設計「其他」選項（如果需要的話）

---

## Success Criteria (成功定義)

### 必須達成
- ✅ 設計出能夠「涵蓋全人類、全年齡、全困擾、全困境」的分流系統
- ✅ 確定不同階段應該使用的題型
- ✅ 設計出能夠支持未來八卦盤界面的題型結構
- ✅ 確保題目設計方法論能夠支持分流系統
- ✅ 副指揮官和顧問師都理解設計意圖和終極目標

### 品質要求
- ✅ 分流系統必須符合「純玄學體驗」要求
- ✅ 分流系統必須支持未來的八卦盤界面
- ✅ 分流系統必須確保使用者不會覺得「沒有符合的選項」

---

## 依賴關係
- **前置任務**：
  - ✅ P0-4：Facet Portability（已完成，提供 `relationship_imbalance` 的完整輸出）
- **後續任務**：
  - P0-5：最小 UI 串接（需要此任務的設計結果）

---

## 顧問師需求

### 必備顧問
1. **R1：題目設計顧問**（必備）
   - 設計多階段分流系統的題目
   - 設計不同階段的題型選擇策略
   - 設計「涵蓋全人類」的題目選項

2. **R2：玄學敘事顧問**（必備）
   - 設計分流系統的玄學語感
   - 設計八卦盤界面的敘事語言
   - 設計分流過程中的引導語

3. **副指揮官**（必備）
   - 協調各顧問師的輸出
   - 確保設計符合終極目標
   - 審核顧問師的輸出

### 可選顧問
4. **R3：行動建議顧問**（可選）
   - 設計分流過程中的引導語

---

## 約束條件

### 硬性限制
- 不得違背終極目標（`FULL/NORTH_STAR.md`）
- 必須符合「純玄學體驗」要求（ADR_0002）
- 必須支持未來的八卦盤界面設計
- 必須確保使用者不會覺得「沒有符合的選項」

### 設計原則
- **數據層與呈現層分離**：分流系統的數據結構獨立於 UI 呈現方式
- **可擴充性保證**：設計必須支持未來的擴充（如八卦盤界面）
- **玄學語感優先**：所有設計必須符合玄學語感，不暴露內部結構

---

## 風險與緩解

### 風險 1：設計過於複雜，影響 MVP 完成
**緩解**：
- 先設計核心分流邏輯，不設計過於複雜的細節
- 確保設計結果可以逐步實作，不需要一次性完成
- 明確區分「必須實作」和「可以後續優化」

### 風險 2：設計與 P0-5 的目標衝突
**緩解**：
- 確保設計結果與 P0-5 的「最小 UI 串接」目標不衝突
- 可以在 P0-5 先實作基本的分流邏輯，後續再優化
- 保持設計的靈活性，支持未來調整

### 風險 3：設計不符合終極目標
**緩解**：
- 在任務包中包含完整的終極目標說明
- 要求副指揮官和顧問師明確理解終極目標
- 設計過程中持續檢查是否符合終極目標

---

## 狀態
- ACTIVE
- EDITABLE
- 優先級：P0（立即處理，阻斷主線）
- 建立日期：2026-01-10



