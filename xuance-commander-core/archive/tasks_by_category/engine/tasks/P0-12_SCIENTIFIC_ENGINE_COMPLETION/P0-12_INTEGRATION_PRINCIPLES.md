# P0-12 整合工作原則

**建立日期**：2026-01-12  
**文件狀態**：WORKING DOCUMENT（不鎖定，可回滾）

---

## 一、版本優先級原則

### 1.1 P0 版本為最新版本

**明確原則**：
- ✅ **P0 開頭的任務都是最新版本檔案**
- ✅ **當有制度衝突時，以 P0 版本為準**
- ✅ **新版本的制度為準則**

### 1.2 舊版本資料的定位

**明確說明**：
- ✅ **舊版本資料用於提取和整合**
- ✅ **以新版本的制度為準**
- ✅ **盡量 100% 提取舊版本內容**
- ✅ **後續會在顧問團一步一步改良**

---

## 二、新版本制度（P0 版本）

### 2.1 新版本結構

**領域數量**：8 個領域（來自 `P0-12_IMPLEMENTATION_SPEC_FINAL.md`）

**文件結構**（每個領域需要 5 個核心文件）：
1. `domain/questions/<facetId>.questions.v1.0.json` - 題目定義
2. `domain/facets/<facetId>.scoring.v1.0.json` - 計分邏輯
3. `domain/narratives/<facetId>.narr.v1.0.json` - 敘事文本
4. `domain/recommendations/<facetId>.reco.v1.0.json` - 建議文本
5. `domain/riskchains/<facetId>.risk.v1.0.json` - 風險鏈文本

### 2.2 新版本目前狀態

**已建立**：
- ✅ 新版本的制度結構（8 個領域、5 個核心文件）

**尚未完成**：
- ❌ 具體完整的題目
- ❌ 分數計算方式
- ❌ 相關公式

**說明**：這些內容需要從舊版本提取，並在顧問團協助下一步一步改良。

---

## 三、舊版本資料（Legacy）

### 3.1 舊版本內容

**主題數量**：10 個主題

**包含內容**：
- 題目資料（questionBank.v1.json）
- 分數計算邏輯（scorer.js）
- 結果呈現模板（buildGuidance.js、guidancePrinciples 等）

### 3.2 舊版本資料的作用

**用途**：
- ✅ **提取來源**：從舊版本提取可用內容
- ✅ **補充新版本**：填入新版本的結構中
- ✅ **100% 提取目標**：盡量完整提取所有可用內容

---

## 四、整合工作原則

### 4.1 整合準則

1. **以新版本制度為準**：
   - 新版本的 8 個領域結構為準則
   - 新版本的 5 個核心文件結構為準則

2. **從舊版本提取內容**：
   - 提取舊版本的題目資料
   - 提取舊版本的分數計算邏輯
   - 提取舊版本的結果呈現內容

3. **100% 提取目標**：
   - 盡量完整提取所有可用內容
   - 不遺漏重要資料

4. **後續改良**：
   - 初步整合後，在顧問團協助下一步一步改良
   - 逐步完善題目、分數計算、公式等

### 4.2 整合流程

1. **識別舊版本內容**：
   - 識別舊版本 10 個主題的內容
   - 識別對應的新版本 8 個領域

2. **提取和轉換**：
   - 提取舊版本題目 → 轉換為新版本 questions 結構
   - 提取舊版本計算邏輯 → 轉換為新版本 scoring 結構
   - 提取舊版本呈現內容 → 轉換為新版本 narratives/recommendations/riskchains 結構

3. **整合到新版本結構**：
   - 依照新版本的制度整合
   - 確保符合新版本的結構要求

4. **後續改良**：
   - 在顧問團協助下逐步改良和完善

---

## 五、當前整合狀態

### 5.1 新版本 8 個領域

1. `chronic_depletion` - 能量與承載狀態
2. `chronic_alertness` - 生存警戒與安全
3. `fear_based_stability` - 停滯與改變阻力
4. `hyper_responsibility` - 角色與責任過載
5. `identity_diffusion` - 自我認同與方向
6. `loss_of_agency` - 行動力與主控感
7. `meaning_vacuum` - 價值與動機
8. `suppressed_needs` - 需求與情感表達

### 5.2 整合狀態

**已整合（部分）**：
- `chronic_depletion` - 3/5 文件（narratives, recommendations, riskchains）

**待整合**：
- 7 個領域需要完整整合（5/5 文件）
- `chronic_depletion` 需要補完（questions, scoring）

---

**文件狀態**：WORKING DOCUMENT（不鎖定，可回滾）  
**最後更新**：2026-01-12  
**狀態**：✅ **原則確認完成**
