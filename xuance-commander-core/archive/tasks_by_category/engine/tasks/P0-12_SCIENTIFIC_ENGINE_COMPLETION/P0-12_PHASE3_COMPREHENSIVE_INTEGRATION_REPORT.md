# P0-12 階段三步驟四：100% 提取與徹底整合報告

**建立日期**：2026-01-12  
**任務階段**：階段三步驟四  
**文件狀態**：WORKING DOCUMENT（不鎖定，可回滾）

---

## 一、任務概述

### 1.1 任務目標

確保舊有檔案內容進行 100% 提取，並在符合新版本架構的前提下進行徹底整合。

### 1.2 核心原則

- ✅ **100% 提取目標**：確保舊有檔案內容 100% 提取
- ✅ **符合新版本架構**：所有整合必須符合新版本網頁架構、世界觀、需求
- ✅ **徹底整合**：不遺漏任何可用內容
- ✅ **資料不鎖定、可回滾**：所有資料保持不鎖定、可回滾狀態

---

## 二、未提取內容識別

### 2.1 根據資料盤點結果

根據步驟一（完整資料盤點）的結果，以下內容尚未提取和整合：

#### 2.1.1 Legacy 題庫主題（9+ 個主題未整合）

**已整合主題**（1 個）：
- ✅ `chronic_depletion` - 已整合（設計完成，檔案已寫入系統）

**未整合主題**（9+ 個）：
1. ❌ `hyper_responsibility`（過度責任）
2. ❌ `fear_based_stability`（恐懼驅動的穩定）
3. ❌ `loss_of_agency`（主控感流失）
4. ❌ `social_comparison`（社會比較壓力）
5. ❌ `suppressed_needs`（需求壓抑）
6. ❌ `identity_diffusion`（自我模糊）
7. ❌ `emotional_permeability`（情緒滲透）
8. ❌ `avoidance_coping`（逃避型因應）
9. ❌ 其他藍圖中的主題（如 `chronic_alertness`、`meaning_vacuum`、`self_erosion`、`unprocessed_loss`）

**整合完成度**：1 / 10+ = **約 10%**

---

#### 2.1.2 階段一實際檔案整合（0% 完成）

**待整合內容**：
- ❌ Legacy 題目轉換為現有系統格式
- ❌ Legacy 計分邏輯轉換為 Python 模組

**狀態**：
- 設計規格已完成（階段一）
- 實際檔案整合尚未執行

---

### 2.2 提取優先級評估

#### 2.2.1 高優先級

**其他主題整合**（9+ 個主題）：
- **優先級**：🟡 **高**
- **原因**：100% 提取目標的核心部分
- **工作量**：大（每個主題需要轉換 5 個檔案：questions、scoring、narratives、recommendations、riskchains）
- **執行方式**：按照階段二-2 的轉換規範執行

---

#### 2.2.2 中高優先級

**階段一實際檔案整合**：
- **優先級**：🟡 **中高**
- **原因**：設計規格已完成，需要實際執行
- **工作量**：大（需要轉換 10+ 個主題的題目和計分邏輯）
- **執行方式**：按照階段一的設計規格執行

---

## 三、提取和轉換計劃

### 3.1 其他主題整合計劃

#### 3.1.1 整合範圍

**需要整合的主題**（9+ 個）：
- `hyper_responsibility`
- `fear_based_stability`
- `loss_of_agency`
- `social_comparison`
- `suppressed_needs`
- `identity_diffusion`
- `emotional_permeability`
- `avoidance_coping`
- 其他藍圖中的主題（如需要）

#### 3.1.2 整合規範

**參考規範**：
- 階段二-2 的轉換規範（`chronic_depletion` 範例）
- 階段一的設計規格
- 現有系統結構（`stress_recovery` 範例）

**轉換要求**：
1. **語境轉換**：心理學 → 玄學
2. **結構轉換**：動態 → 靜態
3. **符合系統規範**：不包含 `meta` 欄位，結構符合現有系統

#### 3.1.3 每個主題需要的檔案

每個主題需要生成 5 個檔案：
1. `domain/questions/<theme>.questions.v1.0.json`
2. `domain/facets/<theme>.scoring.v1.0.json`
3. `domain/narratives/<theme>.narr.v1.0.json`
4. `domain/recommendations/<theme>.reco.v1.0.json`
5. `domain/riskchains/<theme>.risk.v1.0.json`

以及對應的 manifest 文件：
6. `domain/manifests/<theme>.v1.0.json`

#### 3.1.4 工作量估算

- 每個主題的轉換工作量：數小時
- 9+ 個主題的總工作量：非常大
- 建議執行方式：分階段執行或建立任務包給顧問團隊

---

### 3.2 階段一實際檔案整合計劃

#### 3.2.1 整合範圍

**待整合內容**：
- Legacy 題目轉換（`questionBank.v1.json`）
- Legacy 計分邏輯轉換（`scorer.js`）

#### 3.2.2 整合規範

**參考規範**：
- 階段一的設計規格（`P0-12_IMPLEMENTATION_SPEC_FINAL.md`）
- 現有系統結構

**轉換要求**：
1. JSON 結構符合現有系統 schema
2. 欄位對應正確
3. Python 計算核心實現

#### 3.2.3 工作量估算

- 工作量：大（需要轉換 10+ 個主題）
- 建議執行方式：按照階段一的設計規格執行

---

## 四、整合到系統

### 4.1 整合流程

1. **轉換檔案**：
   - 按照規範轉換 Legacy 內容
   - 驗證轉換結果

2. **寫入系統**：
   - 將轉換後的檔案寫入 `domain/` 目錄
   - 更新 manifest 文件

3. **驗證整合**：
   - 驗證檔案結構
   - 驗證內容完整性
   - 驗證系統一致性

### 4.2 整合標準

- ✅ 所有檔案符合現有系統規範
- ✅ 所有檔案通過結構驗證
- ✅ 所有檔案通過內容驗證
- ✅ 所有檔案不包含 `meta` 欄位
- ✅ 語境轉換正確（心理學 → 玄學）

---

## 五、執行建議

### 5.1 執行方式選擇

由於步驟四的工作量非常大（9+ 個主題，每個主題需要轉換多個檔案），建議採用以下方式之一：

#### 方案 A：建立任務包給顧問團隊

**優點**：
- ✅ 可以系統性完成所有主題的整合
- ✅ 顧問團隊可以專注處理轉換工作
- ✅ 可以確保轉換品質

**缺點**：
- ⚠️ 需要等待顧問團隊處理時間
- ⚠️ 需要完整的任務包和背景資料

#### 方案 B：分階段執行

**優點**：
- ✅ 可以逐步完成整合
- ✅ 可以根據優先級選擇主題

**缺點**：
- ⚠️ 執行時間較長
- ⚠️ 需要持續跟進

#### 方案 C：直接執行（如果資源充足）

**優點**：
- ✅ 可以立即開始執行
- ✅ 執行效率高

**缺點**：
- ⚠️ 工作量非常大
- ⚠️ 可能需要大量時間

---

### 5.2 推薦執行方式

**推薦：方案 A（建立任務包給顧問團隊）**

**理由**：
1. 工作量非常大（9+ 個主題，每個主題需要多個檔案）
2. 需要系統性和一致性
3. 顧問團隊已經有相關經驗（階段二-2 的成功範例）
4. 可以確保轉換品質

**執行步驟**：
1. 建立完整的任務包（包含所有背景資料）
2. 明確轉換規範和範例
3. 明確交付要求
4. 交付給顧問團隊執行

---

## 六、當前狀態總結

### 6.1 已完成工作

- ✅ 資料盤點完成（步驟一）
- ✅ 整合結果分析完成（步驟二）
- ✅ Phase 2-2 檔案產出完成（步驟三）

### 6.2 待完成工作

- ⏳ 其他主題整合（9+ 個主題）- 步驟四
- ⏳ 階段一實際檔案整合 - 步驟四
- ⏳ Phase 2-4 規則文件產出（如需要）- 步驟三剩餘

### 6.3 工作量評估

**步驟四總工作量**：非常大
- 其他主題整合：9+ 個主題 × 每個主題數小時 = 數十小時
- 階段一實際檔案整合：10+ 個主題 = 數十小時

**建議**：建立任務包給顧問團隊執行

---

## 七、下一步行動

### 7.1 立即行動

**建立步驟四任務包**：
- 包含所有背景資料
- 明確轉換規範和範例
- 明確交付要求
- 提供完整的執行指南

### 7.2 任務包內容建議

1. **背景資料**：
   - 現有系統結構和範例
   - Legacy 系統資料結構
   - 轉換規範（階段一和階段二）
   - `chronic_depletion` 成功範例

2. **執行要求**：
   - 轉換規範
   - 驗證標準
   - 交付格式

3. **範例和參考**：
   - `chronic_depletion` 完整範例
   - `stress_recovery` 現有系統範例

---

**文件狀態**：WORKING DOCUMENT（不鎖定，可回滾）  
**最後更新**：2026-01-12  
**狀態**：⏳ 執行計劃已建立，待執行
